;/*FB_PKG_DELIM*/

__d("ErrorSetup",["fb-error"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("fb-error").ErrorSetup}),98);
__d("JavascriptWebErrorFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1828905");b=d("FalcoLoggerInternal").create("javascript_web_error",a);e=b;g["default"]=e}),98);
__d("ErrorTransport",["JavascriptWebErrorFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("JavascriptWebErrorFalcoEvent").log(function(){return a})}g.log=a}),98);
__d("FalcoAppUniverse",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3});c=a;f["default"]=c}),66);
__d("Queue",[],(function(a,b,c,d,e,f){var g={};a=function(){function a(a){this._timeout=null,this._interval=(a==null?void 0:a.interval)||0,this._processor=a==null?void 0:a.processor,this._queue=[],this._stopped=!0}var b=a.prototype;b._dispatch=function(a){var b=this;a===void 0;if(this._stopped||this._queue.length===0)return;a=this._processor;if(a==null){this._stopped=!0;throw new Error("No processor available")}var c=this._interval;if(c!=null)a.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return b._dispatch()},c);else while(this._queue.length)a.call(this,this._queue.shift())};b.enqueue=function(a){this._processor&&!this._stopped?this._processor(a):this._queue.push(a);return this};b.start=function(a){a&&(this._processor=a);this._stopped=!1;this._dispatch();return this};b.isStarted=function(){return!this._stopped};b.dispatch=function(){this._dispatch(!0)};b.stop=function(a){this._stopped=!0;a&&this._timeout!=null&&clearTimeout(this._timeout);return this};b.merge=function(a,b){if(b){(b=this._queue).unshift.apply(b,a._queue)}else{(b=this._queue).push.apply(b,a._queue)}a._queue=[];this._dispatch();return this};b.getLength=function(){return this._queue.length};a.get=function(b,c){var d;b in g?d=g[b]:d=g[b]=new a(c);return d};a.exists=function(a){return a in g};a.remove=function(a){return delete g[a]};return a}();f["default"]=a}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),m=5*1024,n=(b=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue)!=null?b:60*1e3,o=(e=(i||(i=c("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?e:1e3;b=(f=(i||(i=c("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?f:1e3;var p="falco:",q=new(c("Queue"))(),r=5e3,s=6e4,t=c("uuidv4")(),aa="ods_web_batch",u=new Map(),v=new Set(),w=new Set(),x=d("FalcoUtils").getTaggedBitmap(38),y=(e=c("FalcoAppUniverse").cast((i||(i=c("AnalyticsCoreData"))).app_universe))!=null?e:1,z=[],A=0,B=null,C=!1,D=!1,E=!1,F=!0,G=!1,H=Date.now()-s,I=1,J=b>n?b:n,K=b;Y();for(e of(f=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?f:[]){v.add(e)}for(f of(b=(i||(i=c("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?b:[]){w.add(f)}function L(){return(i||(i=c("AnalyticsCoreData"))).enable_bladerunner&&!(k||(k=c("ExecutionEnvironment"))).isInWorker}function M(a,b){d("FalcoUtils").bumpODSMetrics(b.item.name,"event.info.streaming.batched",1);var c=b.item.extra.length;A+c>m&&(clearTimeout(B),N());z.push([a,b]);A+=c}function N(){B=null;C=!1;var a=z;S("event.info.streaming.batch_processing",a.map(function(a){return a[1].item}));!G?O(a,"event.non_critical_failure.streaming_init_not_complete"):q.enqueue(function(b){return b.log(a.map(function(a){return a[1].item}),function(b){if(!b){O(a,"event.info.banzai_fallback");return}P(a,b,"event.info.streaming.enqueued")})});z=[];A=0}function O(a,b){var e=function(a){var e,f=a[0],g=a[1];a=g.item;d("FalcoUtils").bumpODSMetrics(a.name,b,1);a.identity||(a.identity=(i||(i=c("AnalyticsCoreData"))).identity);if((e=a.logCritical)!=null?e:!1)U.logCritical([a],function(a){return f.markItem(g,a)});else{((e=a.logImmediate)!=null?e:!1)?U.logImmediately([a],function(a){return f.markItem(g,a)}):U.log([a],function(a){return f.markItem(g,a)})}};for(a of a)e(a);return}function P(a,b,c){for(a of a){var e=a[0],f=a[1];d("FalcoUtils").bumpODSMetrics(f.item.name,c,1);e.markItem(f,b)}}function ba(a){return{events:a.map(function(a){return{name:a.name,extra:a.extra,rate:a.policy.r,time:a.time/1e3,tag:0,tags:a.tags,shouldAddState:a.shouldAddState,identity:Q(a.identity),expTags:a.exptTags,sessionID:a.sessionId,deviceID:a.deviceId}})}}function ca(a){var b;a={deviceId:(i||(i=c("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:a,appId:i.app_id,appVersion:(a=(i||(i=c("AnalyticsCoreData"))).app_version)!=null?a:null,bundleId:null,consentState:null,identity:null,pushPhase:i.push_phase};((b=(b=(i||(i=c("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:b.length)!=null?b:0)>0&&(a.ambientState=(i||(i=c("AnalyticsCoreData"))).state_for_br);a.identity=Q(i.identity);return Object.freeze(a)}function Q(a){var b=a==null?void 0:a.claim;b=b!=null?[b]:[];if(y===2||y===3){var c=a==null?void 0:a.appScopedIdentity;if(c!==void 0)return{appScopedIdentity:{uid:c,identifier:c,claims:b}}}else{c=a==null?void 0:a.fbIdentity;if(c!==void 0)return{facebookIdentity:{actorId:c.actorId,accountId:c.accountId,claims:b}}}return null}function R(a,b){for(var e of a){var f,g;f=(g={},g.e=e.extra,g.r=e.policy.r,g.d=(f=e.deviceId)!=null?f:(i||(i=c("AnalyticsCoreData"))).device_id,g.s=(f=e.sessionId)!=null?f:d("WebSession").getId(),g.t=e.time,g);e.privacyContext&&(f.p=e.privacyContext);e.tags!=null&&(f.b=e.tags);g=e.identity;g&&(f.id=g);c("Banzai").post(p+e.name,f,b)}S("event.uploaded",a)}function S(a,b){for(b of b)b.name!==aa&&d("FalcoUtils").bumpODSMetrics(b.name,a,1)}function T(a,b){var e="falco.fabric.www."+(i||(i=c("AnalyticsCoreData"))).push_phase;(h||(h=d("ODS"))).bumpEntityKey(1344,e,a,b)}var U={log:function(a,b){S("event.info.banzai.log.upload_processing",a),R(a,c("Banzai").BASIC),b(!0)},logImmediately:function(a,b){S("event.info.banzai.log_immediately.upload_processing",a),R(a,c("Banzai").VITAL),b(!0)},logCritical:function(a,b){S("event.info.banzai.log_critical.upload_processing",a),R(a,{signal:!0,retry:!0}),b(!0)}};function da(a){Y();var b=V(a,"banzai_data_loss","log"),d=V(a,"banzai_data_loss","logImmediately"),e=V(a,"banzai_data_loss","logCritical"),f=V(a,"bladerunner_data_loss",""),g=V(a,"bladerunner_data_loss","logCritical");T("js.br_data_loss.posted."+a,1);if(G&&F)try{q.enqueue(function(b){return b.log([f],function(b){if(!b){T("js.br.transport_failure."+a,1);U.logCritical([g],function(b){T("js.br.failure_fallback_success_callback."+a,1)});return}T("js.br.success_callback."+a,1)})})}catch(b){T("js.br.error_enqueueing."+a,1),U.logCritical([g],function(b){T("js.br.enqueuing_fallback_success_callback."+a,1)})}else F||T("js.br.failed."+a,1),G||T("js.br.init_not_complete."+a,1),U.logCritical([g],function(b){T("js.br.init_fallback_success_callback."+a,1)});R([b],c("Banzai").BASIC);R([d],c("Banzai").VITAL);R([e],{signal:!0,retry:!0})}function V(a,b,d){return{name:b,time:(j||(j=c("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:a,falco_js_connection_id:t,logging_mode:d,logging_flow_flag:"original_flow"})}}function W(){H+r<Date.now()&&(da(I),H=Date.now(),I++)}function X(){window.setTimeout(function(){W(),I<=40&&X()},s)}function ea(a){q.start(function(b){return b({log:function(d,b){S("event.info.streaming.queue_processing",d);var e=JSON.stringify(ba(d));a?(i||(i=c("AnalyticsCoreData"))).enable_ack?c("promiseDone")(a.amendWithAck(e),function(a){a?(S("event.streamed.with_ack",d),S("event.uploaded",d)):S("event.non_critical_failure.streaming.ack_failed",d),b(a)},function(){S("event.non_critical_failure.streaming.ack_rejected",d),b(!1)}):(a.amendWithoutAck(e),S("event.streamed.without_ack",d),S("event.uploaded",d)):(S("event.non_critical_error.streaming.stream_not_available",d),b(!1))},logImmediately:function(b,a){this.log(b,a)},logCritical:function(b,a){this.log(b,a)}})})}function Y(){if(D)return;G=!1;if(!L())return;l.onReady(function(a){if(!a){F=!1;q.start(function(a){return a(U)});return}a=a;var b={onTermination:function(a){a.message==="Stream closed"?(q.stop(!0),D=!1):(d("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,q.start(function(a){return a(U)}))},onFlowStatus:function(){}};c("promiseDone")(a.requestStream({method:"Falco"},JSON.stringify(ca(d("WebSession").getId())),b,{requestId:""}).then(function(b){a=b,ea(a),G=!0,J=n,K=o})["catch"](function(a){d("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),q.stop(!0),D=!1}))});D=!0}function Z(a){var b,e=a.name;if(!L()||!F)return!1;if(v.has(e)||a.policy.s!==1&&((b=(i||(i=c("AnalyticsCoreData"))).br_stateful_migration_on)!=null?b:!1)){a.shouldAddState=!0;a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],x);return!0}if(y!==1&&(i||(i=c("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!w.has(e))return!1;if(a.policy.s===1){a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],x);return!0}return!1}function $(a){if(a==="")return null;if(u.has(a))return u.get(a);else{var b={claim:""},c=a.split("^#");if(c.length>=4){var d=c[0],e=c[1],f=c[2];c=c[3];f!==""?b={appScopedIdentity:f,claim:c}:d!==""&&(b={fbIdentity:{accountId:d,actorId:e},claim:c});u.set(a,b)}return b}}function a(){if(E)return;E=!0;c("PersistedQueue").setHandler("falco_queue_log",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){Z(e.item)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log",1),Y(),B==null&&(B=setTimeout(N,J)),g&&!a(f)&&(e.item.identity=g),M(b,e)):(g?e.item.identity=g:e.item.identity=(i||(i=c("AnalyticsCoreData"))).identity,U.log([e.item],function(a){return b.markItem(e,a)}))})(e)});c("PersistedQueue").setHandler("falco_queue_immediately",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){Z(e.item)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log_immediately",1),Y(),(B==null||!C)&&(clearTimeout(B),B=setTimeout(N,K),C=!0),e.item.logImmediate=!0,g&&!a(f)&&(e.item.identity=g),M(b,e),c("PersistedQueue").isPersistenceAllowed()||(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.streaming_no_persistence.log_immediately",1),N())):(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.banzai.log_immediately",1),g?e.item.identity=g:e.item.identity=(i||(i=c("AnalyticsCoreData"))).identity,U.logImmediately([e.item],function(a){return b.markItem(e,a)}))})(e)});c("PersistedQueue").setHandler("falco_queue_critical",function(b){var e,f=b.getQueueNameSuffix(),g=$(f);while(e=b.dequeueItem())(function(e){var h=e.item;Z(h)?(d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.streaming.log_critical",1),Y(),h.logCritical=!0,!G?(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity,O([[b,e]],"event.non_critical_failure.streaming_init_not_complete.log_critical")):(g&&!a(f)&&(h.identity=g),q.enqueue(function(a){return a.logCritical([h],function(a){if(!a){h.identity||(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity);O([[b,e]],"event.info.banzai_fallback.log_critical");return}P([[b,e]],a,"event.uploaded")})}))):(g?h.identity=g:h.identity=(i||(i=c("AnalyticsCoreData"))).identity,d("FalcoUtils").bumpODSMetrics(e.item.name,"event.info.upload_method.banzai.log_critical",1),U.logCritical([h],function(a){return b.markItem(e,a)}))})(e)});(i||(i=c("AnalyticsCoreData"))).enable_dataloss_timer&&(Y(),W(),X());function a(a){try{var b=d("FalcoUtils").identityToString((i||(i=c("AnalyticsCoreData"))).identity);return a===b}catch(a){(h||(h=d("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1);return!0}}}g.attach=a}),98);
__d("IntlCLDRNumberType01",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType03",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===0||a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType05",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType09",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("MAWCatQuery.graphql",["cr:11203"],(function(a,b,c,d,e,f,g){"use strict";f.exports=b("cr:11203")}),34);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MAWCatQuery.graphql");c=a;g["default"]=c}),98);
__d("MAWCatQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="29559957360285299"}),null);
__d("MAWCatQuery.facebook.graphql",["MAWCatQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:b("MAWCatQuery_facebookRelayOperation"),metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWCryptoAuthToken",["FBLogger","MAWCatQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a==null||a.secure_message_over_wa_cat_query==null||a.secure_message_over_wa_cat_query.encrypted_serialized_cat==null||a.secure_message_over_wa_cat_query.expiration_time_in_seconds==null){var b;c("FBLogger")("maw_device_reg").warn("Crypto Auth Token was null or incomplete %s:%s:%s:%s",a==null,(a==null?void 0:a.secure_message_over_wa_cat_query)==null,(a==null?void 0:(b=a.secure_message_over_wa_cat_query)==null?void 0:b.encrypted_serialized_cat)==null,a==null?void 0:(b=a.secure_message_over_wa_cat_query)==null?void 0:b.expiration_time_in_seconds);return{error:"Crypto Auth Token was null or incomplete"}}return{success:{encrypted_serialized_cat:a.secure_message_over_wa_cat_query.encrypted_serialized_cat,expiration_time_in_seconds:a.secure_message_over_wa_cat_query.expiration_time_in_seconds}}}function a(a){return d("relay-runtime").fetchQuery(a,c("MAWCatQuery"),{}).toPromise().then(h).then(function(a){if(a.error!==null&&a.error!==void 0)throw c("FBLogger")("maw_device_reg").mustfixThrow("[MAWCryptoAuthToken] Error while fetching CAT from GraphQL: %s",a.error);return a.success})}g.processCatResponse=h;g.fetchFreshCAT=a}),98);
__d("MAWStateManagerSyncToMainThread",["FBLogger","MAWBridge","WACommsConnectionState"],(function(a,b,c,d,e,f,g){"use strict";var h={WACommsConnectionState:d("WACommsConnectionState").WACommsConnectionState};function a(){var a=function(a){var b=h[a];i(a,b.get());b.onSet(function(b){i(a,b)})};for(var b of Object.keys(h))a(b)}function b(a,b){var d=h[a];if(d==null){c("FBLogger")("messenger_e2ee_web").warn("Unable to find GenericStateManager for key %s",a);return}d.set(b)}function e(){for(var a of Object.keys(h)){var b=h[a];i(a,b.get())}}function i(a,b){d("MAWBridge").getBridge().fireAndForget("event","updateStateManagerStateInMainThread",{stateManagerKey:a,value:b})}g.subscribeAndSyncStateManagerValuesToMainThread=a;g.updateStateManagerInMainThreadFromBridgeCall=b;g.resendCurrentValuesToMainThread=e}),98);
__d("MessengerInfraReport",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h={};a=function(){for(var a of Object.keys(h))delete h[Number(a)]};b=function(){return c("gkx")("23390")};var i=20;d=function(a,b,c){var d=h[a];if(!d){h[a]=new Map([[c,babelHelpers["extends"]({},b,{latestTimestampMs:Date.now(),startTimestampMs:Date.now()})]]);return}var e=d.get(c);if(e!=null){d.set(c,babelHelpers["extends"]({},e,{},b,{latestTimestampMs:Date.now()}));return}if(d.size>=i){h[a]=new Map([[c,babelHelpers["extends"]({},b,{latestTimestampMs:Date.now(),startTimestampMs:Date.now()})]]);return}d.set(c,babelHelpers["extends"]({},b,{latestTimestampMs:Date.now(),startTimestampMs:Date.now()}))};e=function(a,b){return(a=h[a])==null?void 0:a.get(b)};f=function(a,b){(a=h[a])==null?void 0:a["delete"](b)};g.reportedEvents=h;g.clearReportedEvents=a;g.isEPD=b;g.MAX_SIZE=i;g.storeEventData=d;g.getEventData=e;g.deleteEventData=f}),98);
__d("MessengerInfraReportUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return a===2};b=function(a){switch(a){case 1:return"START";case 2:return"SUCCESS";case 3:return"FAIL";case 4:return"CANCEL";case 113:return"TIMEOUT";case 706:return"CANCEL_UNLOAD";case 4158:return"INVALID";case 87:return"ERROR";case 5947:return"SUCCESS_PAST_TIMEOUT";case 160:return"OFFLINE";default:return String(a)}};f.isQplActionSuccessful=a;f.qplStatusStr=b}),66);
__d("MessengerInfraQplReport",["FBLogger","MAWCurrentUser","MWBroadcastChannel","MessengerInfraReport","MessengerInfraReportUtils","QPLEvent","QuickPerformanceLogger","memoizeOneWithArgs"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(a={},a[1056839232]={annotations:{string:["errorDescription","failReason","backendAckState"]},name:"MAW_TTRC",single:!0},a[25310776]={annotations:{string:["errorDescription","failReason"]},name:"MAW_INIT",single:!0},a[25305590]={annotations:{string:["uncaught_error"]},name:"LS_INIT",single:!0},a[25313175]={annotations:{"int":["errorCode","applicationError"],string:["errorDescription","thread_type"],string_array:["worker_restart_msgs","worker_restart_reasons"]},name:"MESSAGE_SEND_TO_SENT",single:!1},a[30605380]={annotations:{string:["thread_type","cancelType"]},name:"CHAT_TAB_OPEN",single:!1},a[25303796]={annotations:{string:["eb_failure_reason","range_extension_error","cancel_reason"]},name:"LOAD_MORE_MESSAGES",single:!1},a[1056843758]={annotations:{string:["range_extension_error"],string_array:["message_ranges_source"]},name:"MAW_MLV2_RANGE_EXTENSION",single:!1},a[30605361]={annotations:{string:["cancelType"]},name:"POPOVER_SHOW",single:!1},a[398998698]={annotations:{bool:["isE2eeMandated"],string:["errorDescription"]},name:"E2EE_COMPONENTS_CREATION",single:!1},a[398997251]={annotations:{string:["endCallReason"]},name:"CALL_JOIN",single:!1},a[398989351]={name:"ZENON_SDK",single:!1},a[521476165]={annotations:{string:["type","taskSource","triggerType","querySource","error","exception","thread_state_by_jid"]},name:"RESTORE_END_TO_END",single:!1},a[521471755]={annotations:{string:["error_description","exception","source","restoreType"]},name:"EB_API_MESSAGE_RANGE_QUERY",single:!1},a[25302828]={annotations:{string:["fail_reason"]},name:"MEDIA_RENDER",single:!1},a[1056846543]={annotations:{bool:["is_otid","is_thread_requested"],string:["threadState","description"]},name:"MAW_ON_ACT_THREAD_READY_USAGE",single:!1},a[25302828]={annotations:{string:["fail_reason"]},name:"MEDIA_RENDER",single:!1},a[521474469]={name:"EB_API_MESSAGE_POINT_QUERY",single:!1},a[521473213]={name:"EB_API_MEDIA_RESTORE_PROBE",single:!1},a[521476367]={name:"EB_API_MESSAGE_RANGE_QUERY_SEARCH",single:!1},a[521477507]={name:"EBLSDB_INIT",single:!0},a[1056836502]={annotations:{bool:["isMawThreadCreated","hasMappingRowAlready","hasPlaceholderRowInserted","isResultVerified"],string:["flushReason","trigger"]},name:"THREAD_MAPPING",single:!1},a[521471024]={annotations:{string:["backup_id"]},name:"FETCH_BACKUP_IDS",single:!1},a[25307273]={annotations:{string:["errorMsg"]},name:"MAW_DEVICE_REGISTRATION_ALL",single:!0},a),k=c("memoizeOneWithArgs")(function(a){return d("MWBroadcastChannel").MWBroadcastChannel("msgr_qpl_logger_"+a)}),l="not_started";b=function(){return l};e=function(){try{if(d("MessengerInfraReport").isEPD()){l="epd_blocked";return function(){}}var a=k(d("MAWCurrentUser").getID()),b=function(a){if(e[a.data[0]]==null)return c("FBLogger")("msgr_web_flytrap").warn("Handler %s is not set for QPL listener",a.data[0]);switch(a.data[0]){case"onMarkerEnd":e.onMarkerEnd==null?void 0:e.onMarkerEnd.apply(e,a.data[1]);break;case"onAnnotation":e.onAnnotation==null?void 0:e.onAnnotation.apply(e,a.data[1]);break;case"onMarkerStart":e.onMarkerStart==null?void 0:e.onMarkerStart.apply(e,a.data[1]);break;case"onMarkerPoint":e.onMarkerPoint==null?void 0:e.onMarkerPoint.apply(e,a.data[1]);break;default:c("FBLogger")("maw_init").mustfix("Must implement QPL forwarding for event name: %s",a.data[0])}};a.addEventListener("message",b);var e={onAnnotation:function(a,b,c,d,e){n(a,b,c,d,e)},onMarkerEnd:function(a,b,c){o(a,b,c)},onMarkerPoint:function(a,b,c,d){p(a,b,c,d)},onMarkerStart:function(a,b){q(a,b)}},f=(i||(i=c("QuickPerformanceLogger"))).addListener(e);l="started";return function(){f.dispose(),a.removeEventListener("message",b)}}catch(a){l="error";c("FBLogger")("msgr_web_flytrap").catching(a).mustfix("Failed to initialize QPL logger");return function(){}}};f=function(a){return(a=(a=j[a])==null?void 0:a.name)!=null?a:"UNKNOWN_QPL_NAME"};a=function(a){a=(h||(h=d("QPLEvent"))).getMarkerId(a);return j[a]};var m=function(a,b){a=d("MessengerInfraReport").getEventData(a,b);return a};function n(a,b,c,d,e){a=a.i;var f=j[a];if(!f)return;if(!((f=f.annotations)==null?void 0:(f=f[e])==null?void 0:f.includes(c)))return;e=m(a,b);if(!e)return;if(e.status!==1)return;e.annotations[c]=d}function o(a,b,c){b=b.i;var e=j[b];if(!e)return;var f=m(b,c);if(!f)return;if(f.status!==1)return;e.single&&(f.status=a,f.latestTimestampMs=Date.now());e.single||(d("MessengerInfraReportUtils").isQplActionSuccessful(a)?d("MessengerInfraReport").deleteEventData(b,c):(f.status=a,f.latestTimestampMs=Date.now()))}function p(a,b,c,d){a=a.i;var e=j[a];if(!e)return;var f=m(a,b);if(!f)return;if(f.status!==1)return;f.lastPoints.push(c);if(d!=null&&e.annotations!=null){a=function(a){var b;if(d[a]==null)return"continue";(b=e.annotations)==null?void 0:b[a].forEach(function(b){var c;c=(c=d[a])==null?void 0:c[b];c!=null&&(f.annotations[b]=c)})};for(b of Object.keys(e.annotations)){c=a(b);if(c==="continue")continue}}}function q(a,b){a=a.i;var c=j[a];if(!c)return;var e=m(a,b);if(e!=null&&e.status!==1)return;d("MessengerInfraReport").storeEventData(a,{annotations:{},lastPoints:[],single:c.single,status:1},b)}g.ReportedQPLEvents=j;g.getLoggerTabCommunication=k;g.getQplLoggerInitStatus=b;g.initializeLogger=e;g.getQplName=f;g.getReportedEvent=a;g.getCurrentEventData=m;g.onAnnotationHandler=n;g.onMarkerEndHandler=o;g.onMarkerPointHandler=p;g.onMarkerStartHandler=q}),98);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:710")}),98);
__d("WADynamicRouterSync",["ExecutionEnvironment","Promise","WALogger","WAMapWithDefault","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["No handler for bridge with namespace: "," route: "," called in environment: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge handler: ",""]);l=function(){return a};return a}function m(a,b){if(a==null)return;var c=a.toLastActiveClient;a=babelHelpers.objectWithoutPropertiesLoose(a,["toLastActiveClient"]);if(c===!0&&b!=null){return babelHelpers["extends"]({},a,{toClientId:(c=a.toClientId)!=null?c:b})}return a}a=function(){function a(){var a=this;this.$2=new Map();this.$4=new(d("WAMapWithDefault").MapWithDefault)(function(){return new Set()});this.$5=null;this.fireAndForget=function(b,c,d,e,f,g){e===void 0&&(e=!1),a.$3==null?void 0:a.$3(b,c,d),a.$4.get(b).add({route:c,arg:d,resolver:null,silentLog:e,eventCallbacks:f,opts:m(g,a.$5)}),a.$6(b,c)};this.sendAndReceive=function(c,d,e,f,g,h){f===void 0&&(f=!1);return new(i||(i=b("Promise")))(function(b){a.$3==null?void 0:a.$3(c,d,e),a.$4.get(c).add({route:d,arg:e,resolver:function(a){b(a)},silentLog:f,eventCallbacks:g,opts:m(h,a.$5)}),a.$6(c,d)})}}var e=a.prototype;e.setAckPayload=function(a){this.$1=a};e.getAckPayoad=function(){return this.$1};e.hasHandlerForNamespace=function(a){return this.$2.has(a)};e.getHandledNamespaces=function(){return Array.from(this.$2.keys())};e.setOnRouteCalled=function(a){this.$3=a};e.setNamespaceHandler=function(a,b){var c=this.$2,d=c.get(a);if(d===b)return;c.set(a,b);d==null&&this.$6(a)};e.$7=function(a,c){var e=a.route,f=a.arg,g=a.resolver,h=a.silentLog,j=a.eventCallbacks;a=a.opts;try{var k;this.$5=(k=a==null?void 0:a.fromClientId)!=null?k:this.$5;c(e,f,g,h,j,a)}catch(a){g==null?void 0:g((i||(i=b("Promise"))).reject(a)),d("WALogger").ERROR(l(),a)}};e.$6=function(a,b){var e=this,f=this.$4.get(a),g=this.$2.get(a);if(g==null){var i=(h||(h=c("ExecutionEnvironment"))).isInWorker?"worker":"main-thread";d("WALogger").ERROR(k(),a,b,i);return}f.forEach(function(a){f["delete"](a),e.$7(a,g)})};e.setHandlers=function(a,b){function e(e,f,g,h,i,k){if(b[e]==null){d("WALogger").ERROR(j(),e,a);throw c("err")(e+" is not defined for "+a)}h=b[e](f,k);g&&g(h)}this.setNamespaceHandler(a,e)};return a}();g.normaliseHandlerOptions=m;g.DynamicRouterSync=a}),98);
__d("WAOfflineUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["INIT","OFFLINE_RESUME","ONLINE"]);c=b("$InternalEnum")({Initializing:"initializing",Failed:"failed",Processing:"processing",Complete:"complete"});f.ServerRPCMode=a;f.WAClientInfraOfflineProgress=c}),66);