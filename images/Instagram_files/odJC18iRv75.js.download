;/*FB_PKG_DELIM*/

__d("LSInsertOrUpdatePinnedThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.db.table(82).put({threadKey:a[0],pinnedTimestamp:a[1]})},function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(c,d){d=c.done;c=c.value;return d?0:(c.item,b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){var c=a.update;a=a.item;return c({threadTags:b.i64.or_(a.threadTags==null?b.i64.cast([0,0]):a.threadTags,b.i64.cast([0,16384]))})}))})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSOmnistoreSettingsInsertOrUpdatePinnedThreadStoredProcedure";a.__tables__=["pinned_threads","threads"];e.exports=a}),null);
__d("LSUpdateFilteredThreadsRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(247).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.parentThreadKey,a[1])&&b.i64.eq(c.threadRangeFilter,a[2])&&b.i64.eq(c.secondaryThreadRangeFilter,a[7])&&c.threadRangeFilterValue===a[8]}),function(a){return a["delete"]()})},function(c){return b.db.table(247).add({minLastActivityTimestampMs:a[3],minThreadKey:a[4],parentThreadKey:a[1],folderName:a[0],threadRangeFilter:a[2],secondaryThreadRangeFilter:a[7],threadRangeFilterValue:a[8],maxLastActivityTimestampMs:b.i64.cast([0,1]),maxThreadKey:b.i64.cast([-2147483648,0]),isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:b.i64.gt(a[3],b.i64.cast([0,1]))&&b.i64.gt(a[4],b.i64.cast([-2147483648,0])),hasMoreAfter:!1,syncGroup:a[6]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateFilteredThreadsRangesStoredProcedure";a.__tables__=["filtered_threads_ranges_v3__generated"];e.exports=a}),null);