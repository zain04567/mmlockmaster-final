;/*FB_PKG_DELIM*/

__d("XPlatReactTextEncoder",[],(function(a,b,c,d,e,f){"use strict";a=self.TextEncoder;f.TextEncoder=a}),66);
__d("base64Binary",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b="";for(var c=0;c<a.byteLength;c+=3){var d=a.subarray(c,c+3);b+=k(d)}d=(a.byteLength+2)%3;return b.slice(0,b.length+d-2)+"==".slice(d)}function b(a){var b;a.length%4===0||h(0,51156);var c=a.length/4;b=(b=(b=a.match(/={0,2}$/))==null?void 0:b[0].length)!=null?b:0;b=new Uint8Array(c*3-b);for(var d=0;d<c;d++){var e=l(a.slice(d*4,d*4+4));b.set(e.subarray(0,b.byteLength-d*3),d*3)}return b}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=">___?456789:;<=___\0___\0\x01\x02\x03\x04\x05\x06\x07\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19______\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123";function k(a){var b;a=a[0]<<16|((b=a[1])!=null?b:0)<<8|((b=a[2])!=null?b:0);return String.fromCharCode(i.charCodeAt(a>>>18),i.charCodeAt(a>>>12&63),i.charCodeAt(a>>>6&63),i.charCodeAt(a&63))}function l(a){a=j.charCodeAt(a.charCodeAt(0)-43)<<18|j.charCodeAt(a.charCodeAt(1)-43)<<12|j.charCodeAt(a.charCodeAt(2)-43)<<6|j.charCodeAt(a.charCodeAt(3)-43);return new Uint8Array([a>>>16,a>>>8&255,a&255])}g.encode=a;g.decode=b}),98);
__d("Base64Utils",["XPlatReactTextEncoder","base64Binary"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("base64Binary").encode(new(d("XPlatReactTextEncoder").TextEncoder)().encode(a))}function b(a){return d("base64Binary").encode(new Uint8Array(a))}function c(a){return d("base64Binary").decode(a).buffer}g.encodeUnicode=a;g.fromArrayBuffer=b;g.toArrayBuffer=c}),98);
__d("CryptoLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("FBLogger")("labyrinth_web","crypto."+a)}function b(a,b){return b instanceof Error?a.catching(b):a}g.CryptoLogger=a;g.captureError=b}),98);
__d("DoubleKeyMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.set=function(a,b,c){var d=this.$1.get(a);d||this.$1.set(a,d=new Map());d.set(b,c)};b.get=function(a,b){return(a=this.$1.get(a))==null?void 0:a.get(b)};b["delete"]=function(a,b){var c=this.$1.get(a);c&&(c["delete"](b),c.size===0&&this.$1["delete"](a))};b.getAll=function(a){return this.$1.get(a)};b.deleteAll=function(a){this.$1["delete"](a)};return a}();f.DoubleKeyMap=a}),66);
__d("EBAPIQPLPoints",["QPLUserFlow"],(function(a,b,c,d,e,f,g){"use strict";e={CREATE_WORKER_NETWORK_EXECUTE_END:"create_worker_network_execute_end",CREATE_WORKER_NETWORK_EXECUTE_START:"create_worker_network_execute_start",GRAPHQL_QUERY_END:"graphql_query_end",GRAPHQL_QUERY_START:"graphql_query_start"};f={CLIENT_STATE_RETRIEVED:"client_state_retrieved",EB_NOT_ENABLED:"eb_not_enabled",EBLS_NOT_INITIALIZED:"ebls_not_initialized",EMPTY_DECRYPTION_RESPONSE:"empty_decryption_response",INVALID_CLIENT_STATE:"invalid_client_state",INVALID_GRAPHQL_RESPONSE:"invalid_graphql_response",INVALID_PARAMETERS:"invalid_parameters",LSDB_SINGLETON_RETRIEVED:"lsdb_singleton_retrieved",NO_CLIENT_STATE:"no_client_state",NULL_CHAT_JID:"null_chat_jid",RUNTIME_ERROR:"runtime_error",UNSUPPORTED_CONTEXT:"unsupported_context"};var h=babelHelpers["extends"]({},e),i=babelHelpers["extends"]({},e,{},f,{BACKUP_ID_NULL:"backup_id_null",BATCH_RESTORE_AND_DECRYPT_FAILURE:"batch_restore_and_decrypt_failure",DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_END:"decrypt_messages_echo_and_protobuf_end",DECRYPT_MESSAGES_ECHO_AND_PROTOBUF_START:"decrypt_messages_echo_and_protobuf_start",DECRYPT_MESSAGES_ECHO_END:"decrypt_messages_echo_end",DECRYPT_MESSAGES_ECHO_START:"decrypt_messages_echo_start",DECRYPT_MESSAGES_PROTOBUF_END:"decrypt_messages_protobuf_end",DECRYPT_MESSAGES_PROTOBUF_START:"decrypt_messages_protobuf_start",DECRYPTED_PROTOBUFS_NULL:"decrypted_protobufs_null",DELETE_MAILBOX:"delete_mailbox",DERIVE_AND_STORE_EPOCHS_END:"derive_and_store_epochs_end",DERIVE_AND_STORE_EPOCHS_START:"derive_and_store_epochs_start",ECHO_DECODE_END:"echo_decode_end",ECHO_DECODE_START:"echo_decode_start",ECHO_DECRYPTION_FAILURE:"echo_decryption_failure",ECHO_TO_PROTOBUF_CONVERSION_END:"echo_to_protobuf_conversion_end",ECHO_TO_PROTOBUF_CONVERSION_FAILURE:"echo_to_protobuf_conversion_failure",ECHO_TO_PROTOBUF_CONVERSION_START:"echo_to_protobuf_conversion_start",GRAPHQL_QUERY_EXCEPTION:"graphql_query_exception",MISSING_RANGE_INFO:"missing_range_info",NO_MESSAGES_TO_RESTORE:"no_messages_to_restore",NULL_MESSAGES:"null_messages",PROCESS_AND_DECRYPT_MESSAGES_END:"process_and_decrypt_messages_end",PROCESS_AND_DECRYPT_MESSAGES_FAILURE:"process_and_decrypt_messages_failure",PROCESS_AND_DECRYPT_MESSAGES_START:"process_and_decrypt_messages_start",PROTOBUF_DECRYPTION_FAILURE:"protobuf_decryption_failure",RESTORING_MIXED_ECHO_PROTOBUF_PAYLOAD:"restoring_mixed_echo_protobuf_payload",SERVER_SIDE_EXCEPTION:"server_side_exception",THREAD_NOT_FOUND_ON_SERVER:"thread_not_found_on_server"}),j={ADDED_ATTACHMENT_CONTEXT:"added_attachment_context",ADDED_ATTACHMENT_CONTEXT_LEGACY:"added_attachment_context_legacy",DEQUEUE:"added_to_queue_end",ENQUEUE:"added_to_queue_start",ENQUEUE_FAILURE:"enqueue_failure",GENERATE_BACKUP_DIRECTIVE_END:"generate_backup_directive_end",GENERATE_BACKUP_DIRECTIVE_START:"generate_backup_directive_start",GENERATE_REPORTING_META_END:"generate_reporting_meta_end",GENERATE_REPORTING_META_START:"generate_reporting_meta_start",GET_ATTACHMENT_CONTEXT_END:"get_attachment_context_end",GET_ATTACHMENT_CONTEXT_START:"get_attachment_context_start",MESSAGE_RESULT_FAILURE_OR_NULL:"message_result_failure_or_null",NO_INCOMING_MESSAGES:"no_incoming_messages",NO_PROCESSED_MESSAGES:"no_processed_messages",PROCESSED_MESSAGES:"processed_messages",RUNTIME_ERROR:"runtime_error",SUCCESSFULLY_PROCESSED_MESSAGE:"successfully_processed_message",UKNOWN_MESSAGE_VERSION_OR_PROTOCOL:"unknown_message_version_or_protocol",UNABLE_TO_CREATE_BACKUP_DIRECTIVE:"unable_to_create_backup_directive",UNKNOWN_MESSAGE_TYPE:"unknown_message_type",UNSUPPORTED_MESSAGE_TYPE:"unsupported_message_type",UPLOAD_DELETED_MESSAGE:"upload_deleted_message",UPLOAD_PAYLOAD_CREATED:"upload_payload_creation_success",UPLOAD_PAYLOAD_CREATION_FAILURE:"upload_payload_creation_failure",UPLOAD_PAYLOAD_CREATION_START:"upload_payload_creation_start"},k={ADD_DEVICE_CHECK_RC_STATUS:"add_device_check_rc_status",ADD_DEVICE_COULD_NOT_FIND_BACKUP:"add_device_could_not_find_backup",ADD_DEVICE_FAILED_DEVICE_REGISTRATION_ID_NULL:"add_device_failed_device_registration_id_null",ADD_DEVICE_FAILED_TO_GET_RC_STATUS:"add_device_failed_to_get_rc_status",ADD_DEVICE_FAILURE_BACKUP_NOT_FOUND:"add_device_failure_backup_not_found",ADD_DEVICE_OPTIMISTIC_STATUS:"add_device_optimistic_status",ADD_DEVICE_RUNTIME_ERROR:"add_device_runtime_error",ADD_DEVICE_SPROC_END:"add_device_sproc_end",ADD_DEVICE_SPROC_FAILURE:"add_device_sproc_failure",ADD_DEVICE_SPROC_START:"add_device_sproc_start",ADD_DEVICE_SUBSCRIPTION_END:"add_device_subscription_end",ADD_DEVICE_SUBSCRIPTION_START:"add_device_subscription_start",ADD_DEVICE_TASK_END:"add_device_task_end",ADD_DEVICE_TASK_START:"add_device_task_start",ADD_DEVICE_TIMEOUT:"add_device_timeout",INVALID_RECOVERY_CODE:"invalid_recovery_code",ON_START_BEGIN:"on_start_start",ON_START_SUCCESS:"on_start_end"},l={ADD_DEVICE_FETCH_VD_GRAPHQL_END:"add_device_fetch_vd_graphql_end",ADD_DEVICE_FETCH_VD_GRAPHQL_FAIL:"add_device_fetch_vd_graphql_fail",ADD_DEVICE_FETCH_VD_GRAPHQL_START:"add_device_fetch_vd_graphql_start",ADD_DEVICE_GQL_END:"add_device_gql_end",ADD_DEVICE_GQL_FAIL:"add_device_gql_fail",ADD_DEVICE_GQL_START:"add_device_gql_start",ADD_DEVICE_MISSING_GRAPHQL_FIELDS:"add_device_missing_graphql_fields",ADD_DEVICE_PARSE_RECOVERY_CODE_END:"add_device_parse_recovery_code_end",ADD_DEVICE_PARSE_RECOVERY_CODE_FAIL:"add_device_parse_recovery_code_fail",ADD_DEVICE_PARSE_RECOVERY_CODE_START:"add_device_parse_recovery_code_start",ADD_DEVICE_VIRTUAL_DEVICE_EXISTS:"add_device_virtual_device_exists",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_END:"add_device_vd_key_sproc_end",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_FAIL:"add_device_vd_key_sproc_fail",ADD_DEVICE_VIRTUAL_DEVICE_KEY_SPROC_START:"add_device_vd_key_sproc_start"},m={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",INITIALIZE_BACKUP_END:"initialize_backup_end",INITIALIZE_BACKUP_SPROC_END:"initialize_backup_sproc_end",INITIALIZE_BACKUP_SPROC_FAIL:"initialize_backup_sproc_fail",INITIALIZE_BACKUP_SPROC_START:"initialize_backup_sproc_start",INITIALIZE_BACKUP_START:"initialize_backup_start",OPTIMISTIC_CLIENT_STATE:"optimistic_client_state"},n={DELETE_EB_NON_DELETE_OPERATION:"delete_eb_non_delete_operation",DELETE_EB_NON_PUT_OPERATION:"delete_eb_non_put_operation",DELETE_EB_SPROC_FAIL:"delete_eb_sproc_fail",DELETE_EB_SPROC_START:"delete_eb_sproc_start",DELETE_EB_SPROC_SUCCESS:"delete_eb_sproc_success",DELETE_EB_TASK_FAIL:"delete_eb_task_fail",DELETE_EB_TASK_START:"delete_eb_task_start",DELETE_EB_TASK_SUCCESS:"delete_eb_task_success",FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start"},o={FETCH_BACKUP_IDS_END:"fetch_backup_ids_end",FETCH_BACKUP_IDS_START:"fetch_backup_ids_start",OPT_OUT_BACKUP_ROW_EXISTS:"opt_out_backup_row_exists",OPT_OUT_BACKUP_ROW_NULL:"opt_out_backup_row_null",OPT_OUT_BACKUP_SPROC_END:"opt_out_backup_sproc_end",OPT_OUT_BACKUP_SPROC_FAIL:"opt_out_backup_sproc_fail",OPT_OUT_BACKUP_SPROC_START:"opt_out_backup_sproc_start",OPT_OUT_BACKUP_TASK_END:"opt_out_backup_task_end",OPT_OUT_BACKUP_TASK_FAIL:"opt_out_backup_task_fail",OPT_OUT_BACKUP_TASK_START:"opt_out_backup_task_start"};function a(a,b,d,e,f){c("QPLUserFlow").addPoint(b,d,{data:babelHelpers["extends"]({},e,{bool:{runningInWorker:a}}),instanceKey:f})}function b(a,b,d,e,f){c("QPLUserFlow").endFailure(b,d,{annotations:babelHelpers["extends"]({},f,{bool:{runningInWorker:a}}),instanceKey:e})}function d(a,b,d,e){c("QPLUserFlow").endSuccess(b,{annotations:babelHelpers["extends"]({},e,{bool:{runningInWorker:a}}),instanceKey:d})}g.EBAPIQPLCommonPoints=e;g.EBAPIQPLCommonErrorPoints=f;g.EBMessageMetadataQPLPoints=h;g.EBMessageRestoreQueryQPLPoints=i;g.EBUploadQueueQPLPoints=j;g.EBAddDeviceQPLPoints=k;g.EBAddDeviceGraphqlQPLPoints=l;g.EBBackupInitQPLPoints=m;g.EBDeleteEBQPLPoints=n;g.EBOptOutQPLPoints=o;g.ebAPIAddQPLPoint=a;g.ebAPIEndFailure=b;g.ebAPIEndSuccess=d}),98);
__d("EBAPIWorkerCheck",[],(function(a,b,c,d,e,f){"use strict";function a(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(a){return!1}}f.runningInWorker=a}),66);
__d("WorkerRelayNetwork",["ActorURIConfig","MAWCurrentUser","RelayAPIConfig","WAResolvable","createRelayFBNetwork","createRelayFBNetworkFetch","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WAResolvable").Resolvable)();function a(){var a=i(d("MAWCurrentUser").getID());a={execute:a.execute};h.resolve(a);return a}function b(){return h.promise}function i(a,b){b={actorID:a,batchResponseChunks:!0,getAdditionalData:function(){var b={};a!=null&&(b[c("ActorURIConfig").PARAMETER_ACTOR]=a);c("RelayAPIConfig").useXController===!1&&c("RelayAPIConfig").accessToken!==""&&(b.access_token=c("RelayAPIConfig").accessToken);return b},graphURI:b};b=c("createRelayFBNetworkFetch")(b);var e=function(a,b,c){return d("relay-runtime").Observable.create(function(a){return a.complete()})};return c("createRelayFBNetwork")(b,e,null,null)}g.createWorkerNetworkExecute=a;g.getWorkerNetworkExecute=b}),98);
__d("MAWBridge",["WABridge"],(function(a,b,c,d,e,f,g){"use strict";function a(){return d("WABridge").getBridge()}g.getBridge=a}),98);
__d("executeGraphQLQuery",["DTSG","FBLogger","MAWBridge","asyncToGeneratorRuntime","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){b=d("relay-runtime").getRequest(b);if(b.params.operationKind==="subscription")throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Expected query or mutation operation");var f={force:!0},g=d("DTSG").getToken();if(g==null||g===""||typeof g!=="string"){g=(yield d("MAWBridge").getBridge().sendAndReceive("event","getDTSGToken")["catch"](function(a){throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Failed to get DTSG token from the main thread",a)}));if(g==null||g===""||typeof g!=="string")throw c("FBLogger")("messenger_web").mustfixThrow("executeGraphQLQuery: Received an empty DTSG token from the main thread");d("DTSG").setToken(g)}g=d("relay-runtime").createOperationDescriptor(b,e,f);return a.execute(g.request.node.params,g.request.variables,f)});return h.apply(this,arguments)}g.executeGraphQLQuery=a}),98);
__d("createWorkerMutation",["FBLogger","WorkerRelayNetwork","asyncToGeneratorRuntime","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=d("relay-runtime").getRequest(a);if(e.params.operationKind!=="mutation")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerMutation: Expected mutation operation");var f=d("WorkerRelayNetwork").getWorkerNetworkExecute();e=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=(yield f);return d("executeGraphQLQuery").executeGraphQLQuery(c,a,b).then(function(a){return a.toPromise()}).then(function(a){if(Array.isArray(a)){return(a=a[0])==null?void 0:a.data}else return null})});return function(a){return c.apply(this,arguments)}}();return[e]}g["default"]=a}),98);
__d("MWFBLogger",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";b=(a=c("FBLogger"))("messenger_web");d=a("messenger_web_media");e=a("messenger_web_sharing");f=a("messenger_web_calling");c=a("mps");g.MWLogger=b;g.MWMediaLogger=d;g.MWSharingLogger=e;g.MWCallingLogger=f;g.MPSLogger=c}),98);
__d("MAWRotateDTSG",["CSRFGuard","DTSG","MWFBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error rotating DTSG"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Getting new DTSG token"]);i=function(){return a};return a}var j=d("MWFBLogger").MWLogger.tags(["RotateDTSG"]),k=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;j.DEBUG(i());var b=new Request("/ajax/dtsg/?__a=true",{credentials:"include",method:"GET"});b=(yield self.fetch(b));if(b.status!==200)throw j.mustfixThrow("Unable to get new DTSG token: "+b.status);b=(yield b.text());b=d("CSRFGuard").clean(b);var c=JSON.parse(b);a=c==null?void 0:(a=c.payload)==null?void 0:a.token;c=c==null?void 0:(c=c.payload)==null?void 0:c.valid_for;if(a==null||c==null)throw j.mustfixThrow("DTSG response is not valid: "+b+"'");return{token:a,validFor:c}});return function(){return a.apply(this,arguments)}}(),l=null;function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){self.clearTimeout(l);try{var a=(yield k()),b=a.token;a=a.validFor;l=self.setTimeout(m,a/2*1e3);d("DTSG").setToken(b);return!0}catch(a){j.catching(a).MUSTFIX(h());l=self.setTimeout(m,10*60*1e3);return!1}});return n.apply(this,arguments)}g.getNewDTSG=k;g.tryRotateDTSG=m}),98);
__d("WACustomError",[],(function(a,b,c,d,e,f){"use strict";var g=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function a(a,b,c){b===void 0&&(b=!0);function d(c){var d=Error.call(this,c);this.message=c;d.name=a;this.name=a;b&&(this.stack=d.stack)}d.prototype=Object.create(c?c.prototype:g);d.prototype.constructor=d;return d}function h(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=c!=null&&c.length>0?c:h(b);c=a.call(this,c)||this;c.errors=b;return c}return b}(a("AggregateError",!0));var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("TimeoutError",!1)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.code=c;return a}return a}(a("HttpError",!1)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("UnimplementedMethod")),l=!1;function b(a){if(a==null||a.name!=="QuotaExceededError")throw a;l=!0}function c(){return l}function d(a){return JSON.stringify(a,Object.getOwnPropertyNames(a))}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.inner=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));f.customError=a;f.AggregateError=e;f.TimeoutError=i;f.HttpError=j;f.UnimplementedMethod=k;f.supressQuotaExceededError=b;f.hasSupressedQuotaExceededError=c;f.obtainErrorSummary=d;f.WrappedError=m}),66);
__d("WARetryableError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,"see error at this.source")||this;c.source=b;return c}return b}(d("WACustomError").customError("RetryableError"));g["default"]=a}),98);
__d("createWorkerQuery",["FBLogger","IGDWebUtils","MAWRotateDTSG","WARetryableError","WorkerRelayNetwork","asyncToGeneratorRuntime","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("relay-runtime").getRequest(a);if(f.params.operationKind!=="query")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerQuery: Expected query operation");f=(yield d("WorkerRelayNetwork").getWorkerNetworkExecute());e==null?void 0:e.onExecute==null?void 0:e.onExecute();var g=d("IGDWebUtils").isOnInstagramWeb();f=(yield d("executeGraphQLQuery").executeGraphQLQuery(f,a,b).then(function(a){return a.toPromise()}).then(function(a){e==null?void 0:e.onResponse==null?void 0:e.onResponse(a);return Array.isArray(a)?a[0].data:(a=a.data)!=null?a:null})["catch"](function(a){if(("code"in a&&a.code===1357004||"message"in a&&a.message.indexOf("1357004")!==-1||typeof a==="string"&&a.indexOf("1357004")!==-1)&&!g){c("FBLogger")("messenger_web").info("Failed with expired DTSG, attempting to rotate.");return d("MAWRotateDTSG").tryRotateDTSG().then(function(b){if(b)throw new(c("WARetryableError"))(a);throw a})}throw a}));return f});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WorkerRelay",["WorkerRelayNetwork","createWorkerMutation","createWorkerQuery","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";f.exports={createWorkerMutation:c("createWorkerMutation"),createWorkerQuery:c("createWorkerQuery"),executeGraphQLQuery:d("executeGraphQLQuery").executeGraphQLQuery,getWorkerRelayEnvironment:d("WorkerRelayNetwork").getWorkerNetworkExecute,graphql:d("relay-runtime").graphql}}),34);
__d("createMainThreadQuery",["FBLogger","IGDWebUtils","MAWRotateDTSG","WARetryableError","asyncToGeneratorRuntime","executeGraphQLQuery","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.getNetwork();a={execute:a.execute};return a}function e(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=d("relay-runtime").getRequest(a);if(f.params.operationKind!=="query")throw c("FBLogger")("messenger_web").mustfixThrow("createWorkerQuery: Expected query operation");var g=d("IGDWebUtils").isOnInstagramWeb();f=(yield d("executeGraphQLQuery").executeGraphQLQuery(e,a,b).then(function(a){return a.toPromise()}).then(function(a){return Array.isArray(a)?a[0].data:(a=a.data)!=null?a:null})["catch"](function(a){if(("code"in a&&a.code===1357004||"message"in a&&a.message.indexOf("1357004")!==-1||typeof a==="string"&&a.indexOf("1357004")!==-1)&&!g){c("FBLogger")("messenger_web").info("Failed with expired DTSG, attempting to rotate.");return d("MAWRotateDTSG").tryRotateDTSG().then(function(b){if(b)throw new(c("WARetryableError"))(a);throw a})}throw a}));return f});return h.apply(this,arguments)}g.getWorkerLikeRelayEnvironment=a;g.createMainThreadQuery=e}),98);
__d("EBCreateGraphQLFetchFnUnified",["EBAPIWorkerCheck","WorkerRelay","WorkerRelayNetwork","asyncToGeneratorRuntime","createMainThreadQuery","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("CometRelayEnvironment").__setRef("EBCreateGraphQLFetchFnUnified");function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("EBAPIWorkerCheck").runningInWorker();if(!a){var b=(yield h.load());return function(a,c){var e=d("createMainThreadQuery").getWorkerLikeRelayEnvironment(b);return d("createMainThreadQuery").createMainThreadQuery(a,c,e)}}else{yield d("WorkerRelayNetwork").createWorkerNetworkExecute();return d("WorkerRelay").createWorkerQuery}});return i.apply(this,arguments)}g.createGraphQlFetchFnUnified=a}),98);
__d("EBDeps",["FBLogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(){if(h==null)throw c("err")("EBDeps is not initialized");return h}function b(a,b){if(h!=null)return;var d={},e=function(e){var f=a[e];f instanceof Function?d[e]=function(){c("FBLogger")("labyrinth_web").info("EBDeps: function %s, reason %s",e,b);for(var d=arguments.length,g=new Array(d),h=0;h<d;h++)g[h]=arguments[h];return f.apply(a,g)}:(c("FBLogger")("labyrinth_web").info("EBDeps: %s is not function",e),d[e]=f)};for(var f of Object.keys(a))e(f);h=d}g.getDeps=a;g.setDeps=b}),98);
__d("EBGating",["gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("gkx")("15195")}g.isEBSMv2Phase1Enabled=a}),98);
__d("EBGetMinosWasm",["WAWasmModuleCache","bx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("bx").getURL(c("bx")("31853"));a=function(){return d("WAWasmModuleCache").loadWasmModule(h)};g.getMinosWasm=a}),98);
__d("LSEncryptedBackupsBackupTenancy",[],(function(a,b,c,d,e,f){a=Object.freeze({PRODUCTION:1,SHADOW:2,OPEN:3});f["default"]=a}),66);
__d("WAPubSub",["err"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(){this.$1=new Set()}var b=a.prototype;b.publish=function(a){this.$1.forEach(function(b){return b(a)})};b.subscribe=function(a){var b=this;this.$1.add(a);return function(){b.$1["delete"](a)}};return a}();b=function(){function a(){this.$1=new Map()}var b=a.prototype;b.publish=function(a,b){a=this.$2(a);a.forEach(function(a){return a(b)})};b.$2=function(a){(!this.$1.has(a)||this.$1.get(a)==null)&&this.$1.set(a,new Set());a=this.$1.get(a);if(a==null)throw c("err")("Key space should not be null");return a};b.subscribe=function(a,b){var c=this.$2(a);c.add(b);return function(){c["delete"](b)}};return a}();function a(){return new h()}g.WAPubSub=h;g.WAKeyedPubSub=b;g.simplePubSub=a}),98);
__d("WAGenericStateManager",["Promise","WAPubSub"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){this.$2=d("WAPubSub").simplePubSub(),this.$1=a}var c=a.prototype;c.onSet=function(a){return this.$2.subscribe(a)};c.set=function(a){this.$1=a;this.$2.publish(a);return this.$1};c.get=function(){return this.$1};c.waitForValue=function(a){var c=this;return this.$1===a?(h||(h=b("Promise"))).resolve():new(h||(h=b("Promise")))(function(b){var d=c.onSet(function(c){c===a&&(d(),b())})})};return a}();g.WAGenericStateManager=a}),98);
__d("MAWEBEnabledStateManager",["WAGenericStateManager"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,!1)||this}var c=b.prototype;c.isEnabled=function(){return this.get()};c.waitForEBEnabled=function(){return this.waitForValue(!0)};return b}(d("WAGenericStateManager").WAGenericStateManager);g.MAWEBEnabledStateManager=a}),98);
__d("MAWEBSwitch",["EBGating","ExecutionEnvironment","MAWEBEnabledStateManager","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;a=c("requireDeferred")("EBIsEbEnabledSubscriber").__setRef("MAWEBSwitch");var i=new(d("MAWEBEnabledStateManager").MAWEBEnabledStateManager)();((h||(h=c("ExecutionEnvironment"))).isInMainThread===!0||d("EBGating").isEBSMv2Phase1Enabled())&&void a.load().then(function(a){return a.subscribeToEbChanges(function(a){i.set(a)})});b=i;g["default"]=b}),98);
__d("LSDataTraceCheckPoint",[],(function(a,b,c,d,e,f){a=Object.freeze({CLIENT_DB_OUTBOUND:1,CLIENT_NETWORK_OUTBOUND:2,CLIENT_NETWORK_INBOUND:10,CLIENT_DB_INBOUND:11,CLIENT_EVALUATE_DASM:12,CLIENT_APP_STATE_CHANGE:13,CLIENT_CREATE_TASK:20,CLIENT_RECIPIENT_PRESENCE:21,CLIENT_EVALUATE_DASM_BEGIN:22,MQTT_PUBLISH:30,MQTT_PUBLISH_ACK:31,MQTT_DISCONNECTED:32,MQTT_CONNECTING:33,MQTT_CONNECTED:34,MQTT_CONNECTION_ACKED:35,TINCAN_RECEIVE_MESSAGE:36,TINCAN_RECEIVE_DECRYPTION_COMPLETE:37,TINCAN_RECEIVE_DECRYPTION_FAILED:38,TINCAN_RECEIVE_DR_QUEUED:39,TINCAN_RECEIVE_DR_SENT_TO_NETWORK:40,TINCAN_RECEIVE_DR_PUBLISH_TO_MQTT:41,TINCAN_RECEIVE_DRMQTT_PUBACK:42,TINCAN_RECEIVE_BOUNCE_TASK_QUEUED:43,TINCAN_RECEIVE_BOUNCE_TASK_SENT_TO_NETWORK:44,TINCAN_RECEIVE_BOUNCE_TASK_PUBLISH_TO_MQTT:45,RICH_MEDIA_DOWNLOAD_START:50,RICH_MEDIA_DOWNLOAD_END:51,RICH_MEDIA_DOWNLOAD_ERROR:52,RICH_MEDIA_UPLOAD_START:53,ARMADILLO_ACT:60,ARMADILLO_ACT_TASK_PICK:61,ARMADILLO_ACT_SERIALIZE:62,ARMADILLO_ACT_GROUP_SEND:63,ARMADILLO_ACT_SEND_FAILURE:64,ARMADILLO_ACT_MESSAGE_SEND:65,NETWORK_DISCONNECTED:70,NETWORK_CONNECTED:71,NETWORK_UNKNOWN:72,FLOW_CREAT:80,FLOW_END:81,FLOW_INTERRUPTED:82,FLOW_CONNECT_ID:83,FLOW_END_AND_FLUSH:84,FLOW_END_FOR_FAILURE:85,TRACE_CREATED:98,CLIENT_READY_TO_FLUSH:99,PENDING_DELTA:100,NO_PENDING_DELTA:101,INIT_SYNC:102,RESNAPSHOT:103,CATCH_UP:104,PERIODIC_SYNC:105,CATCH_UP_FROM_REVISION:106,RESNAPSHOT_CONTINUE:107,RESNAPSHOT_END:108,PERIODIC_SYNC_CONTINUE:109,PERIODIC_SYNC_END:110,CONTACT_SYNC_OPTIMISTIC:111,CONTACT_SYNC_FROM_OMNISTORE:112,CONTACT_SYNC_TAM_OPTIMISTC:113,CONTACT_SYNC_TAM_FROM_OMNISTORE:114,CONTACT_SYNC_TAM_ERROR:115,VERIFY_USER_FOR_SYNC:116,SNAPSHOT_START:117,SNAPSHOT_CONTINUE:118,SNAPSHOT_END:119,FETCH_DELTA:120,DELTA_SUMMARY:130,RECEIVE_DELIVERY_RECEIPT:200,TASK_DESERIALIZATION_ERROR:201,OPTIMISIC_MESSAGE_FAILED:202,SEND_SERVER_AUTHORITATIVE:203,THREAD_RANGE_QUERY_COMPLETE:204,THREAD_RANGE_QUERY_FAILURE:205,THREAD_POINT_QUERY_COMPLETE:206,SEND_SERVER_PARTIAL:207,MARK_AS_OPTIMISTIC_SENT:208,XMS_TRANSPORT_MESSAGE_SEND_START:300,XMS_TRANSPORT_MESSAGE_SEND_FAIL:301,SKIP_TASK_DISPATCH:900,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_START:1200,ADVANCED_CRYPTO_MEM_ENCRYPT_TASK_COMPLETE:1201,ADVANCED_CRYPTO_MEM_WA_PUBLISH:1202,ADVANCED_CRYPTO_MEM_PUBLISH_ACK:1203,ADVANCED_CRYPTO_MEM_SEND_TASK_COMPLETE:1204,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED:1205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING:1206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED:1207,ADVANCED_CRYPTO_MEM_FAILURE:1208,ADVANCED_CRYPTO_MEM_SEND_SUCCESS_WITH_RETRY:1209,ADVANCED_CRYPTO_MEM_DELIVERY_RECEIPT_RECEIVED:1210,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_START:1211,ADVANCED_CRYPTO_REGISTRATION_CAT_DISK_FETCH_END:1212,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_START:1213,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_RETRYSTART:1214,ADVANCED_CRYPTO_REGISTRATION_CAT_NETWORK_FETCH_END:1215,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_START:1216,ADVANCED_CRYPTO_REGISTRATION_WA_REQUEST_SEND_END:1217,ADVANCED_CRYPTO_REGISTRATION_WCR_REGISTER:1218,ADVANCED_CRYPTO_REGISTRATION_SAVE_WA_DEVICE_ID_ERROR:1219,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_START:1220,ADVANCED_CRYPTO_MEM_DEVICE_FETCH_END:1221,ADVANCED_CRYPTO_MEM_ENCRYPTION_BEGIN:1222,ADVANCED_CRYPTO_MEM_ENCRYPTION_END:1223,ADVANCED_CRYPTO_MEM_ENCRYPTION_DEVICE_COUNT:1224,ADVANCED_CRYPTO_DUAL_SEND:1225,ADVANCED_CRYPTO_REGISTRATION_SERVER_SUCCESS:1226,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER:1227,ADVANCED_CRYPTO_REGISTRATION_CAT_NULL:1228,ADVANCED_CRYPTO_REGISTRATION_WCR_MANAGER_NULL:1229,ADVANCED_CRYPTO_REGISTRATION_RESPONSE_NULL:1230,ADVANCED_CRYPTO_REGISTRATION_SELF_NULL:1231,ADVANCED_CRYPTO_REGISTRATION_EMPTY_DEVICE_ID:1232,ADVANCED_CRYPTO_REGISTRATIONRETRY_REGISTER_FAILURE:1233,ADVANCED_CRYPTO_GROUP_DUAL_SEND:1234,RAVEN_IMAGE_MESSAGE:1235,RAVEN_VIDEO_MESSAGE:1236,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_CAT:1237,ADVANCED_CRYPTO_REGISTRATION_RETRY_REGISTER_NETWORK:1238,ADVANCED_CRYPTO_CAT_DISK_FETCH_CAT_INVALID:1239,ADVANCED_CRYPTO_RECONNECT_GENERIC_ERROR:1240,ADVANCED_CRYPTO_RECONNECT_CAT_INVALID:1241,ADVANCED_CRYPTO_RECONNECT_CAT_EXPIRED:1242,ADVANCED_CRYPTO_CAT_MEMORY_FETCH_NULL:1243,ADVANCED_CRYPTO_FIRST_CONNECTION_START:1244,LABYRINTH_INITIALIZE_BACKUP_SPROC:1400,LABYRINTH_INITIALIZE_BACKUP_SUCCESS_SPROC:1401,LABYRINTH_INITIALIZE_BACKUP_FAILURE:1402,LABYRINTH_CREATE_BACKUP_MAILBOX_SPROC:1403,LABYRINTH_HANDLE_CREATE_BACKUP_MAILBOX_SUCCESS_SPROC:1404,LABYRINTH_OPEN_EPOCH_SPROC:1405,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC:1406,LABYRINTH_HANDLER_OPEN_EPOCH_FAILURE_SPROC:1407,LABYRINTH_CREATE_VIRTUAL_DEVICE_SPROC:1410,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_SUCCESS_SPROC:1411,LABYRINTH_HANDLE_CREATE_VIRTUAL_DEVICE_FAILURE_SPROC:1412,LABYRINTH_ADD_DEVICE_SPROC:1413,LABYRINTH_ADD_DEVICE_FROM_VIRTUAL_SPROC:1414,LABYRINTH_HANDOLE_WRONG_RECOVERY_CODE_SPROC:1415,LABYRINTH_HANDLE_ADD_DEVICE_SUCCESS_SPROC:1416,LABYRINTH_HANDLE_ADD_DEVICE_FAILURE_SPROC:1417,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_ALREADY_PENDING:1600,LABYRINTH_ADD_DEVICE_SPROC_UPDATE_RECOVERY_DATA_TABLE_START:1601,LABYRINTH_ADD_DEVICE_SPROC_ADD_DEVICE_NO_VD_TABLE:1602,LABYRINTH_ADD_DEVICE_SPROC_GENERATE_RECOVERY_SECRETS_START:1603,LABYRINTH_ADD_DEVICE_SPROC_WRONG_RC:1604,LABYRINTH_ADD_DEVICE_SPROC_NULL_VD:1605,LABYRINTH_ADD_DEVICE_SPROC_NO_RC_STATUS_TABLE_FOUND:1606,LABYRINTH_ADD_DEVICE_SPROC_ISSUE_FETCH_VD_TASK:1607,LABYRINTH_ADD_DEVICE_SPROC_SUCCESS:1608,LABYRINTH_INITIALIZE_RESTORE_SPROC:1418,LABYRINTH_DECRYPT_THREADS_SPROC:1419,LABYRINTH_REQUEST_MESSAGES_FROM_THREADS_SPROC:1420,LABYRINTH_REQUEST_MESSAGES_FROM_RANGE_QUERY_SPROC:1421,LABYRINTH_DECRYPT_MESSAGES_SPROC:1422,LABYRINTH_DELETE_BACKUP_ON_CLIENT_SPROC:1423,LABYRINTH_DELETE_BACKUPS_SPROC:1424,LABYRINTH_HANDLE_DELETE_MAILBOX_SPROC:1425,LABYRINTH_ISSUE_DELETE_BACKUP_TASK_SPROC:1426,LABYRINTH_BACKUP_UPLOAD_BEGIN:1427,LABYRINTH_BACKUP_UPLOAD_SUCCESS_SPROC:1428,LABYRINTH_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC:1429,LABYRINTH_QR_INIT_ADD_DEVICE_SPROC:1430,LABYRINTH_QR_INIT_ADD_DEVICE_SUCCESS_SPROC:1431,LABYRINTH_QR_INIT_GET_SECRETS_SPROC:1433,LABYRINTH_QR_FINISH_ADD_PEER_DEVICE_SPROC:1434,LABYRINTH_SYNC_EPOCHS_STORED_PROCEDURE_SPROC:1436,LABYRINTH_SYNC_EPOCHS_SUCCESS_SPROC:1437,LABYRINTH_SYNC_EPOCHS_FORWARD_DERIVATION_END:1438,LABYRINTH_SYNC_EPOCHS_BACKWARD_DERIVATION_END:1439,LABYRINTH_SYNC_EPOCHS_OPEN_NEW_EPOCH:1440,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC:1441,LABYRINTH_PREPARE_OPEN_EPOCH_SUCCESS_SPROC:1442,LABYRINTH_MEB_MANAGER_ADD_DEVICE:1443,LABYRINTH_BACKUP_UPLOAD_FAIL:1450,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SPROC:1498,LABYRINTH_DECRYPT_SINGLE_MESSAGE_SUCCESS:1499,LABYRINTH_MEDIA_BACKUP_START:1455,LABYRINTH_MEDIA_BACKUP_SUCCESS:1456,LABYRINTH_MEDIA_BACKUP_FAILURE:1458,LABYRINTH_MEDIA_RESTORE_START:1459,LABYRINTH_MEDIA_RESTORE_SUCCESS:1460,LABYRINTH_MEDIA_RESTORE_FAILURE:1462,LABYRINTH_REMOVE_VIRTUAL_DEVICE_SPROC:1484,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_SUCCESS:1485,LABYRINTH_HANDLE_REMOVE_VIRTUAL_DEVICE_RESULT_FAILURE:1486,LABYRINTH_REMOVE_VIRTUAL_DEVICE_BACKUP_NOT_FOUND:1493,LABYRINTH_REMOVE_VIRTUAL_DEVICE_WRITE_TASK:1494,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_TASK_EXECUTER:1495,LABYRINTH_BACKUP_UPLOAD_ENQUEUE_SERIALIZER:1496,LABYRINTH_BACKUP_UPLOAD_SERIALIZE:1451,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_SUCCEED:1463,LABYRINTH_BACKUP_UPLOAD_SERIALIZE_FAIL:1464,LABYRINTH_UPDATE_BACKUP_TABLE_SPROC:1467,LABYRINTH_FETCH_BACKUP_IDS_SPROC:1468,LABYRINTH_PROCESS_BACKUP_IDS_SPROC:1487,LABYRINTH_BACKUP_STATUS_NO_INFO:1488,LABYRINTH_BACKUP_STATUS_FETCH_ERROR:1489,LABYRINTH_BACKUP_STATUS_NOT_ONBOARDED:1490,LABYRINTH_BACKUP_STATUS_ONBOARDED:1491,LABYRINTH_BACKUP_STATUS_NO_BACKUPS_PRESENT:1492,LABYRINTH_OPT_OUT_OF_BACKUP_SPROC:1469,LABYRINTH_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1470,LABYRINTH_HANDLE_TRIGGER_THIRD_PARTY_ID_GENERATION_SPROC:1471,LABYRINTH_FETCH_BACKUPS_METADATA_SPROC:1478,LABYRINTH_HANDLE_BACKUPS_METADATA_RESULT_SPROC:1480,LABYRINTH_RESTORE_THREADS_SUCCESS:1481,LABYRINTH_RESTORE_MESSAGES_SUCCESS:1482,LABYRINTH_POINT_QUERY_MESSAGE_RESTORE:2511,LABYRINTH_RESTORE_MESSAGE_NEWER_DIRECTION:2514,LABYRINTH_RESTORE_SURROUNDING_MESSAGES:2515,LABYRINTH_BACKUP_UPLOAD_GET_ECHO_DOC:1497,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE:1800,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_SUCCESS:1801,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_BACKUP_STATE_FAILURE:1802,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_CALLED:1803,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_SUCCESS:1804,LABYRINTH_MEBMANAGER_ADD_DEVICE_ADD_DEVICE_SPROC_RETURN_FAILURE:1805,LABYRINTH_MEBMANAGER_ADD_DEVICE_NOTOFICATION_TRIGGERED:1806,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATE:1807,LABYRINTH_MEBMANAGER_ADD_DEVICE_FETCH_ADD_DEVICE_STATEFAILURE:1808,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_CALLED:1809,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_SUCCESS:1810,LABYRINTH_MEBMANAGER_ADD_DEVICE_INIT_RESTORE_SPROC_RETURN_FAILURE:1811,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_CALLED:1812,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_SUCCESS:1813,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_SPROC_RETURN_FAILURE:1814,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_NOTIFICATION_TRIGGERRED:1815,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS:1816,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_FETCH_RECOVERY_CODE_STATUS_FAILURE:1817,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_SUCCESS:1818,LABYRINTH_MEBMANAGER_CREATE_EXTRA_VIRTUAL_DEVICE_CREATE_EXTRA_VIRTUAL_DEVICE_FAILURE:1819,LABYRINTH_MEBMANAGER_WRONG_RECOVERY_CODE:1823,LABYRINTH_ENCRYPT_MESSAGE_FAIL:1828,LABYRINTH_ENCRYPT_MESSAGE_GENERATED_PAYLOAD:1824,LABYRINTH_ENCODE_DOCUMENT:1820,LABYRINTH_ENCODE_DOCUMENT_FAIL:1821,LABYRINTH_ENCODE_DOCUMENT_SUCCESS:1822,LABYRINTH_UPLOAD_CANCEL:1850,LABYRINTH_DELETE_BACKUP_ON_CLIENT_STARTING_CANCEL:1851,LABYRINTH_DELETE_BACKUP_ON_CLIENT_DID_CANCEL:1852,LABYRINTH_DELETE_BACKUP_ON_CLIENT_FAILED_CANCEL:1853,LABYRINTH_BACKUP_RETRY_DELETE_MESSAGE_BACKUP_STATUS_ENTRY:1865,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN:1881,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_GOT_MESSAGE_IDS_FROM_ACT:1882,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_BEGIN_OCMF_OPE_OPERATIONS:1883,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_END_OCMF_OPE_OPERATIONS:1884,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_FETCH_MESSAGE_RANGE_ERROR:1885,LABYRINTH_MESSAGE_INTEGRITY_CHECKER_ISSUE_COMPARATOR_TASK:1886,LABYRINTH_CLEAR_BACKUP_TABLE_ON_CLIENT:1891,LABYRINTH_CLEAR_VIRTUAL_DEVICES_TABLE_ON_CLIENT:1892,LABYRINTH_CLEAR_BACKUP_METADATA_TABLE_ON_CLIENT:1893,SAP_VESTA_FETCH_VESTA_KEY_AND_SECRET_BEGIN:2400,LABYRINTH_PLUGIN_CALLING_GENERATE_RECOVERY_CODE:2401,SAP_FESTA_FETCH_KEY_AND_SECRET_COMPLETION:2402,SAP_VESTA_CALLING_VESTA_REGISTRATION:2403,SAP_VESTA_REGISTRATION_COMPLETION:2404,LABYRINTH_PLUGIN_CALLING_CREATE_EXTRA_VIRTUAL_DEVICE:2405,SAP_VESTA_NOTIFY_SECRET_STORED_COMPLETION:2406,SAP_VESTA_NOTIFY_CLIENT_ABOUT_VESTA_REGISTRATION:2407,SAP_VESTA_CALLING_VESTA_LOGIN:2411,SAP_VESTA_LOGIN_COMPLETION:2412,LABYRINTH_PLUGIN_CALLING_ADD_DEVICE:2413,LABYRINTH_PLUGIN_CALLING_INITIALIZE_BACKUP:2416,LABYRINTH_PIN_SETUP_BEGIN:2417,LABYRINTH_PIN_SETUP_SUCCESS:2418,LABYRINTH_PIN_SETUP_FAILURE:2419,LABYRINTH_PIN_RESTORE_BEGIN:2420,LABYRINTH_PIN_RESTORE_SUCCESS:2421,LABYRINTH_PIN_RESTORE_FAILURE:2422,LABYRINTH_PLUGIN_CALLING_INITIALIZE_RESTORE:2423,LABYRINTH_FETCH_THREAD_IDS_SPROC:2500,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_SUCCESS:2501,LABYRINTH_FETCH_THREAD_IDS_NATIVE_OP_FAILURE:2502,LABYRINTH_REQUEST_MESSAGES_FROM_FETCH_THREAD_IDS_SPROC:2503,LABYRINTH_REQUEST_MESSAGES_FROM_INIT_RESTORE_SPROC:2506,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_START:2512,LABYRINTH_POINT_QUERY_RESTORE_TASK_SPROC_END:2513,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_START:2800,LABYRINTH_VERSIONING_UPSERT_DEVICE_ENCRYPTION_VERSIONS_TO_CLIENT_SPROC_END:2801,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_ENCRYPTION_VERSION_DATA_SPROC:2802,LABYRINTH_VERSIONING_UPSERT_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2803,LABYRINTH_VERSIONING_SYNC_ENCRYPTION_VERSION_DATA_SPROC:2804,LABYRINTH_VERSIONING_VERSION_SUPPORTED:2805,LABYRINTH_VERSIONING_SYNC_UPDATE_VERSION_DATA:2806,LABYRINTH_VERSIONING_SYNC_NO_VERSION_DATA:2807,LABYRINTH_VERSIONING_VERSION_SELECTED:2808,LABYRINTH_VERSIONING_DELETE_AND_SYNC_DEVICE_DELETE_DEVICE_ENCRYPTION_VERSION_DATA:2809,LABYRINTH_VERSIONING_VERSION_NOT_SUPPORTED:2810,LABYRINTH_VERSIONING_UPSERT_DEVICE_INVALID_SIGNATURE:2811,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_ISSUE_REQUEST_ASSOC_DEVICES:2821,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_NO_BACKUP:2822,LABYRINTH_PREPARE_OPEN_EPOCH_FAILURE_FLOW_ALREADY_IN_PROGRES:2823,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC:2824,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_NUM_EDGES:2825,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_FROM:2826,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_PROCESS_EDGE_TO:2827,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_SOURCE:2828,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_SOURCE_EPOCH_LOADED:2829,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DERIVE_CHAINING_KEY_PSK:2830,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_FORWARD_EDGE_ENTROPY:2831,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_SUCCESS:2832,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_EDGE_DECRYPTION_FAIL:2833,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FORWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2834,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_SOURCE:2835,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_SOURCE_EPOCH_LOADED:2836,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_DECRYPT_BACKWARD_EDGE:2837,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DECRYPTION_SUCCESS:2838,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_EDGE_DERIVATION_FAIL:2839,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_BACKWARD_FAIL_TO_LOAD_SOURCE_EPOCH:2840,LABYRINTH_DERIVE_AND_STORE_EPOCHS_SPROC_FAILURE:2841,LABYRINTH_GET_OPEN_EPOCH_KEYS_SPROC:2842,LABYRINTH_GET_OPEN_EPOCH_KEYS_NO_EPOCHS_ON_CLIENT:2843,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_ALL_EPOCH_ANON_IDS:2844,LABYRINTH_GET_OPEN_EPOCH_KEYS_NUM_ANON_IDS:2845,LABYRINTH_GET_OPEN_EPOCHS_KEYS_EPOCH_ANON_ID_LIST_EMPTY:2846,LABYRINTH_GET_OPEN_EPOCH_KEYS_GET_KEYS_FOR_ANON_ID:2847,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NOT_FOUND:2848,LABYRINTH_SYNC_EPOCHS_SPROC_DOWNLOAD_EPOCHS_V2_WRITE_TASK:2849,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_INITIAL_EPOCH:2850,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_EPOCH_WITH_LAST_EPOCH_METADATA:2851,LABYRINTH_OPEN_EPOCH_SPROC_OPEN_AFTER_FIRST_EPOCH:2852,LABYRINTH_OPEN_EPOCH_SPROC_FAILURE_LAST_EPOCH_NOT_FOUND:2853,LABYRINTH_OPEN_EPOCH_SPROC_ERROR:2854,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_CLOSE_LAST_EPOCH:2855,LABYRINTH_PREPARE_OPEN_EPOCH_SPROC_DERIVE_AND_STORE_EPOCH:2856,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_DERIVE_AND_STORE:2857,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_AUTHORITY:2858,LABYRINTH_HANDLER_OPEN_EPOCH_SUCCESS_SPROC_UPDATE_EPOCH_ID:2859,LABYRINTH_INCLUDE_FALLBACK_KEY_DURING_ENCRYPTION:2860,LABYRINTH_DERIVE_FALLBACK_KEY:2861,LABYRINTH_FAILED_TO_INCLUDE_FALLBACK_KEY:2862,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_VALUE:2863,LABYRINTH_GET_OPEN_EPOCH_KEYS_ANON_ID_NULL_VALUE:2864,LABYRINTH_MESSAGE_RESTORE_EPOCH_ANON_ID_NULL:2865,LABYRINTH_WEB_EPOCH_ROTATION_ENABLED:2866,LABYRINTH_WEB_EPOCH_ROTATION_DISABLED:2867,LABYRINTH_MOBILE_EPOCH_ROTATION_ENABLED:2868,LABYRINTH_MOBILE_EPOCH_ROTATION_DISABLED:2869,LABYRINTH_DECRYPT_MESSAGE_SPROC_SINGLE_EPOCH_KEY:2870,LABYRINTH_DECRYPT_MESSAGE_SPROC_EPOCH_NOT_FOUND_ERROR:2871,LABYRINTH_DECRYPT_MESSAGE_SPROC_MULTIPLE_EPOCHS_ERROR:2872,LABYRINTH_WEB_ECHO_MESSAGE_RESTORE_BEGIN:3600,LABYRINTH_WEB_ISSUE_RESTORE_JOB_DONE:3601,LABYRINTH_WEB_INSERT_TO_BAKCUP_MESSAGE_TABLE_DONE:3602,LABYRINTH_WEB_RESTORE_WITH_SERIALIZER_START:3603,LABYRINTH_WEB_ISSUE_RESTORE_JOB_STARTED:3604,LABYRINTH_WEB_INSERT_TO_RESTORE_PAYLOAD_CONTEXT_TABLE_DONE:3605,LABYRINTH_WEB_XMA_RESTORE_STARTED:3606,LABYRINTH_WEB_XMA_RESTORE_ENDED:3607,LABYRINTH_WEB_XMA_RESTORE_MEDIAID_NULL:3608,LABYRINTH_WEB_XMA_RESTORE_DBXMA_NULL:3609,LABYRINTH_WEB_ISSUE_MESSAGE_RANGE_QUERY:3610,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_INVALID_REQUEST:3700,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_BEGIN:3701,LABYRINTH_WEB_ECHO_MESSAGE_UPLOAD_FAILURE:3702,LABYRINTH_WEB_UPLOAD_THREAD_NOT_PRESENT:3703,LABYRINTH_WEB_UPLOAD_THREAD_PRESENT:3704,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_UNSUCCESSFUL:3705,LABYRINTH_WEB_UPLOAD_GET_SENDER_INFO_SUCCESSFUL:3706,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NULL:3707,LABYRINTH_WEB_UPLOAD_CONTACT_NAME_NOT_NULL:3708,LABYRINTH_WEB_UPLOAD_GET_RECEIPT_STATUS_LIST_SUCCESSFUL:3709,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NULL:3710,LABYRINTH_WEB_UPLOAD_GET_SENDER_DISPLAY_NAME_FOR_QUOTED_MSG_NOT_NULL:3711,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_SUCCESSFUL:3712,LABYRINTH_WEB_UPLOAD_XMA_DATA_UPLOAD_UNSUCCESSFUL:3713,LABYRINTH_WEB_UPLOAD_INVALID_MSG_TYPE_FOR_MEDIA_TYPE:3714,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_TRUE:3715,LABYRINTH_WEB_UPLOAD_IS_MEDIA_MSG_FALSE:3716,LABYRINTH_WEB_UPLOAD_UNSUPPORTED_MEDIA_TYPE:3717,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ID_FOUND_IN_MEDIA_MSG:3718,LABYRINTH_WEB_UPLOAD_NO_MEDIA_ENTRY_FOR_MEDIA_ID:3719,LABYRINTH_WEB_UPLOAD_GET_REACTION_DATA_SUCCESSFUL:3720,LABYRINTH_WEB_UPLOAD_GET_QUOTE_MSG_SUCCESSFUL:3721,LABYRINTH_WEB_UPLOAD_GET_QUOTE_SENDER_NAME_SUCCESSFUL:3722,LABYRINTH_WEB_UPLOAD_FB_ID_NULL_FOR_XMA_MSG:3723,LABYRINTH_WEB_UPLOAD_GET_XMA_DATA_SUCCESSFUL:3724,LABYRINTH_WEB_UPLOAD_NO_XMA_DB_ENTRY_FOR_EXTERNAL_ID:3725,LABYRINTH_WEB_UPLOAD_ECHO_MESSAGE_CREATION_SUCCESSFUL:3726,LABYRINTH_WEB_UPLOAD_MISSING_MEDIA_DATA_FOR_MEDIA_MSG:3727,LABYRINTH_WEB_UPLOAD_INVOKE_MESSAGE_UPLOAD_SPROC:3728,LABYRINTH_WEB_UPLOAD_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3729,LABYRINTH_WEB_UPLOAD_USER_DEVICE_NOT_ENROLLED:3730,LABYRINTH_WEB_GET_BACKUP_TENANCY:3731,LABYRINTH_WEB_UPLOAD_ERROR_OCCURRED_ON_ISSUE_MESSAGE_UPLOAD_UI_EVENT:3739,LABYRINTH_WEB_UPLOAD_XMA_NOT_FOUND_IN_IDB:3740,LABYRINTH_WEB_UPLOAD_MEDIA_NOT_FOUND_FOR_XMA_IN_IDB:3741,LABYRINTH_WEB_UPLOAD_INVALID_ECHO_MESSAGE_SERIALIZATION_RESPONSE:3742,LABYRINTH_WEB_UPLOAD_DUPLICATE_REQUEST:3743,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MSG:3744,LABYRINTH_WEB_RETROACTIVE_BACKUPS_START_UPLOAD_MEDIA:3745,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MSG_ERROR:3746,LABYRINTH_WEB_RETROACTIVE_BACKUPS_UPLOAD_MEDIA_ERROR:3747,LABYRINTH_WEB_UPLOAD_XMA_DATA_IS_NULL:3748,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_NOT_IN_DB:3749,LABYRINTH_WEB_UPLOAD_REPLIED_MESSAGE_IN_DB:3750,MQTT_STATE_DISCONNECTED_EVENT:10000001,MQTT_STATE_CONNECTED_EVENT:10000002,APP_STATEBACKGROUND:10000003,APP_STATEFOREGROUND:10000004,MQTT_STATE_CONNECTING_EVENT:10000005,GLOBAL_CONNECTIVITY_BANNER_DISPLAY:10000006,GLOBAL_CONNECTIVITY_BANNER_VANISH:10000007,SWITCH_ACCOUNT_EVENT:10000008,ADVANCED_CRYPTO_MEM_WA_CONNECTION_DISCONNECTED_EVENT:10001205,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTING_EVENT:10001206,ADVANCED_CRYPTO_MEM_WA_CONNECTION_CONNECTED_EVENT:10001207});f["default"]=a}),66);
__d("LSDataTraceTag",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7,j=20,k=21,l=22,m=23,n=24,o=25,p=26,q=27,r=28,s=29,t=30,u=31,v=32,w=33,x=34,y=35,z=36,A=37,B=38,C=39,D=40,E=41,F=42;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i;f.messageTypeNone=j;f.messageTypeText=k;f.messageTypeFutureproof=l;f.messageTypeCiphertext=m;f.messageTypeUnavailable=n;f.messageTypeImage=o;f.messageTypeVideo=p;f.messageTypePtt=q;f.messageTypeAdmin=r;f.messageTypeRevoked=s;f.messageTypeGif=t;f.messageTypeSticker=u;f.messageTypeExpiredEphemeral=v;f.messageTypeEphemeralSettingAdmin=w;f.messageTypeEphemeralSyncResponse=x;f.messageTypeEphemeralScreenshotAction=y;f.messageTypeDeleteForMe=z;f.messageTypeEphemeralSettingChangeFromCurrentDevice=A;f.messageTypeAlertICDC=B;f.messageTypeGroupInvite=C;f.messageTypeXMA=D;f.messageTypeReaction=E;f.messageTypeSenderKeyDistribution=F}),66);
__d("LSRequestId",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h="0123456789abcdef",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function a(){var a=c("uuidv4")().replace(/[^0-9a-f]/gi,""),b=0,d=["#"];while(b<33){var e=h.indexOf(a.charAt(b))<<8,f=h.indexOf(a.charAt(b+1))<<4,g=h.indexOf(a.charAt(b+2));g=g|(f|e);f=g>>6;d.push(i.charAt(f));d.push(i.charAt(g&63));b+=3}return d.join("")}b={generate:a};g["default"]=b}),98);
__d("WAAssertUnreachable",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("Impossible value, the default statement should never be reached for value: "+a)}g["default"]=a}),98);
__d("WAJids",["WAAssertUnreachable","err"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i="@me",j="@system",k="status@broadcast",aa="0@s.whatsapp.net",l="call",m="@g.us",n=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,ba="@call",o="@msgr",ca="msgr",p="@interop",da="interop",q=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,r=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,s=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,t=/^([1-9][0-9]{0,19})@msgr$/,u=/^([1-9][0-9]{0,19})(:0)?@msgr$/,ea="@s.whatsapp.net",fa="s.whatsapp.net",v="@s.whatsapp.net",w="s.whatsapp.net",x="lid",y="@newsletter",z=/^([1-9][0-9]{0,19})@newsletter$/,A=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,B=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,C="@lid",ga="lid",D=/^([1-9][0-9]{0,14})@lid$/,E=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,ha="@broadcast",F=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,G=/^([0-9a-fA-F]{18,32})@call$/,H="@hosted",I="hosted",J=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,K="@hosted.lid",ia="hosted.lid",L=/^([1-9][0-9]{0,14}):99@hosted.lid$/,M="@bot",ja=/^[1-9][0-9]{0,19}(:0)?@bot$/,ka="16505361212"+v,la=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function a(a){return""+a+v}function b(a){return""+a+C}function N(a){return""+a+o}function d(a){return a.endsWith(m)?a:""+a+m}function e(a){return a.endsWith(y)?a:""+a+y}function f(a){return a.endsWith(H)?a:""+a+H}function ma(a){return a.endsWith(K)?a:""+a+K}function na(){return m}function O(a){if(a.endsWith(v))return a.slice(0,-v.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(p))return a.slice(0,-p.length);else if(a.endsWith(C))return a.slice(0,-C.length);else if(a.endsWith(M))return a.slice(0,-M.length);else throw c("err")('userIdFromJid called with non-user jid "'+a+'"')}function oa(a,b){return Y(O(a)+":"+b+v)}function pa(a,b){return Z(O(a)+":"+b+o)}function qa(a,b){return Ab(P(a)+":"+b+C)}function ra(a,b){return X(O(a)+":"+b+W(a))}function sa(a){return""+a+ha}function ta(a){return a.split("@")[0]}function ua(a){return a.split("@")[0]}function va(a){a=a.split("@")[0];a=a.split(":");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function wa(a){a=va(a);return a.deviceID}function xa(a,b){if(a===i||a===j)return b;else return ta(a)}function ya(a){return a===i||a===j?null:a}function za(a){if(a===i||a===j)return null;return!a.endsWith(v)?null:a}function Aa(a){if(!a.endsWith(v))throw c("err")('phoneNumberFromJid called with non-user jid "'+a+'"');return a.slice(0,-v.length)}function Ba(a){if(a.endsWith(v))return Aa(a);else if(a.endsWith(C))return P(a);throw c("err")('lidOrPhoneFromUserJid called with non phone or lid jid "'+a+'"')}function Ca(a){return a.endsWith(v)||a.endsWith(p)||a.endsWith(o)||a.endsWith(C)?a:null}function Da(a){return a.endsWith(v)?a:null}function Ea(a){return a===k?null:$(a)}function Fa(a){return a===k?null:$(a)}function Ga(a){return a===k?k:null}function P(a){if(!a.endsWith(C))throw c("err")('lidFromLidUserJid called with non-LidUserJid "'+a+'"');return a.slice(0,-C.length)}function Q(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":")[0];b=b.split(".")[0];a===I&&(a=w);a===ia&&(a=x);return Bb(b+"@"+a)}function Ha(a){return Q(a)}function Ia(a){return Q(a)}function Ja(a){if(a.jidType==="phoneDevice")return a.deviceJid;else if(a.jidType==="interopDevice")return a.deviceJid;else if(a.jidType==="lidDevice")return a.deviceJid;else if(a.jidType==="msgrDevice")return a.deviceJid;else if(a.jidType==="lidUser")return a.userJid;else if(a.jidType==="interopUser")return a.userJid;else if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="phoneUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else if(a.jidType==="status")return a.statusJid;else if(a.jidType==="call")return a.callJid;else if(a.jidType==="newsletter")return a.newsletterJid;else if(a.jidType==="hosted")return a.hostedDeviceJid;else if(a.jidType==="hostedLid")return a.hostedLidDeviceJid;else if(a.jidType==="bot")return a.botJid;else{a.jidType;return a.broadcastJid}}function Ka(a){return Y(O(a)+":"+h+v)}function La(a){return Z(O(a)+":"+h+o)}function Ma(a){return qa(a,h)}function Na(a){return wa(a)===h}function Oa(a){return Fb(a)}function Pa(a){return a}function R(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":");var c=b[0];b=b[1];c=c.split(".");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Qa(a){a=R(a);var b=a.user,c=a.agent;c=c===void 0?"0":c;var d=a.device;d=d===void 0?"0":d;a=a.server;return b+"."+c+":"+d+"@"+a}function Ra(a){switch(a.jidType){case"interopUser":return a.userJid;case"lidUser":return a.userJid;case"msgrUser":return a.userJid;case"phoneUser":return a.userJid;case"group":return a.groupJid;case"status":return a.statusJid;case"interopDevice":return a.deviceJid;case"lidDevice":return a.deviceJid;case"msgrDevice":return a.deviceJid;case"phoneDevice":return a.deviceJid;case"broadcast":return a.broadcastJid;case"call":return a.callJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;case"bot":return a.botJid;default:return c("WAAssertUnreachable")(a.jidType)}}function Sa(a){if(a===l)return{jidType:"call",callJid:l};if(a===k)return{jidType:"status",statusJid:k};else if(B.test(a))return{jidType:"phoneUser",userJid:Cb(a)};else if(r.test(a))return{jidType:"interopUser",userJid:Db(a)};else if(t.test(a))return{jidType:"msgrUser",userJid:Eb(a)};else if(u.test(a)){var b=a.substr(0,a.indexOf(":"));return{jidType:"msgrUser",userJid:N(b)}}else if(A.test(a))return{jidType:"phoneDevice",deviceJid:Y(a)};else if(q.test(a))return{jidType:"interopDevice",deviceJid:zb(a)};else if(s.test(a))return{jidType:"msgrDevice",deviceJid:Z(a)};else if(n.test(a))return{jidType:"group",groupJid:a.endsWith(m)?a:""+a+m};else if(F.test(a))return{jidType:"broadcast",broadcastJid:a};else if(G.test(a))return{jidType:"call",callJid:a};else if(D.test(a))return{jidType:"lidUser",userJid:a};else if(E.test(a))return{jidType:"lidDevice",deviceJid:a};else if(z.test(a))return{jidType:"newsletter",newsletterJid:a};else if(J.test(a))return{jidType:"hosted",hostedDeviceJid:a};else if(L.test(a))return{jidType:"hostedLid",hostedLidDeviceJid:a};else if(ja.test(a))return{jidType:"bot",botJid:a};else return{jidType:"unknown"}}function Ta(a){return a==="status@broadcast"?a:null}function Ua(a){if(B.test(a)||r.test(a)||t.test(a)||D.test(a))return a;else if(u.test(a)){a=a.substr(0,a.indexOf(":"));return N(a)}else return null}function Va(a){if(D.test(a))return a;else return null}function Wa(a){return F.test(a)?a:null}function Xa(a){if(A.test(a)||s.test(a)||q.test(a)||E.test(a)||J.test(a)||L.test(a))return a;if(B.test(a))return vb(a);return ja.test(a)?wb(a):null}function Ya(a){return q.test(a)?a:null}function S(a){return n.test(a)?a:null}function Za(a){return Ta(a)||S(a)||Wa(a)?a:null}function $a(a){return G.test(a)?a:null}function ab(a){return a==="s.whatsapp.net"||a==="g.us"||a==="call"?a:null}function bb(a){return Ua(a)||S(a)}function cb(a){return z.test(a)?a:null}function db(a){return J.test(a)?a:null}function eb(a){return L.test(a)?a:null}function fb(a){return Ca(a)==null?$(a):null}function gb(a){a=R(a);var b=a.user,c=a.device;c=c===void 0?"0":c;a=a.server;return Y(b+":"+c+"@"+a)}function hb(a){if(a.endsWith(m))return a.slice(0,-m.length);else throw c("err")('groupId called with non-group jid "'+a+'"')}function ib(a){var b=Sa(a);if(b.jidType==="unknown")return a;if(b.jidType==="status")return b.statusJid;b.jidType;return Ra(b).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3")}function jb(a){return!a.includes("@")?a:a.replace(la,ib)}function T(a){if(a.endsWith(m))return $(a);else return null}function U(a,b){if(a.endsWith(v))return b.phoneUser(a);else if(a.endsWith(o))return b.msgrUser(a);else if(a.endsWith(p))return b.interopUser(a);else if(a.endsWith(C))return b.lidUser(a);else if(T(a)!=null)return b.group($(a));throw c("err")("Can not switch on chat jid "+a)}function kb(a,b){if(a.endsWith(o))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function V(a,b){if(a.endsWith(v))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function lb(a,b){return U(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function mb(a,b){return a===k?b.status():V(a,{user:b.user,group:b.group})}function nb(a,b){return a===k?b.status():U(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function ob(a,b){return a===k?b.multicast(k):V(a,{user:b.user,group:b.multicast})}function pb(a){return a.endsWith(C)}function qb(a){return a==="@me"}function rb(a){return a==="@system"}function sb(){return o}function tb(){return v}function ub(){return ea}function W(a){if(a.endsWith(v))return v;else if(a.endsWith(o))return o;else if(a.endsWith(C))return C;else if(a.endsWith(M))return M;else throw c("err")('userDomainFromJid called with non-user jid "'+a+'"')}function vb(a){return X(O(a)+":"+h+W(a))}function wb(a){return X(""+O(a)+W(a))}function xb(a){a=a.platform;var b=a==="msgr"?o:v;function c(a){return""+a+b}function d(){return b}return{toUserJid:c,getUserDomain:d}}function yb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function zb(a){return a}function Ab(a){return a}function Bb(a){return a}function Cb(a){return a}function Db(a){return a}function Eb(a){return a}function $(a){return a}function Fb(a){return a}function Gb(a){return a}function Hb(a){return a}function Ib(a){return a}function Jb(a){return U(a,{group:function(a){return hb(a)},lidUser:function(a){return O(a)},interopUser:function(a){return O(a)},phoneUser:function(a){return O(a)},msgrUser:function(a){return O(a)}})}function Kb(){return ba}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.CALL_LINK_JID=l;g.MSGR_USER_DOMAIN=o;g.MSGR_USER_JID_SUFFIX=ca;g.INTEROP_DOMAIN=p;g.INTEROP_USER_JID_SUFFIX=da;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=v;g.WA_USER_JID_SUFFIX=w;g.WA_LID_SUFFIX=x;g.WA_NEWSLETTER_JID_DOMAIN=y;g.LID_DOMAIN=C;g.LID_SUFFIX=ga;g.HOSTED_DOMAIN=H;g.HOSTED_SUFFIX=I;g.HOSTED_LID_DOMAIN=K;g.HOSTED_LID_SUFFIX=ia;g.BOT_DOMAIN=M;g.SURVEY_USER_JID=ka;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=N;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=ma;g.getGroupDomain=na;g.userIdFromJid=O;g.toPhoneDeviceJid=oa;g.toMsgrDeviceJid=pa;g.toLidDeviceJid=qa;g.toDeviceJid=ra;g.toBroadcastJid=sa;g.extractUserId=ta;g.extractChatId__DANGEROUS=ua;g.extractDeviceIDParts=va;g.extractDeviceId=wa;g.authorToUserId=xa;g.authorAsUserJid=ya;g.authorAsPhoneUserJid=za;g.phoneNumberFromJid=Aa;g.lidOrPhoneFromUserJid=Ba;g.interpretAsUserJid=Ca;g.interpretAsPhoneUserJid=Da;g.asChatJid=Ea;g.asPhoneChatJid=Fa;g.asStatusJid=Ga;g.lidFromLidUserJid=P;g.extractUserJid=Q;g.extractPhoneUserJid=Ha;g.extractLidUserJid=Ia;g.extractJidFromJidWithType=Ja;g.defaultPhoneDeviceJidForUser=Ka;g.defaultMsgrDeviceJidForUser=La;g.defaultLidDeviceJidForLidUserJid=Ma;g.isPrimaryDevice=Na;g.interpretAsDeviceId=Oa;g.interpretAsNumber=Pa;g.parseJidParts=R;g.fullFormDeviceJidString=Qa;g.extractFromJid=Ra;g.interpretAndValidateJid=Sa;g.validateStatusJid=Ta;g.validateUserJid=Ua;g.validateLidUserJid=Va;g.validateBroadcastJid=Wa;g.validateDeviceJid=Xa;g.validateInteropDeviceJid=Ya;g.validateGroupJid=S;g.validateMulticastJid=Za;g.validateCallJid=$a;g.validateDomainJid=ab;g.validateChatJid=bb;g.validateNewsletterJid=cb;g.validateHostedDeviceJid=db;g.validateHostedLidDeviceJid=eb;g.asMulticastJid=fb;g.stripAgentIdFromPhoneDeviceJid=gb;g.groupIdFromJid=hb;g.sanitizeJidForLogging=ib;g.maybeSanitizeLogLineText=jb;g.interpretAsGroupJid=T;g.switchOnChatJidType=U;g.switchOnMsgrChatJidType=kb;g.switchOnPhoneChatJidType=V;g.switchOnUserChatJidType=lb;g.switchOnPhoneJidType=mb;g.switchOnJidType=nb;g.switchOnMulticastJidType=ob;g.isLidUser=pb;g.isAuthorMe=qb;g.isAuthorSystem=rb;g.getMsgrUserDomain=sb;g.getWhatsappUserDomain=tb;g.getServerDomain=ub;g.defaultDeviceJidForUser=vb;g.defaultDeviceJidForBot=wb;g.createJidUtils=xb;g.unsafeCoerceToChatJid=yb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=zb;g.unsafeCoerceToLidDeviceJid=Ab;g.unsafeCoerceToUserJid=Bb;g.unsafeCoerceToPhoneUserJid=Cb;g.unsafeCoerceToInteropUserJid=Db;g.unsafeCoerceToMsgrUserJid=Eb;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Fb;g.unsafeCoerceToNewsletterJid=Gb;g.unsafeCoerceToHostedDeviceJid=Hb;g.unsafeCoerceToHostedLidDeviceJid=Ib;g.threadIdForChatJid=Jb;g.getGroupCallDomain=Kb}),98);
__d("MAWBridgeTrace",["WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e,f,g,h,i){var j=a.ack,k=a.externalId,l=a.ts;a=a.type;var m=d("WAJids").switchOnMsgrChatJidType(b,{group:function(a){return"Group"},user:function(a){return"User"}});return{ack:j,externalId:k,isFirstMsg:!!f,openMessageOtid:e,openMessageParticipantCount:g,participantCount:h,threadJid:b,threadKey:i,threadType:m,traceType:c,ts:l,type_:a}}function b(a,b,c){return{traceContext:c,traceId:b,traceType:a}}function c(a,b,c,d){return{errorMessage:d,event:b,externalIds:a,traceType:c}}function e(a,b,c,d,e,f){return{checkPointId:a,dataTraceId:b,errorMessage:c,shouldFlush:d,syncChannel:e,tags:f}}g.createBridgeStartTraceData=a;g.createBridgeStartTraceWithTraceIdData=b;g.createBridgeUpdateTraceData=c;g.createBridgeTraceRecordCheckpointData=e}),98);
__d("WAMsgType",[],(function(a,b,c,d,e,f){"use strict";a="Text";b="Futureproof";c="Ciphertext";d="Unavailable";e="Image";var g="Video",h="Ptt",i="Admin",j="Revoked",k="Gif",l="Sticker",m="DocumentFile",n="ExpiredEphemeral",o="EphemeralSettingAdmin",p="EphemeralSyncResponse",q="DeleteForMe",r="EphemeralSettingChangeFromCurrentDevice",s="AlertICDC",t="GroupInvite",u="NoteReply",v="Reaction",w="SenderKeyDistribution",x="EditAction",y="ReceiverFetch",z="Raven",A="GroupPollCreate",B="GroupPollUpdate",C={ADMIN:i,CIPHERTEXT:c,DELETE_FOR_ME:q,DOCUMENT_FILE:m,EDIT_ACTION:x,EPHEMERAL_SETTING_ADMIN:o,EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:r,EPHEMERAL_SYNC_RESPONSE:p,EXPIRED_EPHEMERAL:n,FUTUREPROOF:b,GIF:k,GROUP_INVITE:t,ICDC_ALERT:s,IMAGE:e,PTT:h,REACTION:v,REVOKED:j,SK_DISTRIBUTION:w,STICKER:l,TEXT:a,UNAVAILABLE:d,VIDEO:g,RECEIVER_FETCH:y,RAVEN:z,GROUP_POLL_CREATE:A,GROUP_POLL_UPDATE:B};f.TEXT=a;f.FUTUREPROOF=b;f.CIPHERTEXT=c;f.UNAVAILABLE=d;f.IMAGE=e;f.VIDEO=g;f.PTT=h;f.ADMIN=i;f.REVOKED=j;f.GIF=k;f.STICKER=l;f.DOCUMENT_FILE=m;f.EXPIRED_EPHEMERAL=n;f.EPHEMERAL_SETTING_ADMIN=o;f.EPHEMERAL_SYNC_RESPONSE=p;f.DELETE_FOR_ME=q;f.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE=r;f.ICDC_ALERT=s;f.GROUP_INVITE=t;f.NOTE_REPLY=u;f.REACTION=v;f.SK_DISTRIBUTION=w;f.EDIT_ACTION=x;f.RECEIVER_FETCH=y;f.RAVEN=z;f.GROUP_POLL_CREATE=A;f.GROUP_POLL_UPDATE=B;f.MSG_TYPE=C}),66);
__d("MAWMsgType",["WAMsgType"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return k.has(a)};var h=function(a){return l.has(a)||k.has(a)};b=function(a){return h(a)||m.has(a)};c="EphemeralScreenshotAction";e="Raven";f="RavenAction";var i="XMA",j="BumpExistingMessage";d=babelHelpers["extends"]({},d("WAMsgType").MSG_TYPE,{BUMP_EXISTING_MESSAGE:j,EPHEMERAL_SCREENSHOT_ACTION:c,RAVEN:e,RAVEN_ACTION:f,XMA:i});var k=new Set([d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.XMA,d.RAVEN,d.DOCUMENT_FILE,d.RECEIVER_FETCH]),l=new Set([d.TEXT,d.REVOKED,d.XMA,d.BUMP_EXISTING_MESSAGE,d.GROUP_POLL_CREATE]),m=new Set([d.FUTUREPROOF]),n=new Set([d.TEXT,d.IMAGE,d.VIDEO,d.PTT,d.GIF,d.STICKER,d.DOCUMENT_FILE,d.UNAVAILABLE,d.EXPIRED_EPHEMERAL,d.REVOKED,d.XMA,d.RAVEN,d.RECEIVER_FETCH]);j=function(a){return n.has(a)};g.isMAWSupportedMediaType=a;g.isEBSupportedMsgType=h;g.isProtobufUploadSupportedMsgType=b;g.EPHEMERAL_SCREENSHOT_ACTION=c;g.MSG_TYPE=d;g.mawSupportedMediaTypes=k;g.isQuotedMsgType=j}),98);
__d("MAWTraceUtils",["LSDataTraceCheckPoint","LSDataTraceTag","LSIntEnum","LSRequestId","MAWBridge","MAWBridgeTrace","MAWMsgType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="backup_upload",j="media_backup",k="vesta_registration",l="vesta_login";function m(){return c("LSRequestId").generate()}function a(a){return a}function b(a,b,c){c=c!=null?c:m();d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTraceWithTraceId",value:d("MAWBridgeTrace").createBridgeStartTraceWithTraceIdData(a,c,b)}]},!0);return c}function n(a,b,c,e,f){if(a!=null){c=c.length>0?c.map(function(a){return a.toString()}).join(","):void 0;d("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"TraceRecordCheckpoint",value:d("MAWBridgeTrace").createBridgeTraceRecordCheckpointData(b,a,f,e,-1,c)}]},!0)}}function e(a,b,e,f){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_FOR_FAILURE),e,!0,f)}function f(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function o(a,b,e){n(a,b,e,!1),n(a,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").FLOW_END_AND_FLUSH),e,!0)}function p(a){switch(a){case d("MAWMsgType").MSG_TYPE.TEXT:return d("LSDataTraceTag").messageTypeText;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:return d("LSDataTraceTag").messageTypeFutureproof;case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:return d("LSDataTraceTag").messageTypeCiphertext;case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:return d("LSDataTraceTag").messageTypeUnavailable;case d("MAWMsgType").MSG_TYPE.IMAGE:return d("LSDataTraceTag").messageTypeImage;case d("MAWMsgType").MSG_TYPE.VIDEO:return d("LSDataTraceTag").messageTypeVideo;case d("MAWMsgType").MSG_TYPE.PTT:return d("LSDataTraceTag").messageTypePtt;case d("MAWMsgType").MSG_TYPE.ADMIN:return d("LSDataTraceTag").messageTypeAdmin;case d("MAWMsgType").MSG_TYPE.REVOKED:return d("LSDataTraceTag").messageTypeRevoked;case d("MAWMsgType").MSG_TYPE.GIF:return d("LSDataTraceTag").messageTypeGif;case d("MAWMsgType").MSG_TYPE.STICKER:return d("LSDataTraceTag").messageTypeSticker;case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return d("LSDataTraceTag").messageTypeExpiredEphemeral;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return d("LSDataTraceTag").messageTypeEphemeralSettingAdmin;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return d("LSDataTraceTag").messageTypeEphemeralSyncResponse;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return d("LSDataTraceTag").messageTypeEphemeralScreenshotAction;case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return d("LSDataTraceTag").messageTypeDeleteForMe;case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:return d("LSDataTraceTag").messageTypeEphemeralSettingChangeFromCurrentDevice;case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:return d("LSDataTraceTag").messageTypeAlertICDC;case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:return d("LSDataTraceTag").messageTypeGroupInvite;case d("MAWMsgType").MSG_TYPE.XMA:return d("LSDataTraceTag").messageTypeXMA;case d("MAWMsgType").MSG_TYPE.REACTION:return d("LSDataTraceTag").messageTypeReaction;case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return d("LSDataTraceTag").messageTypeSenderKeyDistribution;default:return d("LSDataTraceTag").messageTypeNone}}g.CONTEXT_BACKUP_UPLOAD=i;g.CONTEXT_MEDIA_BACKUP=j;g.CONTEXT_VESTA_REGISTRATION=k;g.CONTEXT_VESTA_LOGIN=l;g.createTraceId=m;g.stringToTraceId=a;g.startNewTrace=b;g.recordCheckpointForTrace=n;g.recordFailureAndFlushForTraceId=e;g.recordSuccessAndFlushForTraceId=f;g.recordInvalidUploadRequestAndFlushTrace=o;g.getTagForMsgType=p}),98);
__d("MAWEncryptedBackupUtils",["FBLogger","I64","LSAuthorityLevel","LSDataTraceCheckPoint","LSDict","LSIntEnum","LSShape","LSVec","MAWTraceUtils","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,e,f){d("MAWTraceUtils").recordCheckpointForTrace(a,b,c,e,f)}function a(a,b,e){j(b,(h||(h=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").LABYRINTH_WEB_GET_BACKUP_TENANCY),[],!1);return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.secure_encrypted_backups_client_state)).then(function(a){return k(a,e)})}function k(a,b){var e;if(a==null){b!=null&&b.addPoint("get_backup_tenancy_null_client_state_row");return}e=(e=a.backupTenancy)!=null?e:(i||(i=d("I64"))).one;a=a.authorityLevel;b!=null&&b.addPoint("get_backup_tenancy",{"int":{authorityLevel:(i||(i=d("I64"))).to_int32(a!=null?a:(i||(i=d("I64"))).zero),backupTenancy:i.to_int32(e!=null?e:(i||(i=d("I64"))).zero)}});if(e!=null&&(i||(i=d("I64"))).equal((h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),a))return e}function b(a,b){var d=new Set(),e=a.length;for(a of a.entries()){var f=a[0],g=a[1];d.has(g)&&c("FBLogger")("labyrinth_web").warn("Duplicate messages returned from server for restoreType: %s, index: %s of batchSize: %s",b,f,e);d.add(g)}}function e(a){a=a.map(function(a){var b=a.toplevelProtobuf;b=d("LSShape").ofRecord({decrypted_protobuf:b.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(b.protobufTimestampMS)});var e=new(c("LSDict"))();a.supplementalProtobufs.forEach(function(a,b){e.set(b,d("LSShape").ofRecord({decrypted_protobuf:a.decryptedProtobuf,protobuf_timestamp_ms:(i||(i=d("I64"))).of_float(a.protobufTimestampMS)}))});return d("LSShape").ofRecord({otid:a.otid,supplemental_protobufs:e,toplevel_protobuf:b})});return c("LSVec").ofArray(a)}function f(a){a=c("LSVec").toArray(a);a=a.map(function(a){return d("LSShape").toRecord(a)});return a.map(function(a){var b=d("LSShape").toRecord(a.toplevel_protobuf);b={decryptedProtobuf:b.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(b.protobuf_timestamp_ms)};var c=new Map(),e=a.supplemental_protobufs;e.forEach(function(a,b){a=d("LSShape").toRecord(a);c.set(b,{decryptedProtobuf:a.decrypted_protobuf,protobufTimestampMS:(i||(i=d("I64"))).to_float(a.protobuf_timestamp_ms)})});return{otid:a.otid,supplementalProtobufs:c,toplevelProtobuf:b}})}g.getBackupTenancy=a;g.getBackupTenancyFromClientStateRow=k;g.logIfDuplicateMessagesFoundInRestore=b;g.convertJSTypesToLSTypesForRestoreJob=e;g.convertLSTypesToJSTypesForRestoreJob=f}),98);
__d("EBIsEbEnabled",["EBDeps","EBReadyNotifier","FBLogger","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBSwitch","MAWEncryptedBackupUtils","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,e){return d("EBReadyNotifier").waitForEBReady().then(function(){return d("MAWEncryptedBackupUtils").getBackupTenancy(a,b,e)}).then(function(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}function a(){try{return d("WAResultOrError").makeResult(c("MAWEBSwitch").isEnabled())}catch(a){c("FBLogger")("labyrinth_web").catching(a).mustfix("Failed to check EB enabled");return d("WAResultOrError").makeResult(!1)}}function e(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("EBDeps").getDeps().getLSDB());return j(a.tables)});return k.apply(this,arguments)}g.isEbEnabledLS=j;g.isEbEnabledEbSwitch=a;g.isEBEnabled=e}),98);
__d("EBIsEbEnabledSubscriber",["EBDeps","EBIsEbEnabled","I64","LSEncryptedBackupsBackupTenancy","LSIntEnum","Promise","ReQL","WAPubSub","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=function(){function a(a){this.$1=d("WAPubSub").simplePubSub(),this.$4=a,this.$2=!1}var e=a.prototype;e.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$2=(yield d("EBIsEbEnabled").isEbEnabledLS(this.$4.tables)),this.$5(this.$4)});function c(){return a.apply(this,arguments)}return c}();e.$6=function(a){this.$2=a,this.$1.publish(a)};e.$5=function(a){var b=this;this.$3==null&&(this.$3=d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).take(1).subscribe(function(a,e){e.operation==="delete"&&b.$6(!1),(e.operation==="add"||e.operation==="put")&&(e.value.backupTenancy!=null&&(i||(i=d("I64"))).equal(e.value.backupTenancy,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))?b.$6(!0):b.$6(!1))}));return this.$3};e.subscribe=function(a){return this.$1.subscribe(a)};e.isEnabled=function(){return this.$2};return a}(),l;function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(l!=null)return(h||(h=b("Promise"))).resolve();l=new k(a);yield l.initialize()});return n.apply(this,arguments)}function a(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(l==null){var a=(yield d("EBDeps").getDeps().getLSDB());yield m(a)}return l});return o.apply(this,arguments)}function e(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(l==null){var b=(yield d("EBDeps").getDeps().getLSDB());yield m(b)}a(l.isEnabled());b=l.subscribe(a);return b});return p.apply(this,arguments)}function f(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(l==null){var a=(yield d("EBDeps").getDeps().getLSDB());yield m(a)}return l.isEnabled()});return q.apply(this,arguments)}g.initIsEbEnabledPubSub=m;g.isEbEnabledSubscriber=a;g.subscribeToEbChanges=e;g.isEBEnabledValueFromSubscriber=f}),98);
__d("EBMarkerIdToQPLEvent",["I64","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case 1021646192:return c("qpl")._(1021646192,"3099");case 1021656232:return c("qpl")._(1021656232,"3100");case 1021647318:return c("qpl")._(1021647318,"3101");case 1021651622:return c("qpl")._(1021651622,"3102");case 1021655799:return c("qpl")._(1021655799,"3103");case 1021648929:return c("qpl")._(1021648929,"3104");case 1021647593:return c("qpl")._(1021647593,"3105");case 1021653744:return c("qpl")._(1021653744,"3106");case 1021655355:return c("qpl")._(1021655355,"3107");case 1021648240:return c("qpl")._(1021648240,"3108");case 1021651939:return c("qpl")._(1021651939,"3109");case 1021656851:return c("qpl")._(1021656851,"3110");case 1021652813:return c("qpl")._(1021652813,"3111");case 1021653501:return c("qpl")._(1021653501,"3112");case 1021655710:return c("qpl")._(1021655710,"3114");case 1021655643:return c("qpl")._(1021655643,"3115");case 1021646076:return c("qpl")._(1021646076,"3116");case 1021642512:return c("qpl")._(1021642512,"3117");case 1021654781:return c("qpl")._(1021654781,"3118");case 1021649468:return c("qpl")._(1021649468,"3120");case 1021652080:return c("qpl")._(1021652080,"3121");case 1021652512:return c("qpl")._(1021652512,"3122");case 1021655828:return c("qpl")._(1021655828,"3124");case 1021642298:return c("qpl")._(1021642298,"3126");case 1021652377:return c("qpl")._(1021652377,"3127");case 521471316:return c("qpl")._(521471316,"2831");case 521478596:return c("qpl")._(521478596,"1329");case 521479468:return c("qpl")._(521479468,"3128");case 521473151:return c("qpl")._(521473151,"2593");case 521482563:return c("qpl")._(521482563,"3129");case 521482912:return c("qpl")._(521482912,"3131");case 521481876:return c("qpl")._(521481876,"1407");case 521471732:return c("qpl")._(521471732,"1454");case 521477507:return c("qpl")._(521477507,"1406");case 521478817:return c("qpl")._(521478817,"2806");case 521476801:return c("qpl")._(521476801,"3132");case 521484724:return c("qpl")._(521484724,"141");case 521473756:return c("qpl")._(521473756,"2768");case 521477113:return c("qpl")._(521477113,"2698");case 521478750:return c("qpl")._(521478750,"2850");case 521479165:return c("qpl")._(521479165,"3055");case 521484370:return c("qpl")._(521484370,"2995");case 521473213:return c("qpl")._(521473213,"27");case 521482281:return c("qpl")._(521482281,"2703");case 521476771:return c("qpl")._(521476771,"2454");case 521474469:return c("qpl")._(521474469,"2612");case 521471755:return c("qpl")._(521471755,"2586");case 521476367:return c("qpl")._(521476367,"2704");case 521473850:return c("qpl")._(521473850,"2910");case 521482558:return c("qpl")._(521482558,"2558");case 521482880:return c("qpl")._(521482880,"16");case 521473150:return c("qpl")._(521473150,"2143");case 521473369:return c("qpl")._(521473369,"2834");case 521485893:return c("qpl")._(521485893,"2835");case 521473922:return c("qpl")._(521473922,"2832");case 521479146:return c("qpl")._(521479146,"3133");case 521471468:return c("qpl")._(521471468,"2968");case 521480391:return c("qpl")._(521480391,"1167");case 521480745:return c("qpl")._(521480745,"3134");case 521481602:return c("qpl")._(521481602,"829");case 521475102:return c("qpl")._(521475102,"3135");case 521484676:return c("qpl")._(521484676,"2684");case 521485625:return c("qpl")._(521485625,"1876");case 521482085:return c("qpl")._(521482085,"409");case 521471024:return c("qpl")._(521471024,"2275");case 521474385:return c("qpl")._(521474385,"263");case 521479842:return c("qpl")._(521479842,"2163");case 521485383:return c("qpl")._(521485383,"2200");case 521478580:return c("qpl")._(521478580,"3136");case 521485815:return c("qpl")._(521485815,"3137");case 521482969:return c("qpl")._(521482969,"1519");case 521485406:return c("qpl")._(521485406,"272");case 521479972:return c("qpl")._(521479972,"3138");case 521474688:return c("qpl")._(521474688,"2714");case 521484777:return c("qpl")._(521484777,"2715");case 521483076:return c("qpl")._(521483076,"3140");case 521482858:return c("qpl")._(521482858,"1290");case 521472542:return c("qpl")._(521472542,"295");case 521472456:return c("qpl")._(521472456,"1646");case 521476140:return c("qpl")._(521476140,"378");case 521473194:return c("qpl")._(521473194,"1331");case 521482763:return c("qpl")._(521482763,"296");case 521484295:return c("qpl")._(521484295,"1460");case 521476165:return c("qpl")._(521476165,"2432");case 521477947:return c("qpl")._(521477947,"2395");case 521486220:return c("qpl")._(521486220,"827");case 521482576:return c("qpl")._(521482576,"1069");case 521479124:return c("qpl")._(521479124,"1939");case 521476098:return c("qpl")._(521476098,"504");case 521472095:return c("qpl")._(521472095,"2859")}return null}g.markerIdToQPLEvent=a}),98);
__d("EBMessageRangeQueryUtils",["WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.pow(2,48)-1;function a(a){var b=Number(a);return isNaN(b)?a:i(b).toString()}function i(a){if(a<0)return 0;if(a<=h)return a;a=d("WATimeUtils").millisTime()+6e4;return a}g.safeTimestampMsString=a;g.safeTimestampMsNumber=i}),98);
__d("MAWWormOdsLogger",["WABridge","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";a={log:function(a){return d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{entity:d("WAOdsEnums").Entity.WORM,key:a})}};g.wormOdsWorkerLogger=a}),98);
__d("EBMinosDBDev",["MAWWormOdsLogger","Promise","QPLFlow","WALogger","WAResolvable","Worm","WormEAR","WormIDbDriver","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error performing makeEBMinosDevDB: ",""]);i=function(){return a};return a}var j={secure_minos_mailbox_keys:{indexes:{},primaryKey:"contact_id",secure:!0},secure_minos_thread_message_encryption_keys:{indexes:{"[roster_hash+minos_thread_id]":{fields:["roster_hash","minos_thread_id"],unique:!1}},primaryKey:"mek_id_blob",secure:!0}},k=new(d("WAResolvable").Resolvable)(),l=1e4;function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=d("QPLFlow").startQPLFlow(b,{annotations:{string:{operationType:"initEBMinosDevDbSchema"}},timeoutInMs:l});try{var f="ebMinosDev";c=new(d("WormEAR").WormEAR)(j,f,c);a=new(d("Worm").WormDatabase)(new(d("WormIDbDriver").WormIDbDriver)(a,f,j,c,d("MAWWormOdsLogger").wormOdsWorkerLogger,{}),b);yield a.init({eventFlow:e});e.endSuccess();k.resolve(a)}catch(a){k.reject(a);e.endFail("error");d("WALogger").ERROR(i(),a);throw a}});return m.apply(this,arguments)}function n(){return k.promise}function c(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Object.keys(j),c=(yield n());return c.runInTransaction(a,"readonly",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var d={};yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c.stores[a].readAll());d[a]=b});return function(b){return a.apply(this,arguments)}}()));return d});return function(a){return c.apply(this,arguments)}}(),"EBMinosDevDb - Dump")["catch"](function(){return{}})});return o.apply(this,arguments)}g.ebdbDescriptor=j;g.makeEBMinosDevDB=a;g.getEBMinosDevDb=n;g.getDbDump=c}),98);
__d("EBMinosLoadMailboxKeys",["EBMinosDBDev","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("EBMinosDBDev").getEBMinosDevDb());b=(yield b.runInTransaction(["secure_minos_mailbox_keys"],"readonly",function(b){return b.stores.secure_minos_mailbox_keys.get(a)},"LoadMailboxKeys"));return b});return function(b){return a.apply(this,arguments)}}();g.loadMailboxKeys=a}),98);
__d("EBMinosLogger",["WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";a=d("WATagsLogger").TAGS(["minos"]);g.minosLogger=a}),98);
__d("EBMinosTypes",["$InternalEnum","WAJids"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a}function c(a){return a.endsWith(d("WAJids").MSGR_USER_DOMAIN)?a.slice(0,-d("WAJids").MSGR_USER_DOMAIN.length):null}var h=d("WAJids").createJidUtils({platform:"msgr"});function e(a){return h.toUserJid(a)}function f(a){return a}function i(a){return a}function j(a){return a}function k(a){return a}function l(a){return a}function m(a){return a}function n(a){return a}function o(a){return a}function p(a){return a}function q(a){return a}function r(a){return a}function s(a){return a}function t(a){return a}function u(a){return a}function v(a){return a}function w(a){return a}function x(a){return a}function y(a){return a}function z(a){return a}function A(a){return a}function B(a){return a}function C(a){return a}function D(a){return a}function E(a){return a}function F(a){return a}function G(a){return a}function H(a){return a}function I(a){return a}function J(a){return a}function K(a){return a}b=b("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});g.unsafeCastToUserFbId=a;g.userJidToUserFbId=c;g.userFbidToUserJid=e;g.unsafeCastToMinosThreadId=f;g.unsafeCastToEpochHead=i;g.unsafeCastToEpochSignature=j;g.unsafeCastToEpochNumber=k;g.unsafeCastToEpochCreationTime=l;g.unsafeCastToExportRootKey=m;g.unsafeCastToMekId=n;g.unsafeCastMekKey=o;g.unsafeCastMekRosterHash=p;g.unsafeCastToEncryptedMek=q;g.unsafeCastToMekFbId=r;g.unsafeCastToMekMiThreadId=s;g.unsafeCastToEncryptedMessage=t;g.unsafeCastToEncryptedMessageSignature=u;g.unsafeCastToDecryptedMessage=v;g.unsafeCastToMailboxFbId=w;g.unsafeCastToMailboxSigningPK=x;g.unsafeCastToMailboxSigningSK=y;g.unsafeCastToMailboxEncryptionPK=z;g.unsafeCastToMailboxEncryptionSK=A;g.unsafeCastToMailboxAuthPK=B;g.unsafeCastToMailboxAuthSK=C;g.unsafeCastToTransportSenderEphemeralPK=D;g.unsafeCastToTransportSenderEphemeralKeySig=E;g.unsafeCastToTransportSigningPK=F;g.unsafeCastToTransportSigningSK=G;g.unsafeCastToEpochFbId=H;g.castToSupplementalOpToken=I;g.unsafeCastToAttachmentAccessTokenSecret=J;g.unsafeCastToAttachmentPrimaryKeySecret=K;g.MinosAttachmentMediaType=b}),98);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){"use strict";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17,MAP:18};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("EBMinosWasm.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={},y={},z={},A={},B={},C={},D={},E={},F={},G={},H={},I={},J={},K={},L={},M={},N={},O={},P={},Q={},R={},S={},T={},U={},V={},W={},X={},Y={},Z={};a.name="MinosMessageMetadata";a.internalSpec={mekId:[1,(d=d("WAProtoConst")).FLAGS.REQUIRED|d.TYPES.BYTES],timestamp:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64],messageId:[3,d.FLAGS.REQUIRED|d.TYPES.STRING],threadId:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};b.name="MinosEncryptAndSignMessageInput";b.internalSpec={transportSigningSk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mek:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],plaintext:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],metadata:[4,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,a]};c.name="MinosEncryptAndSignMessageResult";c.internalSpec={ciphertext:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],signature:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};e.name="MinosDecryptAndVerifyMessageInput";e.internalSpec={transportSigningPk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mek:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],encryptedMessageCiphertext:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],encryptedMessageSignature:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],metadata:[5,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,a]};f.name="MinosDecryptAndVerifyMessageResult";f.internalSpec={plaintext:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};h.name="MekBundle";h.internalSpec={key:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mekId:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],rosterHash:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES]};i.name="GenerateMekInput";i.internalSpec={epochHeads:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};j.name="GenerateMekResult";j.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,h]};k.name="GenerateMekRosterHashInput";k.internalSpec={epochHeads:[1,d.FLAGS.REPEATED|d.TYPES.BYTES]};l.name="GenerateMekRosterHashResult";l.internalSpec={rosterHash:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};m.name="EncryptMekForDistributionInput";m.internalSpec={senderEpochHead:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],toMailboxPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],fromKeypair:[3,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,n],mek:[4,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,h]};n.name="EncryptMekForDistributionInput$MailboxAuthKP";n.internalSpec={sk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],pk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};o.name="EncryptMekForDistributionResult";o.internalSpec={ciphertext:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};p.name="DecryptMekForDistributionInput";p.internalSpec={toMailboxSk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],fromPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],mekId:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],senderEpochHead:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],rosterHash:[5,d.FLAGS.REQUIRED|d.TYPES.BYTES],ciphertext:[6,d.FLAGS.REQUIRED|d.TYPES.BYTES]};q.name="DecryptMekForDistributionResult";q.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};r.name="EncryptMeksForDistributionFromTransportSenderInput";r.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,h],transportSigningKp:[2,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,s],recipientMailboxEncryptionPks:[3,d.FLAGS.REPEATED|d.TYPES.BYTES],recipientEpochHeads:[4,d.FLAGS.REPEATED|d.TYPES.BYTES]};s.name="EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKP";s.internalSpec={sk:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],pk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};t.name="EncryptMeksForDistributionFromTransportSenderResult";t.internalSpec={encryptedMeks:[1,d.FLAGS.REPEATED|d.TYPES.BYTES],ephemeralEncryptionPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],signingPk:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],signature:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};u.name="DecryptMekForDistributionFromTransportSenderInput";u.internalSpec={mekDistribution:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,v],mekId:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],rosterHash:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],recipientEncSk:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};v.name="DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipient";v.internalSpec={encryptedMek:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],ephemeralEncryptionPk:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES],signingPk:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],signature:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES]};w.name="DecryptMekForDistributionFromTransportSenderResult";w.internalSpec={mek:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};x.name="WrapTransportSigningPublicKeyInput";x.internalSpec={keyBytes:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};y.name="WrapTransportSigningPublicKeyResult";y.internalSpec={prefixedKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};z.name="WrapTransportSigningSecretKeyInput";z.internalSpec={keyBytes:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};A.name="WrapTransportSigningSecretKeyResult";A.internalSpec={prefixedKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};B.name="DeriveMailboxSigningKeypairInput";B.internalSpec={exportRootKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64]};C.name="DeriveMailboxSigningKeypairResult";C.internalSpec={mailboxSigningPublicKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxSigningPrivateKey:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};D.name="DeriveMailboxEncryptionKeypairInput";D.internalSpec={exportRootKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64]};E.name="DeriveMailboxEncryptionKeypairResult";E.internalSpec={mailboxEncryptionPublicKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxEncryptionPrivateKey:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};F.name="DeriveMailboxAuthKeypairInput";F.internalSpec={exportRootKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64]};G.name="DeriveMailboxAuthKeypairResult";G.internalSpec={mailboxAuthPublicKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxAuthPrivateKey:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};H.name="DeriveAttachmentAccessTokenSecretInput";H.internalSpec={mediaKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};I.name="DeriveAttachmentAccessTokenSecretResult";I.internalSpec={attachmentAccessTokenSecret:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};J.name="DeriveAttachmentPrimaryKeySecretInput";J.internalSpec={mediaKey:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};K.name="DeriveAttachmentPrimaryKeySecretResult";K.internalSpec={attachmentPrimaryKeySecret:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};L.name="EpochPublicData";L.internalSpec={epochNumber:[1,d.FLAGS.REQUIRED|d.TYPES.UINT64],userFbid:[2,d.FLAGS.REQUIRED|d.TYPES.STRING],mailboxSigningPk:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxEncryptionPk:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],mailboxAuthPk:[5,d.FLAGS.REQUIRED|d.TYPES.BYTES],previousEpochHead:[6,d.TYPES.BYTES]};M.name="EpochSignatures";M.internalSpec={selfSignature:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES],prevSignature:[2,d.TYPES.BYTES]};N.name="MinosSignedEpoch";N.internalSpec={epochPublicData:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],signatures:[2,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,M],epochHead:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES]};O.name="MinosOpenInitialEpochInput";O.internalSpec={userFbid:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64],exportRootKey:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES]};P.name="MinosOpenInitialEpochResult";P.internalSpec={minosSignedEpoch:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,N]};Q.name="MinosOpenEpochInput";Q.internalSpec={userFbid:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],epochNumber:[2,d.FLAGS.REQUIRED|d.TYPES.UINT64],exportRootKey:[3,d.FLAGS.REQUIRED|d.TYPES.BYTES],previousExportRootKey:[4,d.FLAGS.REQUIRED|d.TYPES.BYTES],previousEpochNumber:[5,d.FLAGS.REQUIRED|d.TYPES.UINT64],previousEpochHead:[6,d.FLAGS.REQUIRED|d.TYPES.BYTES]};R.name="MinosOpenEpochResult";R.internalSpec={minosSignedEpoch:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,N]};S.name="MinosValidateEpochInput";S.internalSpec={epochPublicData:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],previousEpochPublicData:[2,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],signatures:[3,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,M]};T.name="MinosValidateEpochResult";T.internalSpec={valid:[1,d.TYPES.BOOL],errorMessage:[2,d.TYPES.STRING],__oneofs__:{result:["valid","errorMessage"]}};U.name="MinosVerifySingleEpochInput";U.internalSpec={epochPublicData:[1,d.FLAGS.REQUIRED|d.TYPES.MESSAGE,L],signature:[2,d.FLAGS.REQUIRED|d.TYPES.BYTES]};V.name="MinosVerifySingleEpochResult";V.internalSpec={valid:[1,d.FLAGS.REQUIRED|d.TYPES.BOOL]};W.name="MinosThreadIdFromOneToOneThreadInput";W.internalSpec={actThreadId:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],selfFbid:[2,d.FLAGS.REQUIRED|d.TYPES.STRING]};X.name="MinosThreadIdFromOneToOneThreadResult";X.internalSpec={threadId:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};Y.name="MinosThreadIdFromActThreadIdInput";Y.internalSpec={actThreadId:[1,d.FLAGS.REQUIRED|d.TYPES.STRING]};Z.name="MinosThreadIdFromActThreadIdResult";Z.internalSpec={threadId:[1,d.FLAGS.REQUIRED|d.TYPES.BYTES]};g.MinosMessageMetadataSpec=a;g.MinosEncryptAndSignMessageInputSpec=b;g.MinosEncryptAndSignMessageResultSpec=c;g.MinosDecryptAndVerifyMessageInputSpec=e;g.MinosDecryptAndVerifyMessageResultSpec=f;g.MekBundleSpec=h;g.GenerateMekInputSpec=i;g.GenerateMekResultSpec=j;g.GenerateMekRosterHashInputSpec=k;g.GenerateMekRosterHashResultSpec=l;g.EncryptMekForDistributionInputSpec=m;g.EncryptMekForDistributionInput$MailboxAuthKPSpec=n;g.EncryptMekForDistributionResultSpec=o;g.DecryptMekForDistributionInputSpec=p;g.DecryptMekForDistributionResultSpec=q;g.EncryptMeksForDistributionFromTransportSenderInputSpec=r;g.EncryptMeksForDistributionFromTransportSenderInput$TransportSigningKPSpec=s;g.EncryptMeksForDistributionFromTransportSenderResultSpec=t;g.DecryptMekForDistributionFromTransportSenderInputSpec=u;g.DecryptMekForDistributionFromTransportSenderInput$TransportSenderMEKDistributionSingleRecipientSpec=v;g.DecryptMekForDistributionFromTransportSenderResultSpec=w;g.WrapTransportSigningPublicKeyInputSpec=x;g.WrapTransportSigningPublicKeyResultSpec=y;g.WrapTransportSigningSecretKeyInputSpec=z;g.WrapTransportSigningSecretKeyResultSpec=A;g.DeriveMailboxSigningKeypairInputSpec=B;g.DeriveMailboxSigningKeypairResultSpec=C;g.DeriveMailboxEncryptionKeypairInputSpec=D;g.DeriveMailboxEncryptionKeypairResultSpec=E;g.DeriveMailboxAuthKeypairInputSpec=F;g.DeriveMailboxAuthKeypairResultSpec=G;g.DeriveAttachmentAccessTokenSecretInputSpec=H;g.DeriveAttachmentAccessTokenSecretResultSpec=I;g.DeriveAttachmentPrimaryKeySecretInputSpec=J;g.DeriveAttachmentPrimaryKeySecretResultSpec=K;g.EpochPublicDataSpec=L;g.EpochSignaturesSpec=M;g.MinosSignedEpochSpec=N;g.MinosOpenInitialEpochInputSpec=O;g.MinosOpenInitialEpochResultSpec=P;g.MinosOpenEpochInputSpec=Q;g.MinosOpenEpochResultSpec=R;g.MinosValidateEpochInputSpec=S;g.MinosValidateEpochResultSpec=T;g.MinosVerifySingleEpochInputSpec=U;g.MinosVerifySingleEpochResultSpec=V;g.MinosThreadIdFromOneToOneThreadInputSpec=W;g.MinosThreadIdFromOneToOneThreadResultSpec=X;g.MinosThreadIdFromActThreadIdInputSpec=Y;g.MinosThreadIdFromActThreadIdResultSpec=Z}),98);
__d("EncryptedBackupUploadSuccessFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5729");b=d("FalcoLoggerInternal").create("encrypted_backup_upload_success",a);e=b;g["default"]=e}),98);
__d("FuncChannel",["FBLogger","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){function a(a){var d=this,e;this.$2=[];this.callMessageHandler=function(a){return new(h||(h=b("Promise")))(function(b,c){a.result={resolveFunc:b,rejectFunc:c},d.$2.push(a)})};this.messageToCall=function(a){var b,e,f=d.proxyMethods[a.method];if(typeof f!=="function"){c("FBLogger")("worker").mustfix("proxyMethods[%s] is not a functions",a.method);return}b=(b=a.result)==null?void 0:b.resolveFunc;e=(e=a.result)==null?void 0:e.rejectFunc;if(typeof b==="function"&&typeof e==="function")try{var g=f.apply(a.thisArg,a.argList);b(g)}catch(a){e(a)}else return f.apply(a.thisArg,a.argList)};var f=this,g={},i=(e=a==null?void 0:a(g))!=null?e:{},j=babelHelpers["extends"]({},g);function k(a){j[a]=function(){var b={type:"call",method:a,thisArg:null,argList:Array.from(arguments)};return f.callMessageHandler(b)},g[a]=function(){var b=f.$1[a];if(typeof b!=="function"){c("FBLogger")("worker").mustfix("_backend[%s] is not a functions",a);return}return b.apply(f.$1,arguments)},i[a]==null&&(i[a]=g[a])}this.$1=j;if(a!=null){e=Object.keys(i);e.forEach(k);this.proxyMethods=i}else this.proxyMethods=new Proxy(i,{get:function(a,b){a=b;i[a]==null&&k(a);return i[a]}})}var d=a.prototype;d.flushBuffer=function(){var a=this.$2;this.$2=[];a.forEach(this.messageToCall)};d.setBackend=function(a){this.$1!==a&&(this.$1=a,this.flushBuffer());return this};d.setCallMessageHandler=function(a){this.callMessageHandler=a,this.flushBuffer()};return a}();g["default"]=a}),98);
__d("IGDRouteProvider.react",["react","react-compiler-runtime","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;function k(a){a=a==null?void 0:(a=a.params)==null?void 0:a.thread_key;return a!=null&&typeof a==="string"?a:null}var l=f();function a(a){var b=d("react-compiler-runtime").c(5);a=a.children;var e=c("useCurrentRoute")(),f;b[0]!==e?(f=k(e),b[0]=e,b[1]=f):f=b[1];e=f;b[2]!==a||b[3]!==e?(f=i.jsx(l.Provider,{value:e,children:a}),b[2]=a,b[3]=e,b[4]=f):f=b[4];return f}function b(){return j(l)}g.IGDRouteContextProvider=a;g.useThreadKeyFromCurrentRoute=b}),98);
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useEffect;function a(a){return babelHelpers["extends"]({},d("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(a),{is_dm:d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a),is_instamadillo:d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),is_instamadillo_tlc:d("IGDInstamadilloUtils").isInstamadilloCutover(a)})}function l(a,b){var c=d("IGDInstamadilloUtils").isInstamadilloCutover(a),e=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),f=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);b.addAnnotationBoolean("is_instamadillo",e);b.addAnnotationBoolean("is_instamadillo_tlc",c);b.addAnnotationBoolean("is_dm",f);b.addAnnotationBoolean("is_instamadillo_ttlc",(e=d("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(a));b.addAnnotationBoolean("is_instamadillo_ttlc_audio",e.isInstamadilloTTLCAudioEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_clip",e.isInstamadilloTTLCClipEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",e.isInstamadilloTTLCGenericXmaEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_image",e.isInstamadilloTTLCImageEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_link",e.isInstamadilloTTLCLinkEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_media_share",e.isInstamadilloTTLCMediaShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_profile",e.isInstamadilloTTLCProfileEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",e.isInstamadilloTTLCReelShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_story_share",e.isInstamadilloTTLCStoryShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_text",e.isInstamadilloTTLCTextEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_video",e.isInstamadilloTTLCVideoEnabled(a))}function b(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){c("InteractionTracing").getPendingInteractions().forEach(function(b){l(a,b)})},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);d("Int64Hooks").useEffectInt64(e,f)}var m=new Set();function e(a){var b=d("react-compiler-runtime").c(7),e;b[0]!==a.consistentThreadFbid||b[1]!==a.threadKey||b[2]!==a.threadSubtype||b[3]!==a.threadType?(e=function(){var b=(i||(i=d("I64"))).to_string(a.threadKey);c("InteractionTracing").getPendingInteractions().forEach(function(c){var e=m.has(b);c.addAnnotationBoolean("is_thread_visited",e);c.addAnnotation("thread_key",(i||(i=d("I64"))).to_string(a.threadKey));a.consistentThreadFbid!=null&&c.addAnnotation("consistent_thread_fbid",(i||(i=d("I64"))).to_string(a.consistentThreadFbid));c.addAnnotationInt("thread_type",(j||(j=d("LSIntEnum"))).toNumber(a.threadType));a.threadSubtype!=null&&c.addAnnotation("thread_subtype",(i||(i=d("I64"))).to_string(a.threadSubtype))});return function(){m.add(b)}},b[0]=a.consistentThreadFbid,b[1]=a.threadKey,b[2]=a.threadSubtype,b[3]=a.threadType,b[4]=e):e=b[4];var f;b[5]!==a?(f=[a],b[5]=a,b[6]=f):f=b[6];d("Int64Hooks").useEffectInt64(e,f)}function f(){var a=d("react-compiler-runtime").c(3),b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),e,f;a[0]!==b?(e=function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){if(b==null){a.addAnnotationInt("rendered_direct_null_state",1);a.addAnnotationInt("has_thread_key",0);return}a.addAnnotationInt("has_thread_key",1);a.addAnnotationInt("rendered_direct_null_state",0)})},f=[b],a[0]=b,a[1]=e,a[2]=f):(e=a[1],f=a[2]);k(e,f)}g.getInstamadilloBooleanAnnotations=a;g.addInstamadilloAnnotationsToInteractionTrace=l;g.useAddInstamadilloAnnotationsToInteractionTraces=b;g.useAddThreadAnnotationToInteractionTraces=e;g.useAddThreadRouteAnnotations=f}),98);
__d("LSClientDependencies",[],(function(a,b,c,d,e,f){}),null);
__d("LSDynamicDependencies",["Bootloader","LSDynamicDependenciesEventEmitter","ODS","Promise","SiteData","asyncToGeneratorRuntime","clearTimeout","cr:19620","err","justknobx","nullthrows","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=babelHelpers["extends"]({},b("cr:19620"));function a(a){Object.assign(j,a)}var k={_tombstone:!0};function e(a){var e=new Map();for(a of a){var f=a.name;f!=null&&!n(f)&&e.set(f,c("nullthrows")(a.value))}if(e.size===0)return(i||(i=b("Promise"))).resolve();var g=new(i||(i=b("Promise")))(function(a){var f={},i=[],k=function(c){var a=c[0];c=c[1];c=c==null?void 0:c.__dr;f[c]={be:1,r:[]};i.push(c);(h||(h=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.relay",c);j[a]={load:function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield g;return j[a]});function d(){return c.apply(this,arguments)}return d}()}};for(var m of e)k(m);c("Bootloader").handlePayload({compMap:f,consistency:{rev:c("SiteData").client_revision}});l(c("Bootloader"),i,function(b){Array.from(e.entries()).forEach(function(a,c){var d=a[0];a[1];j[d]=b[c]}),a()})});return g}function l(a,b,c){return a.loadModules.call(a,b,function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c(b)})}function m(a){return a.charAt(0).toUpperCase()+a.slice(1)}function n(a){return a in j&&j[a]!==k}var o=c("justknobx")._("2800");function f(a,e,f){var g=new Map();for(a of a!=null?a:[])n(a)||g.set(a,"LS"+m(a));for(a of e!=null?e:[])!n(a+".bs")?g.set(a+".bs","LS"+m(a)+".nop"):a+".nop"in j||g.set(a+".nop","LS"+m(a)+".nop");for(e of f!=null?f:[])e in j||g.set(e,"LS"+m(e));if(g.size===0)return(i||(i=b("Promise"))).resolve();var p=new(i||(i=b("Promise")))(function(a,e){var f={},i=[],m=function(a){var c=a[0];a=a[1];(h||(h=d("ODS"))).bumpEntityKey(3185,"ls_download_dependency.bootloader",a);d("LSDynamicDependenciesEventEmitter").emitLoadModuleEvent(a);f[a]={be:1,r:[]};i.push(a);j[c]={load:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield p}catch(a){j[c]=k;throw a}return j[c]});function d(){return a.apply(this,arguments)}return d}()}};for(var n of g)m(n);c("Bootloader").handlePayload({compMap:f,consistency:{rev:c("SiteData").client_revision}});var q=l(c("Bootloader"),i,function(b){c("clearTimeout")(r),Array.from(g.entries()).forEach(function(a,c){var d=a[0];a[1];j[d]=b[c]}),a()}),r=c("setTimeout")(function(){q.remove(),e(c("err")("Dynamic sproc loading timeout (%s ms); was loading: %s",o,Array.from(g.keys())))},o)});return p}g.cachedModules=j;g.addToCachedModules=a;g.TOMBSTONE=k;g.downloadRelayDependencies=e;g.downloadBootloaderDependencies=f}),98);
__d("XPlatReactCrypto",["err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h=self.crypto)==null?void 0:h.subtle;function a(a){var b;if(typeof ((b=self.crypto)==null?void 0:b.getRandomValues)!=="function")throw c("err")("crypto.getRandomValues: Not implemented");self.crypto.getRandomValues(a);return a}function b(){var a;if(typeof ((a=self.crypto)==null?void 0:a.randomUUID)!=="function")return null;a=self.crypto.randomUUID();return typeof a==="string"?a:null}function d(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.importKey: Not implemented");return i.importKey(a,b,d,e,f)}function e(a,b){if(i==null)throw c("err")("crypto.subtle.exportKey: Not implemented");return i.exportKey(a,b)}function f(a,b,d){if(i==null)throw c("err")("crypto.subtle.generateKey: Not implemented");return i.generateKey(a,b,d)}function j(a,b,d){if(i==null)throw c("err")("crypto.subtle.encrypt: Not implemented");return i.encrypt(a,b,d)}function k(a,b,d){if(i==null)throw c("err")("crypto.subtle.decrypt: Not implemented");return i.decrypt(a,b,d)}function l(a,b,d){if(i==null)throw c("err")("crypto.subtle.sign: Not implemented");return i.sign(a,b,d)}function m(a,b){if(i==null)throw c("err")("crypto.subtle.digest: Not implemented");return i.digest(a,b)}function n(a,b,d){if(i==null)throw c("err")("crypto.subtle.deriveBits: Not implemented");return i.deriveBits(a,b,d)}function o(a,b,d,e,f){if(i==null)throw c("err")("crypto.subtle.deriveKey: Not implemented");return i.deriveKey(a,b,d,e,f)}g.getRandomValues=a;g.randomUUID=b;g.subtleImportKey=d;g.subtleExportKey=e;g.subtleGenerateKey=f;g.subtleEncrypt=j;g.subtleDecrypt=k;g.subtleSign=l;g.subtleDigest=m;g.subtleDeriveBits=n;g.subtleDeriveKey=o}),98);
__d("LSInt64Lite",["FBLogger","I64","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h;a={add:(h||(h=d("I64"))).add,and_:h.and_,asr_:h.asr_,cast:function(a){return(h||(h=d("I64"))).mk(a[1],a[0])},div:h.div,eq:function(a,b){return a==null&&b==null||a!=null&&b!=null&&(h||(h=d("I64"))).equal(a,b)},from_string:function(a){try{return(h||(h=d("I64"))).of_string(a)}catch(b){throw c("FBLogger")("messenger_web").mustfixThrow('Unable to cast "%s" to int64',a)}},ge:h.ge,gt:h.gt,le:h.le,lsl_:h.lsl_,lsr_:h.lsr_,lt:h.lt,max:h.max,min:h.min,mod_:h.mod_,mul:h.mul,neq:function(a,b){return a==null&&b!=null||a!=null&&b==null||a!=null&&b!=null&&!(h||(h=d("I64"))).equal(a,b)},of_float:h.of_float,of_int32:h.of_int32,or_:h.or_,random:function(){var a=Array.from(d("XPlatReactCrypto").getRandomValues(new Uint32Array(2)));a[0]>>>=1;return(h||(h=d("I64"))).add(h.lsl_(h.of_float(a[0]),32),h.of_float(a[1]))},sub:h.sub,to_float:h.to_float,to_int32:h.to_int32,to_string:function(a){return a==null?a:(h||(h=d("I64"))).to_string(a)},xor:h.xor};g["default"]=a}),98);
__d("LSMaybeSyncIteration",["LSSynchronousPromise","isPromise"],(function(a,b,c,d,e,f,g){"use strict";var h,i={__val__:"__stop_iteration__"};function a(a){return{__val__:"__next_value__",next:a}}function j(a){return a!=null&&typeof a==="object"&&a.__val__==="__next_value__"}function k(a,b,e){var f=l(a,e);while(!(h||(h=c("isPromise")))(f)){if(f.done)return d("LSSynchronousPromise").makeSynchronousPromise(f);e=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(f));if(!(h||(h=c("isPromise")))(e)){if(e===i)return d("LSSynchronousPromise").makeSynchronousPromise(f);var g=j(e)?e.next:void 0;f=l(a,g)}else return e.then(function(c){if(c===i)return f;c=j(c)?c.next:void 0;return k(a,b,c)})}var n=m(b);return f.then(function(c){return c.done?c:n(c).then(function(d){if(d===i)return c;d=j(d)?d.next:void 0;return k(a,b,d)})})}function l(a,b){a=a.next(b);return!(h||(h=c("isPromise")))(a)?a:d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a)}function m(a){return function(b){b=a(b);return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(b)}}g.STOP_ITERATION=i;g.wrapNextValue=a;g.iteratorLoop=k}),98);
__d("LSIterationOperations",["I64","LSDict","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return j(a,b)},c.next=function(){var c={done:!0},e=function(a){return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(b(a.value.item)).then(function(b){if(b){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION}})};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){return c})},c}function k(a,b,c){var e,f=0;return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return k(a,b,c)},e.next=function(){if(f>=c)return d("LSSynchronousPromise").makeSynchronousPromise({done:!0});var e={done:!0},g=function(a){if(f++<b)return;e=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,g).then(function(){return e})},e}function a(a,b){return l(a).then(function(a){return a.reduce(function(a,c){return a.then(function(){return b(c)})},d("LSSynchronousPromise").makeSynchronousPromise(void 0))})}function l(a){var b=[],c=function(a){b.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return b})}function m(a,b,c){var e;c===void 0&&(c=[]);var f={ASC:1,DESC:-1},g=function(a,c){a=a.item;c=c.item;for(var e=0;e<b.length;e++){var g=b[e];g=g[0];var i=a[g];g=c[g];var j;i==null&&g==null?j=0:i==null&&g!=null?j=-1:i!=null&&g==null?j=1:j=(h||(h=d("ReStoreKeyComparer"))).compareValue(i,g);if(j===0)continue;return j*f[b[e][1]]}return 0},i,j=[],k=[],l=function(a){var b=[];for(var d=c.length-1;d>=0;d--)b.push(a[c[d]]);return b},n=function(){k=j,k.sort(g),j=[]};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return m(a,b,c)},e.next=function(){if(k.length)return d("LSSynchronousPromise").makeSynchronousPromise({done:!1,value:k.shift()});var b=function(a){var b=l(a.value.item);if(i!=null&&(h||(h=d("ReStoreKeyComparer"))).compareKey(i,b)!==0){n();j.push(a.value);i=b;return d("LSMaybeSyncIteration").STOP_ITERATION}i=b;j.push(a.value)};return d("LSMaybeSyncIteration").iteratorLoop(a,b).then(function(){!k.length&&j.length&&n();if(k.length)return{done:!1,value:k.shift()};else return{done:!0}})},e}function b(a){var b=0,c=function(){b++};return d("LSMaybeSyncIteration").iteratorLoop(a,c).then(function(){return(i||(i=d("I64"))).of_int32(b)})}function e(a,b){return{forEach:function(e){return l(a).then(function(a){a=a.reduce(function(a,c){c=c.item[b];var d=(a.get(c)||0)+1;return a.set(c,d)},new(c("LSDict"))());var f=d("LSSynchronousPromise").makeSynchronousPromise(void 0),g=function(a){var c=a[0],g=a[1];f=f.then(function(){var a;return e((a={},a[b]=c,a.group_count=(i||(i=d("I64"))).of_int32(g),a))})};for(a of a.entries())g(a);return f})}}}g.filter=j;g.slice=k;g.forEach=a;g.toArray=l;g.sortBy=m;g.count=b;g.groupBy=e}),98);
__d("LSPendingTasksPluginType",[],(function(a,b,c,d,e,f){a=Object.freeze({LS_BROKER:0,PAYMENTS:1,EPHEMERAL_MESSAGING:2,CARRIER_MESSAGING:3,BUG_REPORTER:4,MESSAGE_DENORMALIZATIONS:5,SEEN_HEADS:6,MEDIA_UPLOAD:7,SECURE_THREAD_SEEN_HEADS:8,WHATSAPP_THREAD:9,SECURE_THREAD_OVER_WA_MESSAGE_SEND:10,CONTACT_PRUNING:11,MEDIA_MANAGER:12,SECURE_THREAD_OVER_WA_ENCRYPTION:13,STORY_POST:14,CO_PRESENCE_HEARTBEAT:16,SECURE_THREAD_OVER_WA_GROUP_MANAGEMENT:17,ENCRYPTED_BACKUPS:23,ANONYMOUS_REQUEST:25,MESSAGE_ACTIONS:28,MESSAGE_UNSEND_ATTACHMENT_CLEANUP:39,IGD_INSTAMADILLO:40,PENDING_MESSAGE_SEND:46});f["default"]=a}),66);
__d("isNativeTask",["I64","LSPendingTasksPluginType"],(function(a,b,c,d,e,f,g){"use strict";var h,i="4",j="16",k=new Set([c("LSPendingTasksPluginType").IGD_INSTAMADILLO]);function a(a){var b=k.has((h||(h=d("I64"))).to_float(a.pluginType));a=a.context===j||a.context===i;return b||a}g["default"]=a}),98);
__d("LSIterationHelpers",["FBLogger","LSMaybeSyncIteration","LSSynchronousPromise","ReStoreKeyComparer","ReStoreVaulting","isNativeTask"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Set(["messages","attachments","reactions"]);function j(a){return i.has(a)}function k(a,b,d){return a&&b.name==="pending_tasks"&&d!=null&&c("isNativeTask")(d)}function l(a){for(var b of Object.keys(a))a[b]===void 0&&delete a[b];return a}function m(a,b,c){c===void 0&&(c="asc");var e=a.entries(new WeakMap(),c);function f(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=f,a.next=function(){var a={done:!0},f=0,g="start",i=[],j=function(e){var j=function(){var a=f,j=b[a]||{},k=j.end;j=j.start;var l=e.value[0];if(j&&g==="start"){var m=(h||(h=d("ReStoreKeyComparer"))).compareValue(l[a],j[0]),n=m*(c==="asc"?1:-1)<j[1];if(n){g="start_verify";i=l.slice(0,a);if(a===l.length-1&&m===0)return{v:void 0};else{n=[].concat(i,[j[0]],j[1]&&c==="asc"||!j[1]&&c==="desc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]);return{v:d("LSMaybeSyncIteration").wrapNextValue(n)}}}else g="check_end"}if(j&&g==="start_verify"&&!i.every(function(a,b){return(h||(h=d("ReStoreKeyComparer"))).compareValue(a,l[b])===0})){f=0;g="start";return{v:void 0}}if(k&&(h||(h=d("ReStoreKeyComparer"))).compareValue(k[0],l[a])*(c==="asc"?1:-1)<k[1]){f=0;g="start";return{v:d("LSMaybeSyncIteration").wrapNextValue([].concat(l.slice(0,a),c==="asc"?[(h||(h=d("ReStoreKeyComparer"))).MAX_KEY]:[]))}}f++;g="start"};while(f<b.length){var k=j();if(typeof k==="object")return k.v}a=e;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(e,j).then(function(){return a})},a}return f()}function n(a,b,d,e,f){return{delete:function(){return d.delete.apply(d,a)},item:b,update:function(g){var h=f&&j(e.name)?{transportKey:"FBBroker"}:{};g=babelHelpers.extends({},b,{},g,{},h);if(k(f,e,g))throw c("FBLogger")("messenger_web").mustfixThrow("cannot insert native task in dynamic mode");return d.upsert(a,l(g))}}}function o(a,b){var c;return c={},c[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return o(a,b)},c.next=function(){var c={done:!0},e=function(a){c=a;return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(a,e).then(function(){if(c.done)return d("LSMaybeSyncIteration").iteratorLoop(b,e)}).then(function(){return c})},c}function p(a,b,c){var e,f=[{done:!0},{done:!0}],g=function(a){var b=f[a];f[a]={done:!0};return b};return e={},e[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return p(a,b,c)},e.next=function(){var e=function(a){return function(b){a==="a"?f[0]=b:f[1]=b;return d("LSMaybeSyncIteration").STOP_ITERATION}},i=d("LSSynchronousPromise").makeSynchronousPromise();f[0].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(a,e("a"))}));f[1].done&&(i=i.then(function(){return d("LSMaybeSyncIteration").iteratorLoop(b,e("b"))}));return i.then(function(){if(f[0].done&&f[1].done)return{done:!0};if(f[0].done)return g(1);if(f[1].done)return g(0);var a=(h||(h=d("ReStoreKeyComparer"))).compareKey(f[0].value[0],f[1].value[0]);if(a===0)return g(0);return a*(c==="asc"?1:-1)<0?g(0):g(1)})},e}var q=(b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=function(){return q},b.next=function(){return d("LSSynchronousPromise").makeSynchronousPromise({done:!0})},b);function a(a,b,e,f,g,h,i,l){var r=new Set(),s=a.length>1,t=a.length===1&&a[0][1]==null,u=a.map(function(a){var c=a[0],i=a[1];return c.map(function(a){f.key_lookup===!0&&a.length!==0;f.table_scan===!0&&a.length===0;var c=a.map(function(a){return h(a,b)});a=c.length===(i==null?e.primaryKeyIds:e.indexes[i]).length&&c.every(function(a){var b=a.end;a=a.start;return a&&b&&a[0]===b[0]&&a[1]===0&&b[1]===0});if(a){a=function a(){var b,f=!1;return b={},b[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=a,b.next=function(){var a;if(f)return d("LSSynchronousPromise").makeSynchronousPromise({done:!0});f=!0;var b=c.map(function(a){a=a.start;return a[0]});return(a=i==null?g:g.index(i)).get.apply(a,b).then(function(a){if(!a)return{done:!0};a=d("ReStoreVaulting").maybeUnvaultDbRow(a,e.name);return{done:!1,value:[b,a]}})},b};return a()}return m(i==null?g:g.index(i),c,b)})}).flat().reduce(function(c,d,e){e=e===0&&c==null?q:c;return a.length>1?o(e,d):p(e,d,b)});function v(){var a;return a={},a[typeof Symbol==="function"?Symbol.asyncIterator:"@@asyncIterator"]=v,a.next=function(){var a=!0,b,f,h,m,o=function(c){a=!1;var g=c.value;f=g[0];h=g[1];b=t?f:e.primaryKeyIds.map(function(a){return h[a]});if(k(i,e,h)){m=c;a=!0;return}if(j(e.name)&&i&&h!=null&&h.transportKey!=="FBBroker"){m=c;a=!0;return}if(s){g=JSON.stringify(b);if(r.has(g)){a=!0;return}r.add(g)}return d("LSMaybeSyncIteration").STOP_ITERATION};return d("LSMaybeSyncIteration").iteratorLoop(u,o).then(function(){if(m!=null){var d=m.value[1].transportKey;c("FBLogger")("messenger_web").warn('Expected transportKey to equal ("FBBroker") in %s, provided transportKey: %s',l,d)}return a||b==null||h==null?{done:!0}:{done:!1,value:n(b,h,g,e,i)}})},a}return v()}g.isTranportKeyEnforcedTable=j;g.isNativePendingTaskViolation=k;g.stripUndefinedProperties=l;g.unionIterators=o;g.mergeIterators=p;g.fetch=a}),98);
__d("LSRuntimeDb",["FBLogger","LSIterationHelpers","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.name.match(/secure_|inbox(?!_)/i)}function a(a,b,d,e,f,g){return{metadata:d,table:function(j){j=d.tableNames[d.tableIds[j]];if(b===0&&h(j))throw c("FBLogger")("messenger_web").mustfixThrow("cannot access secure table from dynamic mode");return i(a,j,e,f,g)},transactionId:a.__internal__transaction_id}}function i(a,b,e,f,g){var h=a.transactionTable(b.name,f[f.length-1]);return{add:function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker");a=h.add(a);return c("gkx")("6636")?a:Promise.resolve(a)},fetch:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"asc",b,e,h,j,g,f.join(", "))},fetchDesc:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return d("LSIterationHelpers").fetch(c.length===0?[[[[]],void 0]]:c,"desc",b,e,h,j,g,f.join(", "))},peekNextAutoIncrementId:function(){return h.peekNextAutoIncrementId()},put:function(a){d("LSIterationHelpers").isTranportKeyEnforcedTable(b.name)&&g&&(a.transportKey="FBBroker");if(d("LSIterationHelpers").isNativePendingTaskViolation(g,b,a))throw c("FBLogger")("messenger_web").mustfixThrow("cannot put native task via LS transport");var e=b.primaryKeyIds.map(function(b){if(a[b]!==void 0)return a[b];throw c("FBLogger")("messenger_web").mustfixThrow("primary key must be defined on object")});e=h.delete.apply(h,e).then(function(){return h.add(d("LSIterationHelpers").stripUndefinedProperties(babelHelpers.extends({},a)))});return c("gkx")("6636")?e:Promise.resolve(e)}}}function j(a,b){if(typeof a==="object"&&!Array.isArray(a)){var d,e;if(b==="asc"){Object.prototype.hasOwnProperty.call(a,"gt")&&(d=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(d!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");d=[a.gte,0]}Object.prototype.hasOwnProperty.call(a,"lt")&&(e=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(e!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");e=[a.lte,0]}}else{Object.prototype.hasOwnProperty.call(a,"lt")&&(d=[a.lt,1]);if(Object.prototype.hasOwnProperty.call(a,"lte")){if(d!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both lt and lte");d=[a.lte,0]}Object.prototype.hasOwnProperty.call(a,"gt")&&(e=[a.gt,1]);if(Object.prototype.hasOwnProperty.call(a,"gte")){if(e!=null)throw c("FBLogger")("messenger_web").mustfixThrow("Cannot specify both gt and gte");e=[a.gte,0]}}return{end:e,start:d}}return{end:[a,0],start:[a,0]}}g.LSRuntimeDb=a;g.parseConstraint=j}),98);
__d("XPlatReactTextDecoder",[],(function(a,b,c,d,e,f){"use strict";a=self.TextDecoder;f.TextDecoder=a}),66);
__d("LS",["ExecutionEnvironment","FBLogger","I64","LSDict","LSDynamicDependencies","LSInt64Lite","LSIterationOperations","LSJson","LSRuntimeDb","LSSynchronousPromise","LSVec","MessengerLogHistory","MetaConfig","ODS","ReStoreKeyComparer","XPlatReactTextDecoder","XPlatReactTextEncoder","base64Binary","cr:1088","cr:4790","emptyFunction","err","gkx","isPromise","justknobx","qpl","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["0"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["2"]);q=function(){return a};return a}var r="LS_WEB",s=d("MessengerLogHistory").getInstance("ls");function t(a){return d("base64Binary").decode(a).buffer}var u={compareTo:function(a,b){a=new Uint8Array(a);b=new Uint8Array(b);var c=Math.min(a.length,b.length);for(var d=0;d<c;d++){var e=a[d]-b[d];if(e!==0)return e}return a.length===b.length?0:a.length-b.length},eq:function(a,b){if(a==null&&b==null)return!0;if(a==null||b==null)return!1;a=new Uint8Array(a);b=new Uint8Array(b);if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},ge:function(a,b){return u.compareTo(a,b)>=0},gt:function(a,b){return u.compareTo(a,b)>0},le:function(a,b){return u.compareTo(a,b)<=0},lt:function(a,b){return u.compareTo(a,b)<0},neq:function(a,b){return!u.eq(a,b)},of_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextEncoder").TextEncoder)();return b.encode(a).buffer},to_string:function(a){if(a==null)return void 0;var b=new(d("XPlatReactTextDecoder").TextDecoder)();return b.decode(a)}};function v(a){if(a.length!==1)throw c("FBLogger")("messenger_web").mustfixThrow("only literal strings supported");a=a[0];var b=parseInt(a.substr(-8),16);a=parseInt(a.substr(0,a.length-8),16);return(l||(l=d("I64"))).mk((b>>>1)+(a&1)*2147483648^-(b&1),a>>>1^-(b&1))}function w(a){var b;return(b=(b=a.__sproc_name__)!=null?b:a.__debugModuleSource)!=null?b:"<unknown_sproc>"}var x=function(){var a=0;function d(d){var e=d.args,f=d.shouldLog;d=d.sprocName;b("cr:1088")==null?void 0:b("cr:1088").logStoredProcedureCall(d,e);if(!f||!b("cr:4790"))return;e=++a;b("cr:4790").markerStart(c("qpl")._(25302991,"143"),e);b("cr:4790").markerAnnotate(c("qpl")._(25302991,"143"),{string:{name:d}},{instanceKey:e});return e}function e(a,d,e){a=a.shouldLog;if(!a||d==null)return;b("cr:4790")==null?void 0:b("cr:4790").markerEnd(c("qpl")._(25302991,"143"),e,d)}function f(a){return c("gkx")("26381")?Math.random()*c("MetaConfig")._("10")<1:!1}return{call:d,logSprocDone:e,shouldLogSproc:f}}(),y="Native operation timeout; transaction blocked",z=30*1e3;function A(a,b,e,f,g,l,B){g===void 0&&(g={});l===void 0&&(l=void 0);var C=[],D=d("LSRuntimeDb").LSRuntimeDb(f,a,b,g,C,B),E=function(b,g){for(var h=arguments.length,i=new Array(h>2?h-2:0),j=2;j<h;j++)i[j-2]=arguments[j];var k;if(typeof g==="string"){k=e[g.toString()];if(k==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native type op with type: %s and id: %s",b,g);if(k===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",g);k.load&&(k=k.load())}else k=g;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(k).then(function(b){return b.call.apply(b,[f,a].concat(i))})},F=function(b){for(var g=arguments.length,i=new Array(g>1?g-1:0),j=1;j<g;j++)i[j-1]=arguments[j];var l;if(typeof b==="string"){l=e[b+".bs"]||e[b+".nop"];if(l==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented native op with id: %s",b);if(l===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent native type op loading failed for: %s (retryable)",b);l.load&&(l=l.load())}else l=b;var m;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(l).then(function(b){var e;m=(e=(e=b.__nop_name__)!=null?e:b==null?void 0:b.toString().slice(0,250))!=null?e:"<unknown nop name>";e=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b.apply(void 0,[f,a].concat(i)));return!(h||(h=c("isPromise")))(e)?e:c("justknobx")._("3895")&&(k||(k=c("ExecutionEnvironment"))).isInBrowser?Promise.race([e,new Promise(function(a,b){return c("setTimeout")(function(){return b(c("err")(y))},z)})]):e}).then(function(a){return a},function(a){c("FBLogger")("messenger_web").catching(a).addMetadata(r,"NATIVE_OP_ID",m).mustfixThrow("Native operation %s failed: was_timeout: %s, is_in_worker: %s",m,(a==null?void 0:a.message)===y,(k||(k=c("ExecutionEnvironment"))).isInWorker)})},G=function(a){return a.slice(1).reduce(function(b,d){if(typeof d!=="function"){c("FBLogger")("messenger_web").mustfix("Non-function passed (%s, type %s) in sequence (%s)",d,typeof d,JSON.stringify(a.map(function(a){return typeof a})));return b}return b.then(d)},a[0]())},H=function(a,b){return a.slice(b)};return{Map:c("LSDict"),blob:t,blobs:u,constructor:{n:v},count:d("LSIterationOperations").count,createArray:function(){return c("LSVec").ofArray([])},createArrayWithElements:function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c("LSVec").ofArray(b)},db:D,filter:d("LSIterationOperations").filter,forEach:d("LSIterationOperations").forEach,groupBy:d("LSIterationOperations").groupBy,i64:c("LSInt64Lite"),islc:d("LSIterationOperations").slice,like:function(a,b){b=b.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp(b).test(a)},logger:function(a){if(l)return{debug:l,info:l,mustfix:l,warn:l};var b=c("FBLogger")("messenger_web"),e=a.startsWith("epoch mismatch"),f=a.startsWith("cursor mismatch");if(e||f){a=function(a){s.error(a,"error");a=function(){if(e)return"epoch_mismatch";else if(f)return"cursor_mismatch";else return"fixme_could_not_produce_key"}();(i||(i=d("ODS"))).bumpEntityKey(3185,"lsplatform",a)};return{debug:function(a){return s.debug(a)},info:function(a){return s.debug(a)},mustfix:a,warn:a}}else{c("gkx")("26382")||(b.info=c("emptyFunction"));return b}},loopAsync:function(a,b){function e(f){if(c("LSInt64Lite").lt(f,a)){var g=f;f=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(g));while(!(h||(h=c("isPromise")))(f)){g=c("LSInt64Lite").add(g,v(q()));if(!c("LSInt64Lite").lt(g,a))return d("LSSynchronousPromise").makeSynchronousPromise(void 0);f=d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(b(g))}return f.then(function(){return e(c("LSInt64Lite").add(g,v(p())))})}return d("LSSynchronousPromise").makeSynchronousPromise(void 0)}return e(v(o()))},loopSync:function(a,b){for(var d=v(n());c("LSInt64Lite").lt(d,a);d=c("LSInt64Lite").add(d,v(m())))b(d)},merge:function(){function a(a,b){return(j||(j=d("ReStoreKeyComparer"))).compareValue(a,b)>0?a:b}function b(a,b){return(j||(j=d("ReStoreKeyComparer"))).compareValue([a[0],-a[1]],[b[0],-b[1]])<0?a:b}for(var c=arguments.length,e=new Array(c),f=0;f<c;f++)e[f]=arguments[f];var g=e.reduce(function(c,e){e=d("LSRuntimeDb").parseConstraint(e,"asc");return{end:c.end&&e.end?b(e.end,c.end):e.end||c.end,start:c.start&&e.start?a(e.start,c.start):e.start||c.start}},{});return babelHelpers.extends({},g.start?g.start[1]?{gt:g.start[0]}:{gte:g.start[0]}:null,{},g.end?g.end[1]?{lt:g.end[0]}:{lte:g.end[0]}:null)},n:v,nativeOperation:F,nativeTypeOperation:E,notnull:function(a){if(a===null)throw c("FBLogger")("messenger_web").mustfixThrow("value should not be null");return a},print:function(a){},resolve:function(a){return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(a)},resolveGuaranteeAsync:function(a){var b;return((b=self.Promise)!=null?b:Promise).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))},rm:c("LSInt64Lite").of_int32(a),sequence:G,slice:H,sortBy:d("LSIterationOperations").sortBy,storedProcedure:function(h){for(var i=arguments.length,j=new Array(i>1?i-1:0),k=1;k<i;k++)j[k-1]=arguments[k];var m;if(typeof h==="string"){m=e[h];if(m==null)throw c("FBLogger")("messenger_web").mustfixThrow("Attempted to call unimplemented stored procedure with id: %s",h);if(m===d("LSDynamicDependencies").TOMBSTONE)throw c("err")("Concurrent sproc loading failed for: %s (retryable)",h);m.load&&(m=m.load())}else m=h;var n=this;switch(a){case 0:n=A(2,b,e,f,g,l,B);break;case 2:n=A(1,b,e,f,g,l,B);break}var o,p,q;return d("LSSynchronousPromise").wrapInSyncPromiseIfNotPromise(m).then(function(a){p=w(a);q=x.shouldLogSproc(p);C.push(p);o=x.call({args:j,shouldLog:q,sprocName:p});f.reportUsedTablesForSyncAccess(a.__tables__);return a.apply(void 0,j.concat([n]))}).then(function(a){C.pop();x.logSprocDone({args:j,shouldLog:q,sprocName:p},o,2);return a},function(a){C.pop();x.logSprocDone({args:j,shouldLog:q,sprocName:p},o,3);c("FBLogger")("messenger_web").catching(a).addMetadata(r,"SPROC_STACK",C.join("\n")).warn("Sproc %s failed",p);throw a})},throw:function(a){throw c("FBLogger")("messenger_web").mustfixThrow(a)},toArray:d("LSIterationOperations").toArray,toJSON:function(a){return d("LSJson").stringify(a)}}}A.n=v;g.default=A}),98);
__d("LSBase64Decode",["Base64Utils","CryptoLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.replace(/-/g,"+").replace(/_/g,"/").replace(/\./g,"=").replace("/,/","=");var b=4-a.length%4;if(b<4)for(var c=0;c<b;c++)a+="=";return a}function a(a){var b=d("CryptoLogger").CryptoLogger("base64decode");try{return a!=null?d("Base64Utils").toArrayBuffer(h(a)):void 0}catch(c){if((c==null?void 0:c.message)==null)return;c instanceof Error?b.catching(c).mustfix(c.message):b.mustfix("Base64decode : empty error message for exception: %s, input string: %s",c.message,a!=null?a:"undefined")}}g.decode=a}),98);
__d("LSResult",[],(function(a,b,c,d,e,f){"use strict";function a(a){return[a]}f["default"]=a}),66);
__d("LSBase64Decode.nop",["LSBase64Decode","LSResult","LSSynchronousPromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(a,b,e){return d("LSSynchronousPromise").makeSynchronousPromise(c("LSResult")(d("LSBase64Decode").decode(e)))};a.__nop_name__="LSBase64Decode";g["default"]=a}),98);
__d("LSCheckIfAuthoritativeThreadMissingMiActMapping",["gkx"],(function(a,b,c,d,e,f,g){function a(){var a=arguments,b=a[a.length-1],d=[],e=[];return b.sequence([function(f){return b.sequence([function(e){return c("gkx")("4792")?b.sequence([function(c){return b.db.table(173).fetch([[[a[0]]]]).next().then(function(c,e){e=c.done;c=c.value;return e?b.sequence([function(c){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,c){var e=a.done;a=a.value;return e?d[3]=!1:(c=a.item,d[3]=b.i64.eq(c.authorityLevel,b.i64.cast([0,80])))})},function(a){return d[1]=d[3]}]):(c.item,d[1]=!1)})},function(a){return d[0]=d[1]}]):b.resolve(d[0]=!1)},function(a){return e[0]=d[0]}])},function(a){return b.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxCheckIfAuthoritativeThreadMissingMiActMappingStoredProcedure";a.__tables__=["mi_act_mapping_table","threads"];b=a;g["default"]=b}),98);
__d("LSCreateOfflineThreadingID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return c[0]=b.i64.random(),d[0]=b.i64.and_(b.i64.or_(b.i64.lsl_(a[0],b.i64.to_int32(b.i64.cast([0,22]))),b.i64.and_(c[0],b.i64.cast([0,4194303]))),b.i64.cast([2147483647,4294967295])),b.resolve(d)}a.__sproc_name__="LSMailboxCreateOfflineThreadingIDStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLogMEBUploadSuccessEvent.nop",["Promise","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("EncryptedBackupUploadFailureFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop"),j=c("requireDeferred")("EncryptedBackupUploadSuccessFalcoEvent").__setRef("LSLogMEBUploadSuccessEvent.nop");a=function(a,c,d,e,f){if(d!=null){a=f?j.load():i.load();void a.then(function(a){return a.log(function(){return{message_id:d,trace_id:e}})})}return(h||(h=b("Promise"))).resolve()};a.__nop_name__="LSLogMEBUploadSuccessEvent";g["default"]=a}),98);
__d("MebClientLogsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3226");b=d("FalcoLoggerInternal").create("meb_client_logs",a);e=b;g["default"]=e}),98);
__d("LSLogMebClientEvent.nop",["I64","LSVec","MebClientLogsFalcoEvent","Promise"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){c("MebClientLogsFalcoEvent").log(function(){return{calling_class:f,device_family_id:void 0,device_registration_id:void 0,log_level:(i||(i=d("I64"))).to_string(k),msg:g,trace_ids:c("LSVec").toArray(j)}});return(h||(h=b("Promise"))).resolve()};a.__nop_name__="LSLogMebClientEvent";g["default"]=a}),98);
__d("LSQplAnnotateString.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i,j){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addAnnotations(a,{string:(f={},f[i]=j,f)},{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplAnnotateString";g["default"]=a}),98);
__d("LSQplMarkPoint.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").addPoint(a,i,{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplMarkPoint";g["default"]=a}),98);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSIsMobileClient","LSLogMEBUploadSuccessEvent.nop","LSLogMebClientEvent.nop","LSQplAnnotateString.nop","LSQplMarkPoint.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return a[3]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,1021646192]),a[3],"dasm_delete_backup_on_client_sproc_start"):c.resolve()},function(d){return a[3]!==void 0?a[4]!==void 0?c.nativeOperation(b("LSQplAnnotateString.nop"),c.i64.cast([0,1021646192]),a[3],"dasm_delete_backup_on_client_error_message",a[4]):c.resolve():c.resolve()},function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),c.i64.neq(void 0,void 0)?(d[9]=["deleteBackupOnClient reason: "," ",c.i64.to_string(void 0)].join(""),function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",d[9]].join("")),d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[d[9]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(a){return d[1]="Beginning deleteBackupOnClient stored procedure",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[1]].join("")),d[2]=c.createArray(),void 0!==void 0?d[9]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[1]].join(""),d[2],c.i64.cast([0,4]))},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(168).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(168).fetch(),function(a){return a["delete"]()})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(169).fetch([[[a[0]]],"fk_secure_encrypted_backups_client_state"]),function(a){return a["delete"]()}):c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(174).fetch(),function(a){return a["delete"]()})},function(b){return a[1]==="fetch_virtual_device"?c.db.table(178).put({pk:c.i64.cast([0,1]),recoveryCodeStatus:c.i64.cast([0,4])}):c.resolve()},function(e){return a[2]?c.sequence([function(a){return d[9]="Clearing state management backups tables",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[9]].join("")),d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[9]].join(""),d[10],c.i64.cast([0,4]))},function(a){return c.forEach(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){var b=a.update;a.item;return b({backupId:void 0})})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.filter(c.db.table(184).fetch(),function(b){return c.i64.eq(b.backupId,a[0])}),function(a){return a["delete"]()}):c.forEach(c.db.table(184).fetch(),function(a){return a["delete"]()})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(196).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(196).fetch(),function(a){return a["delete"]()})}]):c.resolve()},function(a){return!1===!1?c.sequence([function(a){return c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1851]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!0:d[11]=!1,d[11]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[13]].join("")),d[12]=c.createArray(),void 0!==void 0?d[14]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[13],d[12],c.i64.cast([0,3]))):c.resolve()}])},function(a){return c.forEach(c.db.table(177).fetch(),function(a){var d=a.item;return c.sequence([function(a){return c.forEach(c.db.table(2).fetch([[[d.pendingBackupTaskId]]]),function(a){return a["delete"]()})},function(a){return c.i64.eq(d.contentType,c.i64.cast([0,1]))?c.nativeOperation(b("LSLogMEBUploadSuccessEvent.nop"),d.uniqueKey,d.lsTraceId,!0):c.resolve()}])})},function(a){return c.count(c.db.table(177).fetch()).then(function(a){return d[9]=a})},function(a){return c.i64.eq(d[9],c.i64.cast([0,0]))?c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1852]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!0:d[11]=!1,d[11]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[13]].join("")),d[12]=c.createArray(),void 0!==void 0?d[14]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[13],d[12],c.i64.cast([0,3]))):c.resolve()}]):c.sequence([function(a){return void 0!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),void 0,c.i64.cast([0,1853]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[10]=a[0],a})},function(a){return d[10]?d[11]=!0:d[11]=!1,d[11]&&!0?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]="LSDataTraceMciTraceLog native op not supported",function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][MEBTraceUtils] ","",d[13]].join("")),d[12]=c.createArray(),void 0!==void 0?d[14]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils",d[13],d[12],c.i64.cast([0,3]))):c.resolve()}])}]):c.resolve()},function(e){return a[2]?(d[9]="Clearing data flow backups tables",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[9]].join("")),d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[9]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(e){return a[5]?c.resolve(0):a[4]!==void 0?(function(a){c.logger(a).mustfix(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",a[4]].join("")),d[9]=c.createArray(),void 0!==void 0?d[10]=(d[9].push(void 0),d[9]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",a[4],d[9],c.i64.cast([0,3]))):c.resolve()},function(a){return d[3]=c.i64.of_float(Date.now()),d[4]=c.i64.random(),d[6]="Finishing execution. Execution time: ",d[7]=c.i64.to_string(c.i64.sub(d[3],d[0])),d[8]=" ms",d[5]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",d[5],d[6],d[5],d[7],d[5],d[8]].join("")),c.i64.eq(c.i64.mod_(d[4],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[9]=",",d[10]=c.createArray(),void 0!==void 0?d[11]=(d[10].push(void 0),d[10]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[d[6],d[9],d[7],d[9],d[8]].join(""),d[10],c.i64.cast([0,4]))):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSQplMarkPoint.nop"),c.i64.cast([0,1021646192]),a[3],"dasm_delete_backup_on_client_sproc_end"):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsDeleteBackupOnClientStoredProcedure";a.__tables__=["secure_encrypted_backups_client_state","secure_encrypted_backups_epochs","secure_encrypted_backups_generated_recovery_code","secure_encrypted_backups_recovery_code_status","encrypted_backups","encrypted_backups_virtual_devices","encrypted_backups_metadata","pending_backups_context_v2","pending_tasks"];e.exports=a}),null);
__d("LSFactory",["ExecutionEnvironment","LS","LSDynamicDependencies","LSMetadata","cr:8709"],(function(a,b,c,d,e,f,g){"use strict";var h,i={dynamic:!1};function a(a,e){e===void 0&&(e=i);a=c("LS")(1,d("LSMetadata").schema,d("LSDynamicDependencies").cachedModules,a,void 0,void 0,e.dynamic);return b("cr:8709")!=null&&(h||(h=c("ExecutionEnvironment"))).isInBrowser?b("cr:8709").wrapSprocInvocationWithProfiler(a):a}g["default"]=a}),98);
__d("LSInitSyncCompleteSubscription",["I64","LSIntEnum","Promise","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,c){return new(j||(j=b("Promise")))(function(b,e){var f=d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(c).subscribe(function(a,c){if(c.operation==="delete")return;if((h||(h=d("I64"))).equal(c.value.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2))){f();return b()}})})}function a(a,b){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.sync_groups).getKeyRange(b)).then(function(c){if(c!=null&&(h||(h=d("I64"))).equal(c.syncStatus,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;return k(a,b)})}function c(a){return k(a,(i||(i=d("LSIntEnum"))).ofNumber(1))}g.maybeWaitForSyncGroup=a;g.use=c}),98);
__d("LSIsEncryptionVersionSecure",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.i64.eq(a[0],b.i64.cast([0,4]))?c[0]=!1:(b.i64.eq(a[0],b.i64.cast([0,3]))?c[1]=!0:(b.i64.eq(a[0],b.i64.cast([0,2]))?c[2]=!0:(b.i64.eq(a[0],b.i64.cast([0,0]))?c[3]=!0:(b.i64.eq(a[0],b.i64.cast([0,99]))?c[4]=!1:c[4]=!1,c[3]=c[4]),c[2]=c[3]),c[1]=c[2]),c[0]=c[1]),d[0]=c[0],b.resolve(d)}a.__sproc_name__="LSEncryptedBackupsVersioningIsEncryptionVersionSecureStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSIssueNextSync",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.count(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]})).then(function(a){return d[0]=a})},function(e){return c.i64.gt(d[0],c.i64.cast([0,0]))&&a[3]===!0?c.resolve(0):c.sequence([function(b){return c.forEach(c.filter(c.db.table(310).fetch(),function(b){return b.projectName===a[1]}),function(a){return a["delete"]()})},function(e){return c.i64.gt(a[2],c.i64.cast([0,0]))?(d[3]=c.i64.of_float(Date.now()),d[1]=c.i64.add(d[3],a[2])):d[1]=c.i64.cast([0,0]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["acs_sync","_",a[1]].join(""),c.i64.cast([0,362]),"",void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[1],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.db.table(310).add({taskId:d[2],projectName:a[1],maxClientTokenPoolSize:a[0]})}])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSAnonymousCredentialsIssueNextSyncStoredProcedure";a.__tables__=["acs_request_context"];e.exports=a}),null);
__d("LSMailboxTaskCompletionApiOnTaskCompletion",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.db.table(233).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({success:a[1]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSCoreMailboxTaskCompletionApiOnTaskCompletionStoredProcedure";a.__tables__=["mailbox_task_completion_api_tasks"];e.exports=a}),null);
__d("LSMessageReplySourceTypeV2",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MESSAGE:1,STORY:2,FORWARD:3,FB_STORY_SHARE:4,IG_STORY_SHARE:5,STORY_BASE64_ENCODED:6,LIGHTWEIGHT_STATUS:7,CLOSE_FRIENDS:8,XMA:9,IG_NOTE:10,CLOSE_FRIENDS_NOTE_REPLY:11,LIGHTWEIGHT_STATUS_REACTION:12,FB_FEED_POST:13,HIGHLIGHTS_TAB_POST_REPLY:14,HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:15,SHARED_ALBUM:16,AVATAR_DETAIL:17,NOTE_REPLY_ARMADILLO:18,HIGHLIGHTS_TAB_CARDS_FOR_MOM:19,HIGHLIGHTS_TAB_CARDS_FOR_BIRTHDAY:20,NOTE_MENTION:21,FB_STORY_MENTION:22,EXPIRED_STORY:23,FB_PRODUCER_STORY_REPLY:24,FB_POST_MENTION:25,AI_PERSONA_NOTE_REPLY:26,AI_PERSONA_NOTE_REACTION:27,FB_MSGR_NOTE:28});f["default"]=a}),66);
__d("LSMessageSendStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SENDING_TO_SERVER:1,SERVER_RECEIVED:2,NON_RETRIABLE_ERROR:4,RETRIABLE_ERROR:5});f["default"]=a}),66);
__d("LSMessagingThreadAttributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,UNKNOWN_TEST:1,UNKNOWN_FAILURE_RETRY:2,MESSENGER_INBOX:65536,MESSENGER_INBOX_IN_THREAD:65537,MESSENGER_INBOX_THREAD_LIST:65538,MESSENGER_INBOX_NESTED_FOLDER:65539,MESSENGER_INBOX_RECENT_THREADS:65540,MESSENGER_INBOX_REMAINING_THREADS:65541,MESSENGER_INBOX_MESSAGE_SEARCH:65542,MESSENGER_INBOX_IMAGE_SENDING:65543,MESSENGER_INBOX_FORWARD:65544,MESSENGER_INBOX_ARCHIVED_THREADS:65545,MESSENGER_INBOX_PENDING_REQUESTS:65546,MESSENGER_INBOX_ACTIVE_CONTACTS:65547,MESSENGER_INBOX_THREAD_BANNER_BOTTOM_SHEET:65548,MESSENGER_INBOX_PEOPLE_YOU_MAY_KNOW:65549,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET:65550,MESSENGER_INBOX_HOLIDAY_CARD_SHARE_SHEET_QP:65551,MESSENGER_INBOX_META_AI_FAB:65552,MESSENGER_INBOX_META_AI_LONG_PRESS_MENU:65553,MESSENGER_INBOX_PINNED_THREAD:65554,MESSENGER_INBOX_PEOPLE_YOU_MAY_MESSAGE:65555,MESSENGER_UNIVERSAL_SEARCH:131072,MESSENGER_UNIVERSAL_SEARCH_NULL_STATE:131073,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED:131074,MESSENGER_UNIVERSAL_SEARCH_MESSAGE_SEARCH:131075,MESSENGER_UNIVERSAL_SEARCH_ADVANCED_CONTENT_SEARCH:131076,MESSENGER_UNIVERSAL_SEARCH_AI_PROMPT:131077,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD:131078,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_AIRPLANE_SEND:131079,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND:131080,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_DONUT:131081,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_DONUT:131082,MESSENGER_UNIVERSAL_SEARCH_AI_NULLSTATE_AIRPLANE_SEND:131083,MESSENGER_UNIVERSAL_SEARCH_META_AI_SEARCH_RESULT:131084,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_SNIPPET:131085,MESSENGER_UNIVERSAL_SEARCH_AI_TYPEAHEAD_KEYBOARD_SEND_SNIPPET:131086,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET:131087,MESSENGER_UNIVERSAL_SEARCH_SERP_SNIPPET_PILL:131088,MESSENGER_UNIVERSAL_SEARCH_AI_DISCOVERY_MODULE:131089,MESSENGER_UNIVERSAL_SEARCH_KEY_PRESSED_WITH_SNIPPET:131090,MONTAGE_AND_ACTIVE_NOW:196608,MONTAGE_AND_ACTIVE_NOW_MONTAGE_INBOX_UNIT:196609,MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW:196610,MONTAGE_AND_ACTIVE_NOW_INBOX_COMPOSER:196611,MONTAGE_AND_ACTIVE_NOW_ACTIVE_AND_HAS_STORY:196612,MONTAGE_AND_ACTIVE_NOW_CUSTOM_STATUS:196613,MONTAGE_AND_ACTIVE_NOW_NOTES:196614,MONTAGE_AND_ACTIVE_NOW_SEE_ALL_ACTIVE:196615,MONTAGE_AND_ACTIVE_NOW_AN_TRAY_STORY_REPLY:196616,MESSENGER_ACTIVE_NOW_FRIENDS_TAB:262144,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_FRIENDS_TAB:262145,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_PLACE_HOLDER:262146,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE:262147,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_RECENT_ACTIVE_AND_STORY:262148,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_CONTENT_DISCOVERY:262149,MESSENGER_ACTIVE_NOW_FRIENDS_TAB_META_AI_FAB:262150,MESSENGER_PENDING_REQUESTS:327680,MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST:327681,MESSENGER_PENDING_REQUESTS_PENDING_REQUESTS_PAGE:327682,MESSENGER_BROADCAST_FLOW:393216,MESSENGER_BROADCAST_FLOW_FROM_MESSENGER:393217,MESSENGER_BROADCAST_FLOW_FROM_FB:393218,MESSENGER_BROADCAST_FLOW_FROM_EXTERNAL:393219,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_SHARESHEET:393220,MESSENGER_BROADCAST_FLOW_FROM_FB__NEWSFEED_GOODWILL_COMPOSER:393221,MESSENGER_BROADCAST_FLOW_FROM_FB__SHORTS_VIEWER:393222,MESSENGER_BROADCAST_FLOW_FORWARD_GUTTER:393223,MESSENGER_BROADCAST_FLOW_FORWARD_LONGCLICK:393224,MESSENGER_BROADCAST_FLOW_MESSENGER_PHOTO_VIEW:393225,MESSENGER_OMNIPICKER:458752,MESSENGER_OMNIPICKER_NULL_STATE:458753,MESSENGER_OMNIPICKER_KEY_PRESSED:458754,MESSENGER_NOTIFICATION:524288,MESSENGER_NOTIFICATION_IN_THREAD_REPLY:524289,MESSENGER_NOTIFICATION_LONGPRESS_REPLY:524290,MESSENGER_NOTIFICATION_LONGPRESS_REACTION:524291,CLICK_TO_MESSENGER_AD:589824,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED:589825,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA:589826,CLICK_TO_MESSENGER_AD_VIEW_AND_MESSAGE:589827,CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA__NEWSFEED_CTM_ADS_CTA:589828,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_OPTIMISTIC_LTV:589829,CLICK_TO_MESSENGER_AD_FROM_NEWSFEED_LEAD_GEN:589830,PAYMENTS:655360,PAYMENTS_BUBBLE_CLICK:655361,RTC:720896,RTC_VOIP_INCALL:720897,RTC_DRAWER_PROMOTION:720898,FB_PAGE:786432,FB_PAGE_ABOUT_CARD:786433,FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON:786434,FB_PAGE_PROFILE_FOOTER_MESSAGE_BUTTON:786435,FB_PAGE_PROFILE_MORE_DRAWER:786436,FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:786437,FB_PAGE_PYMM_RHC:786439,FB_PAGE_PAGES_HOME_FRIENDS_DIALOG:786440,FB_PAGE_PAGES_PRIVATE_REPLY:786441,FB_PROFILE:851968,FB_PROFILE_TIMELINE_MESSAGE_BUTTON:851969,FB_PROFILE_FACEBOOK_PROFILE:851970,FB_PROFILE_MESSAGE_BUTTON:851971,FB_PROFILE_MESSAGE_BUTTON_BLOKS_URL:851972,FB_PROFILE_PROFILE_HEADER_COMPOSER:851973,FB_PROFILE_MUTUAL_FRIENDS_DIALOG:851974,FB_PROFILE_DIRECTORY_MESSENGER_MESSAGE_BLOKS_URL:851975,FB_SEARCH:917504,FB_SEARCH_CONTEXTUAL_PROFILE_ACTION_BAR_FROM_SEARCH:917505,FB_SEARCH_SEARCH_MESSAGE_BUTTON:917506,FB_SEARCH_FB_MESSAGE_SEARCH_RESULTS:917507,FB_SEARCH_HIGH_CONFIDENCE_CARD:917508,FB_SEARCH_MENTIONS:917509,FB_SEARCH_NULLSTATE_CTA:917510,FB_SEARCH_NULL_STATE:917511,FB_SEARCH_TYPEAHEAD:917512,FB_SEARCH_TYPEAHEAD_AIRPLANE_SEND:917513,FB_SEARCH_TYPEAHEAD_KEYBOARD_SEND:917514,FB_SEARCH_TYPEAHEAD_DONUT:917515,FB_SEARCH_NULL_STATE_DONUT:917516,FB_SEARCH_NULL_STATE_AIRPLANE_SEND:917517,FB_SEARCH_NULL_STATE_KEYBOARD_SEND:917518,FB_SEARCH_SERP_PROMPT_SUGGESTIONS:917519,FB_SEARCH_AI_DISCOVERY_MODULE:917520,FB_SEARCH_TYPEAHEAD_AI_SHORTCUT:917521,CRYPTO:983040,MESSENGER_MONTAGE_COMPOSER:1048576,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB:1048577,MESSENGER_MONTAGE_COMPOSER_FRIENDS_TAB_STORY_AND_ACTIVE_NOW:1048578,MESSENGER_MONTAGE_REPLY:1114112,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE:1114113,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT:1114114,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR:1114115,MESSENGER_MONTAGE_REPLY_INBOX_THREAD_LIST_PROFILE_AUTHOR_PROFILE:1114116,MESSENGER_MONTAGE_REPLY_REPLY_CONTEXT_AUTHOR_PROFILE:1114117,MESSENGER_MONTAGE_REPLY_THREAD_NAV_BAR_AUTHOR_PROFILE:1114118,MESSENGER_MONTAGE_REPLY_ONE_TO_ONE_CHAT_THREAD_STORY_BUBBLE:1114119,MESSENGER_THREAD_MEMBERS_LIST:1179648,MARKETPLACE:1245184,MARKETPLACE_ACTIVITY_BANNER:1245185,MARKETPLACE_SEND_MESSAGE:1245186,MARKETPLACE_GEN_AI_ACCORDION_META_AI_PILL:1245187,MARKETPLACE_GEN_AI_ACCORDION_FOLLOW_UP_QUESTION:1245188,MARKETPLACE_GEN_AI_PRICE_CHECK_META_AI_PILL:1245189,MARKETPLACE_GEN_AI_PRICE_CHECK_FOLLOW_UP_QUESTION:1245190,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_GENERIC:1245191,MARKETPLACE_META_AI_PILLS_MODULE_META_AI_PILL_WITH_PROMPT:1245192,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_GENERIC:1245193,MARKETPLACE_GEN_AI_ENRICHED_DESCRIPTION_META_AI_PILL_WITH_PROMPT:1245194,FB_STORY:1310720,FB_STORY_VIEWER_SHEET_MENU:1310721,FB_STORY_VIEWER_SHEET_ROW:1310722,FB_STORY_STORIES_JEWEL_NOTIFICATION:1310723,FB_STORY_STORIES_PUSH_NOTIFICATION:1310724,FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:1310725,FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:1310726,FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:1310727,FB_STORY_SOCIAL_CONTEXT_CONVERSATIONS:1310728,FB_STORY_MENTIONS:1310729,FB_STORY_SELF_STORY_SEND:1310730,FB_STORY_SHARESHEET:1310731,FB_STORY_NOTES:1310732,FB_STORY_TRY_META_AI_STICKER:1310733,FB_STORY_CHALLENGES_NOMINATION:1310734,WORKSPEED:1376256,WORKSPEED_COMPOSER_LIKE_BUTTON:1376257,WORKSPEED_COMPOSER_GIF_PICKER:1376258,MDOTME:1441792,MDOTME_ORGANIC_POST:1441793,MDOTME_MARKETING_EMAIL:1441794,MDOTME_MBS_OFFSITE_EMAIL:1441795,CUSTOMER_CHAT_PLUGIN:1507328,CUSTOMER_CHAT_PLUGIN_MOBILE_REDIRECT:1507329,CUSTOMER_CHAT_PLUGIN_UPGRADE_FLOW:1507330,CUSTOMER_CHAT_PLUGIN_RE_ENGAGEMENT:1507331,FB_FEED:1572864,FB_FEED_ORGANIC_POST:1572865,FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE:1572866,FB_FEED_QUESTION_TRIGGERED_CONVO:1572867,FB_FEED_DYNAMIC_HOVER_CARD:1572868,FB_FEED_ORGANIC_POST__NEWSFEED_PAGE_POST_CTA:1572869,FB_FEED_ORGANIC_POST__NEWSFEED_BUMPER_SMCTA:1572870,FB_FEED_BCF_OPEN_CHAT_BUTTON:1572871,FB_FEED_REACTORS_LIST_MESSAGE_BUTTON:1572872,FB_FEED_REPLY_TO_AUTHOR:1572873,FB_FEED_UFI_SEND_SUGGESTIONS:1572874,FB_FEED_BCF:1572875,FB_FEED_COMMUNITY_CHATS_FEED_POST:1572876,FB_FEED_SOCIAL_CONNECTIONS_QP:1572877,FB_FEED_META_AI_DEEP_DIVES:1572878,FB_FEED_META_AI_SHARE_SHEET:1572879,FB_FEED_META_AI_TRENDING_DISCOVER_UNIT:1572880,FB_FEED_META_AI_POST_DEEPDIVE_PILL:1572881,FB_FEED_META_AI_EDUCATIONAL_QP:1572882,FB_FEED_META_AI_ENTITY_SUMMARIZATION_DISCOVER_UNIT:1572883,FB_FEED_META_AI_COMMENTS_SUMMARY:1572884,FB_FEED_META_AI_FAB:1572885,FB_FEED_META_AI_ADS_CAMPAIGN:1572886,FB_FEED_META_AI_ANSWERSHEET:1572887,FB_FEED_META_AI_BOOKMARK:1572888,FB_FEED_META_AI_FAB_COMMENTS_SUMMARY:1572889,FB_FEED_META_AI_FAB_CONTEXTUAL:1572890,FB_FEED_FEED_POLL:1572891,FB_FEED_BIZ_VOICE_AGENT:1572892,FB_NOTIFICATION:1638400,FB_NOTIFICATION_JEWEL_NOTIF:1638401,FB_NOTIFICATION_PUSH_NOTIF:1638402,FB_EVENT:1703936,FB_EVENT_MESSAGE_HOST:1703937,FB_EVENT_SHARE_CLASS_MATERIALS:1703938,SUPPORT_RESOURCES:1769472,SUPPORT_RESOURCES_FRX_ACTION:1769473,LEAD_GEN_MESSAGING:1835008,LEAD_GEN_MESSAGING_PRE_SUBMISSION:1835009,LEAD_GEN_MESSAGING_POST_SUBMISSION:1835010,LEAD_GEN_MESSAGING_CROSS_CHANNEL_VERTICAL_PRESENT_ANDROID:1835011,LEAD_GEN_MESSAGING_CROSS_CHANNEL_HSCROLL_ANDROID:1835012,MESSENGER_GRAPH:1900544,MESSENGER_GRAPH_SELECT_CONTACT:1900545,MESSENGER_CHAT:1966080,MESSENGER_CHAT_FROM_JEWEL__THREAD_LIST:1966081,MESSENGER_CHAT_IN_THREAD:1966082,MESSENGER_CHAT_FORWARD:1966083,MESSENGER_CHAT_NOTE_POPOVER:1966084,MESSENGER_ARCHIVED_THREADS:2031616,MESSENGER_ARCHIVED_THREADS_ARCHIVED_THREADS_FOLDER:2031617,JEWEL:2097152,JEWEL_THREAD_LIST:2097153,JEWEL_SEARCH:2097154,JEWEL_NEW_MESSAGE:2097155,JEWEL_NESTED_FOLDER:2097156,CHATHEADS:2162688,CHATHEADS_RECENT_THREADS:2162689,CHATHEADS_OVERFLOW:2162690,CHATHEADS_NEW_MESSAGE:2162691,SIDEBAR:2228224,SIDEBAR_CONTACTS_LIST:2228225,SIDEBAR_CONTACTS_SEARCH:2228226,SIDEBAR_CONTACTS_GROUPS:2228227,SIDEBAR_CONTACTS_COMMUNITY_CHATS:2228228,MESSENGER_COMMUNITY_MESSAGING:2293760,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_CHANNEL:2293761,MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT:2293762,MESSENGER_COMMUNITY_MESSAGING_CHANNEL_CREATION_NOTIFICATION:2293763,MESSENGER_COMMUNITY_MESSAGING_FRIEND_JOINED_COMMUNITY_CHAT_NOTIFICATION:2293764,MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG:2293765,FB_PLATFORM_LOGIN:2359296,FB_PLATFORM_LOGIN_LOGIN_CONNECT_WITH_MESSENGER:2359297,CONTACT_MANAGER:2424832,CONTACT_MANAGER_CONTACT_SHARE:2424833,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_LIST:2424834,CONTACT_MANAGER_PEOPLE_TAB_CONTACT_SEARCH:2424835,CONTACT_MANAGER_ICON_CONTACT_LIST:2424836,CONTACT_MANAGER_ICON_CONTACT_SEARCH:2424837,MESSAGING_INBOX_IN_BLUE:2490368,MESSAGING_INBOX_IN_BLUE_THREAD_LIST:2490369,MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:2490370,MESSAGING_INBOX_IN_BLUE_INBOX_ICON:2490371,MESSAGING_INBOX_IN_BLUE_SWIPE_FROM_RIGHT:2490372,MESSAGING_INBOX_IN_BLUE_MIB_NOTIFICATION:2490373,MESSAGING_INBOX_IN_BLUE_ACTIVE_NOW:2490374,MESSAGING_INBOX_IN_BLUE_SUGGESTED_CHATS:2490375,MESSAGING_INBOX_IN_BLUE_CHAT_PREVIEW_BANNER:2490376,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_CORE_NULL_STATE:2490377,MESSAGING_INBOX_IN_BLUE_MESSAGE_REQUESTS:2490378,MESSAGING_INBOX_IN_BLUE_SPAM:2490379,MESSAGING_INBOX_IN_BLUE_FB_GROUPS:2490380,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_BUTTON:2490381,MESSAGING_INBOX_IN_BLUE_MESSENGER_PEEK_STATE_TOOLTIP:2490382,MESSAGING_INBOX_IN_BLUE_BROADCAST_FLOW:2490383,MESSAGING_INBOX_IN_BLUE_THREAD_VIEW_HEADER:2490384,MESSAGING_INBOX_IN_BLUE_PRIVACY_SETTINGS:2490385,MESSAGING_INBOX_IN_BLUE_ARCHIVED_CHATS:2490386,MESSAGING_INBOX_IN_BLUE_UNIVERSAL_SEARCH:2490387,MESSAGING_INBOX_IN_BLUE_INBOX_SEARCH_BAR:2490388,MIB_NOTIFICATION:2555904,MIB_NOTIFICATION_PUSH_NOTIFICATION:2555905,MIB_NOTIFICATION_JEWEL_NOTIFICATION:2555906,MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:2555907,MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:2555908,MESSENGER_RESTRICTED_ACCOUNTS:2621440,ARMADILLO_CUTOVER_THREAD_LINKING_MESSAGE:2686976,CALLS_TAB:2752512,MINI_SHOP_VIEW_MENU_BUTTON:2818048,SHARESHEET:2883584,SHARESHEET_GENERALIZED_BROADCAST_FLOW:2883585,SHARESHEET_OFF_PLATFORM_SHARING_H_SCROLL:2883586,SHARESHEET_BROADCAST_CHANNEL:2883587,UFI:2949120,UFI_GENERALIZED_BROADCAST_FLOW:2949121,CHATHEAD_CLICK_COLLAPSED:3014656,TIMELINE_MESSAGE_BUTTON:3080192,DIRECT_REPLY_INTENT:3145728,FB_GROUPS:3211264,FB_GROUPS_INBOX:3211265,FB_GROUPS_PICKER_EXISTING_CHAT:3211266,FB_GROUPS_PICKER_JOIN_CHAT:3211267,FB_GROUPS_MEMBER_LIST:3211268,FB_GROUPS_INLINE_COMPOSER:3211269,FB_GROUPS_SCOPED_SEARCH:3211270,FB_GROUPS_UNJOINED_MALL_HEADER:3211271,FB_GROUPS_DISCOVER_FEED_UNIT:3211272,FB_GROUPS_ANSWER_AGENT_CONTEXTUAL_PROFILE:3211273,FB_GROUPS_ANSWER_AGENT_FOLLOWUP_SECTION:3211274,FB_GROUPS_NOTIFICATION_MESSAGING_IN_BLUE_DIRECT_MESSAGE:3211275,FB_GROUPS_UGC:3211276,FB_GROUPS_UGC_POST:3211277,FB_GROUPS_UGC_MALL_PLINK:3211278,FB_GROUPS_UGC_MALL_NUX:3211279,FB_GROUPS_UGC_ADMIN_TESTING:3211280,FB_GROUPS_UGC_INTRO_POST:3211281,FB_GROUPS_UGC_QP:3211282,FB_GROUPS_UGC_DEEP_DIVE_GET_ANSWER_PILL:3211283,FB_GROUPS_UGC_DEEP_DIVE_PILL:3211284,FB_GROUPS_UGC_FAB:3211285,FB_GROUPS_UGC_REMINDER_NOTIF:3211286,FB_GROUPS_UGC_COMMENT_RESPONSE_UPSELL:3211287,FB_GROUPS_UGC_CONTEXTUAL_PROFILE:3211288,FB_GROUPS_UGC_DEEP_DIVE_ASK_SOMETHING_ELSE:3211289,FB_GROUPS_UGC_CONTEXTUAL_CARD_ASK_SOMETHING_ELSE:3211290,DEVICES:3276800,DEVICES_STELLA:3276801,FB_WELLBEING:3342336,FB_WELLBEING_INCALL_UNBLOCKING_NOTIFICATION:3342337,MESSENGER_DEEP_LINKING:3407872,READ_ONLY_CUTOVER_THREAD:3473408,READ_ONLY_CUTOVER_THREAD_ARMADILLO_THREAD:3473409,READ_ONLY_CUTOVER_THREAD_THREAD_DETAIL:3473410,ARMADILLO_THREAD:3538944,ARMADILLO_THREAD_READ_ONLY_CUTOVER_THREAD:3538945,ARMADILLO_THREAD_EXTERNAL_LINK:3538946,FB_SHORTS:3604480,FB_SHORTS_PROFILE:3604481,FB_SHORTS_REACTORS_LIST_MESSAGE_BUTTON:3604482,SEND_PLUGIN:3670016,SEND_AS_MESSAGE_FROM_NT:3735552,MESSENGER_PUBLIC_CHATS_MESSAGING:3801088,MESSENGER_GROWTH:3866624,MESSENGER_GROWTH_NOTIFICATIONS_ENTRYPOINT:3866625,MESSENGER_GROWTH_MESSAGE_REQUEST_JEWEL:3866626,MESSENGER_GROWTH_FRIENDLY_FEED_ACTIVE_NOW:3866627,FRIENDS_HOME:3932160,FRIENDS_HOME_ACTIVE_NOW:3932161,FRIENDS_HOME_MESSAGE_NEW_FRIENDS:3932162,FRIENDS_HOME_POST_ACCEPT_MESSAGING:3932163,FRIENDS_HOME_SENDER_POST_ACCEPT_WAVE:3932164,EXTERNAL_LINK_XMA:3997696,EXTERNAL_LINK_XMA_FROM_COMPOSER:3997697,EXTERNAL_LINK_XMA_FROM_DEEP_LINKING:3997698,EXTERNAL_LINK_XMA_FROM_SHARE_EXTENSION:3997699,FB_NOTIFICATIONS:4063232,QUICK_PROMOTION:4128768,QUICK_PROMOTION_CTA:4128769,QUICK_PROMOTION_INTERSTITIAL:4128770,QUICK_PROMOTION_TOP_BANNER:4128771,FBM_IN_APP_NOTIFS:4194304,CREATOR_SUPPORT:4259840,CREATOR_SUPPORT_MESSENGER_TOAST:4259841,FB_INSTANT_GAME:4325376,COMMUNITY_CHATS_IN_FEED:4390912,COMMUNITY_CHATS_IN_FEED_PERMALINK:4390913,UNIFIED_BUSINESS_INBOX:4456448,ROLLCALL:4521984,HIGHLIGHTS_TAB:4587520,HIGHLIGHTS_TAB_FEED_INLINE:4587521,HIGHLIGHTS_TAB_MEDIA_VIEWER:4587522,HIGHLIGHTS_TAB_THREAD_VIEW:4587523,HIGHLIGHTS_TAB_FEED_INLINE_CONNECTED_CHAT:4587524,HIGHLIGHTS_TAB_FEED_INLINE_LOCAL_EVENT:4587525,HIGHLIGHTS_TAB_FEED_INLINE_FRIENDS_UPDATE:4587526,HIGHLIGHTS_TAB_FEED_INLINE_BIRTHDAY:4587527,HIGHLIGHTS_TAB_MEDIA_VIEWER_CONNECTED_CHAT:4587528,HIGHLIGHTS_TAB_MEDIA_VIEWER_FRIENDS_UPDATE:4587529,HIGHLIGHTS_TAB_THREAD_VIEW_CONNECTED_CHAT:4587530,HIGHLIGHTS_TAB_THREAD_VIEW_LOCAL_EVENT:4587531,HIGHLIGHTS_TAB_THREAD_VIEW_FRIENDS_UPDATE:4587532,HIGHLIGHTS_TAB_THREAD_VIEW_BIRTHDAY:4587533,HIGHLIGHTS_TAB_THREAD_VIEW_NOTE:4587534,HIGHLIGHTS_TAB_FEED_INLINE_NOTE:4587535,HIGHLIGHTS_TAB_CONNECTED_BROADCAST_CHANNEL_SHARE_SHEET:4587536,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_BIRTHDAY:4587537,HIGHLIGHTS_TAB_SHARE_SHEET_HOLIDAY_CARD:4587538,HIGHLIGHTS_TAB_META_AI_BIRTHDAY:4587539,HIGHLIGHTS_TAB_QUICK_REACT_CONNECTED_CHAT:4587540,HIGHLIGHTS_TAB_QUICK_REACT_LOCAL_EVENT:4587541,HIGHLIGHTS_TAB_QUICK_REACT_FRIENDS_UPDATE:4587542,HIGHLIGHTS_TAB_QUICK_REACT_BIRTHDAY:4587543,HIGHLIGHTS_TAB_QUICK_REACT_STORIES:4587544,HIGHLIGHTS_TAB_QUICK_REACT_NOTE:4587545,HIGHLIGHTS_TAB_QUICK_REACT_LIFE_EVENT:4587546,HIGHLIGHTS_TAB_META_AI_FAB:4587547,HIGHLIGHTS_TAB_FEED_INLINE_CHAT_WITH_FRIENDS:4587548,HIGHLIGHTS_TAB_THREAD_VIEW_CHAT_WITH_FRIENDS:4587549,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_LOCAL_EVENT:4587550,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FRIENDS_UPDATE:4587551,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_NOTE:4587552,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_CHAT_WITH_FRIENDS:4587553,HIGHLIGHTS_TAB_FB_POST_MEMORIES_SHARE_SHEET:4587554,HIGHLIGHTS_TAB_FEED_INLINE_FB_POST_MEMORIES:4587555,HIGHLIGHTS_TAB_THREAD_VIEW_FB_POST_MEMORIES:4587556,HIGHLIGHTS_TAB_QUICK_REACT_FB_POST_MEMORIES:4587557,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER_FB_POST_MEMORIES:4587558,MARKETPLACE_INBOX:4653056,ONE_TAP_MESSAGE_QUICK_SHARE:4718592,HIGHLIGHTS_TAB_STORIES_TRAY:4784128,FB_BIRTHDAY_CENTER:4849664,MESSENGER_SIRIKIT:4915200,MESSENGER_SIRIKIT_CALLKIT_QUICK_REPLY:4915201,MESSENGER_SIRIKIT_VOICE_COMMAND:4915202,CLICK_TO_SUBSCRIBE_AD:4980736,HIGHLIGHTS_TAB_SMART_REPLY_DRAWER:5046272,FB_UNIVERSAL_SEARCH:5111808,FB_UNIVERSAL_SEARCH_NULL_STATE_SUGGESTED:5111809,FB_UNIVERSAL_SEARCH_NULL_STATE_RECENT:5111810,FB_UNIVERSAL_SEARCH_QUERY_RESULTS:5111811,FBLITE_MESSAGING:5177344,FBLITE_MESSAGING_FROM_EXTERNAL:5177345,FBLITE_MESSAGING_FORWARD_FROM_BROADCAST_FLOW:5177346,FBLITE_MESSAGING_IN_THREAD:5177349,FBLITE_MESSAGING_ACTIVE_NOW:5177352,FBLITE_MESSAGING_ARCHIVED_CHATS:5177353,FBLITE_MESSAGING_SPAM:5177354,FBLITE_MESSAGING_MESSAGE_REQUESTS:5177355,FBLITE_MESSAGING_MARKETPLACE:5177356,FBLITE_MESSAGING_THREAD_MEMBERS_LIST:5177357,FBLITE_MESSAGING_READONLY_VERSION_OF_CUTOVER_THREAD:5177358,FBLITE_MESSAGING_QP:5177359,FBLITE_MESSAGING_META_AI_PROFILE_SHARE:5177360,FBLITE_MESSAGING_IMAGE_VIEWER_REPLY_COMPOSER:5177361,FBLITE_MESSAGING_META_AI_BOOKMARK:5177362,FBLITE_MESSAGING_NOTIFICATION:5242880,FBLITE_MESSAGING_NOTIFICATION_IN_THREAD_REPLY:5242881,FBLITE_MESSAGING_NOTIFICATION_DIRECT_REPLY:5242882,FBLITE_INBOX:5308416,FBLITE_INBOX_UNIVERSAL_SEARCH:5308417,FBLITE_INBOX_PEOPLE_PICKER:5308418,FBLITE_INBOX_RECENT_THREADS:5308419,FBLITE_INBOX_REMAINING_THREADS:5308420,FBLITE_INBOX_INBOX_FOLLOWUP:5308421,FBLITE_INBOX_THREAD_WITH_DRAFT_MESSAGE:5308422,FBLITE_INBOX_META_AI_FAB:5308423,SHARED_ALBUM:5373952,QUICK_REPLIES:5439488,QUICK_REPLIES_TRAY:5439489,MESSENGER_CTA_AFTER_CALL_ENDS:5505024,MESSENGER_CONVERSATION_SHORTCUT:5570560,CC_ADMIN_SEND_MESSAGE_HINT_CARD:5636096,CC_MEMBER_SEND_MESSAGE_HINT_CARD:5701632,MSGR_AVATAR_DETAILS:5767168,PRIVATE_SHARING_FORWARD_SUPER_SHARE_SHEET:5832704,MEMORIES:5898240,META_AI_TAB:5963776,MEMORIES_NOTIFICATION:6029312,MEMORIES_QUICK_PROMOTION:6094848,MEMORIES_HIGHLIGHTS_TAB:6160384,MEMORIES_LIST:6225920,MSGR_PYMK_LIST_SCREEN:6291456,INSTAGRAM_WEB_SENDS:6356992,AI_SUGGESTED_PROMPT_TRAY:6422528,AI_SUGGESTED_PROMPT_ICEBREAKER:6488064,COMMUNITY_INVITE:6553600,COMMUNITY_CHAT_INVITE:6619136,AI_DISCOVERY_BOTTOM_SHEET:6684672,IN_THREAD_INVITE_MODEL:6750208,SUPPORT_FOLDER:6815744,MARKETPLACE_PDP:6881280,QR_CODE:6946816,WRITE_WITH_AI:7012352,AI_HOME_CHAT_WITH_AI:7077888,AI_HOME_INBOX_QP:7143424,AI_AGENT_MESSAGE_SHARE:7208960,AI_HOME_FROM_THREAD:7274496,AI_HOME_FROM_THREAD_DETAIL:7274497,AI_HOME_FROM_THREAD_HEADER:7274498,AI_HOME_FROM_THREAD_META_AI_THREAD_DETAIL:7274499,AI_HOME_FROM_THREAD_META_AI_THREAD_HEADER:7274500,AI_HOME_FROM_FOLDER_LIST:7340032,AI_HOME_FROM_FB_BOOKMARK:7405568,FB_FANDOM:7471104,AI_HOME_INBOX_RETENTION_QP:7536640,MEMORIES_INBOX_TRAY:7602176,MESSENGER_VOICEMAIL:7667712,AI_UGC_FB_FEED_QP:7733248,MESSENGER_INBOX_IP_QP:7798784,COMMUNITY_GROUP_CHAT_UPGRADES_INVITE:7864320,MESSENGER_SECRET_CONVERSATIONS:7929856,MESSENGER_SECRET_CONVERSATIONS_SECRET_CONVERSATIONS_FOLDER:7929857,CROSS_CUSTOMER_SUPPORT:7995392,CROSS_CUSTOMER_SUPPORT_FB_HELP_CENTER_META_AI_CARD:7995393,AI_LOOKUP:8060928,PINNED_MESSAGES_THREAD_DETAILS:8126464,CM_MEMBER_REPORTS_BLOKS:8192e3,MEMORIES_TEMPLATE:8257536,FB_TREP_UGC_CREATION:8323072,MESSENGER_STORIES_TAB:8388608,MESSENGER_STORIES_TAB_META_AI_FAB:8388609,META_AI_ENTITY_DETECTION:8454144,AI_HOME_FROM_AI_STUDIO_TAB:8519680,QR_CODE_LINK:8585216,META_AI_PROMPT_SHEET:8650752,UGC_BOT_IMMERSIVE_THREAD:8716288,UGC_BOT_IMMERSIVE_THREAD_AI_STUDIO_TAB:8716289,UGC_BOT_IMMERSIVE_THREAD_INBOX:8716290,UGC_BOT_IMMERSIVE_THREAD_AI_HOME:8716291,IGD_WEB_CHAT_TAB:8781824,IGD_WEB_CHAT_TAB_IN_THREAD:8781825,IGD_WEB_CHAT_TAB_NOTIFICATION:8781826,FB_PYMK_FEED_MESSAGE_BUTTON:8847360,MSGR_UGC_IMMERSIVE_THREAD:8912896,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB:8912897,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB:8912898,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB:8912899,MSGR_UGC_IMMERSIVE_THREAD_AI_STUDIO_TAB_AI_HOME:8912900,MSGR_UGC_IMMERSIVE_THREAD_COMPOSER_AI_HOME:8912901,MSGR_UGC_IMMERSIVE_THREAD_INBOX:8912902,MSGR_UGC_IMMERSIVE_THREAD_ACTIVE_NOW:8912903,MSGR_UGC_IMMERSIVE_THREAD_META_AI_HEADER_AI_HOME:8912904,MSGR_UGC_IMMERSIVE_THREAD_UGC_HEADER_AI_HOME:8912905,MSGR_UGC_IMMERSIVE_THREAD_THREAD_DETAIL_AI_HOME:8912906,MSGR_UGC_IMMERSIVE_THREAD_META_AI_THREAD_DETAIL_AI_HOME:8912907,MSGR_UGC_IMMERSIVE_THREAD_DEEPLINK:8912908,MSGR_UGC_IMMERSIVE_THREAD_NOTIFICATION:8912909,MSGR_UGC_IMMERSIVE_THREAD_AI_CREATION:8912910,MSGR_UGC_IMMERSIVE_THREAD_LEFT_NAV_AI_STUDIO_TAB_AI_HOME:8912911,MSGR_UGC_IMMERSIVE_THREAD_MORE_MENU_AI_STUDIO_TAB_AI_HOME:8912912,AI_THREAD_FROM_FF_THREAD:8978432,AI_THREAD_FROM_FF_THREAD_FF_THREAD_VIEW_META_AI_TASK:8978433,PHONE_NUMBER_MESSAGES:9043968,FUNDRAISER_SUPPORTERS_LIST:9109504,META_AI_SUMMARY:9175040,META_AI_SUMMARY_IN_THREAD:9175041,MESSENGER_NOTES:9240576,MESSENGER_NOTES_SELF_CONSUMPTION_DETAILS_LIST:9240577,MESSENGER_NOTES_NOTE_PROMPT_CONSUMPTION:9240578,MESSENGER_NOTES_NOTE_PROMPT_RESPONSE_CONSUMPTION:9240579,POKES_PLUS:9306112,POKES_PLUS_POKE_PLUS_DASHBOARD:9306113,STORIES_ATTRIBUTION:9371648,STORIES_ATTRIBUTION_STACKED_STORIES:9371649,ARMADILLO_CUTOVER_THREAD_BANNER:9437184,DMA_MSPLIT_FALLBACK_THREAD_NAVIGATION:9502720});f["default"]=a}),66);
__d("LSQplMarkEnd.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);i?c("QPLUserFlow").endSuccess(a,{instanceKey:e}):c("QPLUserFlow").endFailure(a,"failure",{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplMarkEnd";g["default"]=a}),98);
__d("LSQplStartTrace.nop",["EBMarkerIdToQPLEvent","Promise","QPLUserFlow","WAHashStringToNumber","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,e,f,g,i,j){try{a=c("nullthrows")(d("EBMarkerIdToQPLEvent").markerIdToQPLEvent(f));e=d("WAHashStringToNumber").hashStringToNumber(g);c("QPLUserFlow").start(a,{instanceKey:e});return(h||(h=b("Promise"))).resolve()}catch(a){return(h||(h=b("Promise"))).resolve()}};a.__nop_name__="LSQplStartTrace";g["default"]=a}),98);
__d("LSRemoveBlindedTokens",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(308).fetch(),function(b){return b.configId===a[0]}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsRemoveBlindedTokensStoredProcedure";a.__tables__=["secure_acs_blinded_tokens"];e.exports=a}),null);
__d("LSReplyMessageAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,PHOTO:1,VIDEO:2,GIF:3,STICKER:4,LINK:5,MULTIPHOTO:6,PERMANENT_RAVEN_PHOTO:7,PERMANENT_RAVEN_VIDEO:8,AUDIO:10,ROLL_CALL_PHOTO_CONTRIBUTION:11,ROLL_CALL_VIDEO_CONTRIBUTION:12,FEED_POST:13,POWER_UP:14,XMA:15,ROLL_CALL_TEXT_CONTRIBUTION:16,BLOKS_XMA:17,EPHEMERAL_RAVEN_MESSAGE:18,THIRD_PARTY_STICKER:19,SOUND_BITE:9});f["default"]=a}),66);
__d("LSVerifyE2EEMetadataThreadExistsV2",["LSCheckIfAuthoritativeThreadMissingMiActMapping","LSCreateOfflineThreadingID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(b){return c.i64.neq(a[1],void 0)?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[void 0,void 0],d[3]=e[0],d[4]=e[1],e):(c=b.item,e=[a[1],c.authorityLevel],d[3]=e[0],d[4]=e[1],e)})},function(a){return a=[d[3],d[4]],d[0]=a[0],d[1]=a[1],a}]):c.resolve((b=[void 0,void 0],d[0]=b[0],d[1]=b[1],b))},function(e){return c.i64.neq(d[0],void 0)?c.sequence([function(e){return c.i64.neq(d[1],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSCheckIfAuthoritativeThreadMissingMiActMapping"),d[0]).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.i64.gt(a[2],d[1])?c.forEach(c.db.table(9).fetch([[[d[0]]]]),function(b){var c=b.update;b.item;return c({authorityLevel:a[2]})}):c.resolve()},function(e){return d[3]||c.i64.gt(a[2],d[1])?(d[4]=new c.Map(),d[4].set("thread_fbid",d[0]),d[4].set("force_upsert",!1),d[4].set("use_open_messenger_transport",!1),d[4].set("sync_group",c.i64.cast([0,95])),d[4].set("metadata_only",!1),d[4].set("preview_only",!1),d[5]=d[4].get("thread_fbid"),d[6]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[5]),c.i64.cast([0,209]),d[6],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()}]):c.resolve()},function(a){return d[2]=d[0]}]):c.sequence([function(e){return c.i64.neq(a[1],void 0)?c.sequence([function(e){return c.i64.neq(a[2],c.i64.cast([0,20]))?(d[11]=new c.Map(),d[11].set("thread_fbid",a[1]),d[11].set("force_upsert",!1),d[11].set("use_open_messenger_transport",!1),d[11].set("sync_group",c.i64.cast([0,95])),d[11].set("metadata_only",!1),d[11].set("preview_only",!1),d[12]=d[11].get("thread_fbid"),d[13]=c.toJSON(d[11]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[12]),c.i64.cast([0,209]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):c.resolve()},function(b){return d[3]=a[1]}]):c.sequence([function(a){return d[11]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[11]).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[3]=d[12]}])},function(b){return c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))?(b=["inbox",c.i64.cast([0,0])],d[4]=b[0],d[5]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,1]))?(b=["pending",c.i64.cast([-1,4294967295])],d[11]=b[0],d[12]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,2]))?(b=["other",c.i64.cast([-1,4294967294])],d[13]=b[0],d[14]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,3]))?(b=["spam",c.i64.cast([-1,4294967293])],d[15]=b[0],d[16]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,5]))?(b=["hidden",c.i64.cast([-1,4294967292])],d[17]=b[0],d[18]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,4]))?(b=["archived",c.i64.cast([-1,4294967286])],d[19]=b[0],d[20]=b[1],b):(c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,15]))?(b=["restricted",c.i64.cast([-1,4294967281])],d[21]=b[0],d[22]=b[1],b):(b=["inbox",c.i64.cast([0,0])],d[21]=b[0],d[22]=b[1],b),b=[d[21],d[22]],d[19]=b[0],d[20]=b[1],b),b=[d[19],d[20]],d[17]=b[0],d[18]=b[1],b),b=[d[17],d[18]],d[15]=b[0],d[16]=b[1],b),b=[d[15],d[16]],d[13]=b[0],d[14]=b[1],b),b=[d[13],d[14]],d[11]=b[0],d[12]=b[1],b),b=[d[11],d[12]],d[4]=b[0],d[5]=b[1],b),d[6]=c.i64.cast([0,1083495711]),d[7]=c.i64.cast([0,1024]),d[8]=c.i64.cast([0,0]),d[9]=c.i64.cast([0,0]),d[10]=c.i64.cast([0,134217728]),c.forEach(c.filter(c.db.table(9).fetch([[[d[3]]]]),function(b){return c.i64.eq(b.threadKey,d[3])&&c.i64.lt(b.authorityLevel,a[2])}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[3],mailboxType:c.i64.cast([0,4096]),threadType:a[0],folderName:d[4],lastActivityTimestampMs:c.i64.cast([-1,4294967295]),lastReadWatermarkTimestampMs:c.i64.cast([-1,4294967295]),removeWatermarkTimestampMs:c.i64.cast([-1,4294967295]),ongoingCallState:c.i64.cast([0,0]),parentThreadKey:d[5],authorityLevel:a[2],capabilities:d[6],capabilities2:d[7],capabilities3:d[8],capabilities4:d[9],capabilities5:d[10],unsendLimitMs:c.i64.cast([-1,4294967295]),syncGroup:c.i64.cast([0,95]),isHidden:!0,clientThreadKey:d[3]})},function(a){return d[2]=d[3]}])},function(a){return e[0]=d[2]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxVerifyE2EEMetadataThreadExistsV2StoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure",["LSSynchronousPromise","LSVerifyE2EEMetadataThreadExistsV2","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSVerifyE2EEMetadataThreadExistsV2"),e.threadType,e.threadKey,e.authorityLevel);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSXmaContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEST:-1,NONE:0,IG_SINGLE_IMAGE_POST_SHARE:1e3,IG_MULTIPOST_SHARE:1001,IG_STORY_REPLY:1002,IG_STORY_PHOTO_SHARE:1003,IG_STORY_PHOTO_MENTION:1004,IG_CLIPS_SHARE:1005,IG_SINGLE_VIDEO_POST_SHARE:1006,IG_STORY_VIDEO_SHARE:1007,IG_STORY_REACTION:1008,IG_IGTV_SHARE:1009,IG_SHOP_SHARE:1010,IG_PROFILE_SHARE:1011,IG_STORY_PHOTO_HIGHLIGHT_SHARE:1012,IG_STORY_VIDEO_HIGHLIGHT_SHARE:1013,IG_STORY_VIDEO_MENTION:1014,IG_STORY_HIGHLIGHT_REPLY:1015,IG_STORY_HIGHLIGHT_REACTION:1016,IG_EXTERNAL_LINK:1017,IG_RECEIVER_FETCH:1018,IG_TEXT_POST_APP_SHARE:1019,IG_MULTI_MEDIA_RESPONSE:1020,FB_FEED_SHARE:2e3,FB_STORY_REPLY:2001,FB_STORY_SHARE:2002,FB_STORY_MENTION:2003,FB_FEED_VIDEO_SHARE:2004,FB_GAMING_CUSTOM_UPDATE:2005,FB_PRODUCER_STORY_REPLY:2006,FB_EVENT:2007,FB_FEED_POST_PRIVATE_REPLY:2008,FB_SHORT:2009,FB_COMMENT_MENTION_SHARE:2010,FB_STORY_LWI_REPLY:2011,FB_COMMENT_SHARE:2012,FB_POST_MENTION:2013,FB_PROFILE_DIRECTORY_ITEM:2014,FB_FEED_POST_REACTION_REPLY:2015,MSG_EXTERNAL_LINK_SHARE:3e3,MSG_P2P_PAYMENT:3001,MSG_LOCATION_SHARING:3002,MSG_LOCATION_SHARING_V2:3003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:3004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:3005,MSG_RECEIVER_FETCH:3006,MSG_IG_MEDIA_SHARE:3007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:3008,MSG_REELS_LIST:3009,MSG_CONTACT:3010,MSG_THREADS_POST_SHARE:3011,MSG_FILE:3012,MSG_AVATAR_DETAILS:3013,MSG_AI_CONTACT:3014,MSG_MEMORIES_SHARE:3015,MSG_SHARED_ALBUM_REPLY:3016,MSG_SHARED_ALBUM:3017,MSG_OCCAMADILLO_XMA:3018,MSG_GEN_AI_1P_SEARCH_RESULT:3019,MSG_EARLY_ACCESS_FB_SHARE:3020,MSG_GEN_AI_SUBSCRIPTION:3021,MSG_GEN_AI_REMINDER:3022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:3023,MSG_MAGICAL_MESSENGER_PLACES:3024,MSG_RECEIVER_FETCH_FALLBACK:3025,MSG_MAGICAL_MESSENGER_TASKS:3026,MSG_NOTE_REPLY:3027,MSG_NOTE_MENTION:3028,MSG_PROMPT_REPLY:3029,MSG_GEN_AI_TASK:3030,MSG_GEN_AI_RICH_RESPONSE:3040,MSG_RECEIVER_FETCH_ENT_DELETED:3041,MSG_GEN_AI_APP_DOWNLOAD_LINK:3042,MSG_GEN_AI_ENTITY:3043,MSG_OPG_P2P_PAYMENT:3044,RTC_AUDIO_CALL:4e3,RTC_VIDEO_CALL:4001,RTC_MISSED_AUDIO_CALL:4002,RTC_MISSED_VIDEO_CALL:4003,RTC_GROUP_AUDIO_CALL:4004,RTC_GROUP_VIDEO_CALL:4005,RTC_MISSED_GROUP_AUDIO_CALL:4006,RTC_MISSED_GROUP_VIDEO_CALL:4007,RTC_ONGOING_AUDIO_CALL:4008,RTC_ONGOING_VIDEO_CALL:4009,DATACLASS_SENDER_COPY:5e3,OC_AVATAR_STATIC_STICKER:6e3,LIVE_LOCATION:7e3});f["default"]=a}),66);
__d("MAWAppVersion",["SiteData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return"302.0."+c("SiteData").client_revision}function b(){return{primary:302,secondary:0,tertiary:c("SiteData").client_revision}}g.getVersionNumber=a;g.getAppVersionParts=b}),98);
__d("MAWODSProxy",["CurrentMessengerUser","ExecutionEnvironment","ODS","WABridge","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=!((b=c("gkx")("23949"))!=null?b:!1);function a(a,b){var e=a.amount,f=a.entity;a=a.key;b===void 0&&(b=!0);(i||(i=c("ExecutionEnvironment"))).isInWorker&&!j?d("WABridge").getBridge().fireAndForget("event","odsBumpEntityKey",{amount:e,entity:f,key:a},b):(h||(h=d("ODS"))).bumpEntityKey(3185,f,a+"."+(d("CurrentMessengerUser").getAppID()||"unknown"),e)}g.odsBumpEntityKey=a}),98);
__d("WAGlobals",["WAJids","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);h=function(){return a};return a}var i=null;function a(a){i=a}function j(){if(i==null)throw c("err")("WaMsgr api called before set");return i}function k(){var a;return(a=j().myJids)==null?void 0:a.deviceJid}function b(){var a;return(a=j().myJids)==null?void 0:a.userJid}function e(a){return d("WAJids").extractUserJid(a)===d("WAJids").extractUserJid(k())}function f(){return j().config}function l(){return j().dependencies}var m="WAOneQueue is not defined";function n(){var a=j().waOneQueue;if(a==null){d("WALogger").ERROR(h(),m);throw c("err")(m)}return a}function o(){return j().hmacKey}g.setGlobals=a;g.getMyDeviceJid=k;g.getMyUserJid=b;g.isPeerDevice=e;g.getConfig=f;g.getDependencies=l;g.getWaOneQueue=n;g.getHMACKey=o}),98);
__d("MAWUserJidWrapper",["ExecutionEnvironment","MAWCurrentUser","MAWODSProxy","WAGlobals","WAJids","WAOdsEnums"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WAJids").toMsgrUserJid(d("MAWCurrentUser").getID());if((h||(h=c("ExecutionEnvironment"))).isInWorker){var b=d("WAGlobals").getMyUserJid();d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_MY_USER_JID_GETTER,key:b===a?"same":"different"});return b}return a}g.getMyUserJid=a}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){if(a==null||a===d("WAJids").AUTHOR_SYSTEM)return null;if(d("WAJids").isAuthorMe(a))return d("MAWUserJidWrapper").getMyUserJid();var b=d("WAJids").authorAsUserJid(a);if(b==null||c("isStringNullOrEmpty")(d("WAJids").userIdFromJid(b)))return null;else return d("WAJids").authorAsUserJid(a)};g.getAuthorUserJid=a}),98);
__d("MAWReliabilityMonitor",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["PENDING","OK","ERROR","UNKNOWN"]);c=function(){function a(){this.$1=new Map(),this.$2=new Map(),this.$3=[]}var b=a.prototype;b.startMonitoring=function(a,b){b=new h(a,b,this);this.$1.set(a,b);this.recordReport(b);return b};b.stopMonitoring=function(a){this.$1["delete"](a.identifier),this.$2["delete"](a.identifier)};b.recordReport=function(a){this.$2.set(a.identifier,babelHelpers["extends"]({},a.selfAssessmentFn(),{identifier:a.identifier,timestamp:Date.now()})),this.$4()};b.onAggregatedReportChange=function(a){this.$3.push(a)};b.$4=function(){var a=this.getAggregatedReportEntity();this.$3.forEach(function(b){return b(a)})};b.getAggregatedReportEntity=function(){return new g(this.$2)};b.triggerAllSelfAssessments=function(){var a=this;this.$1.forEach(function(b){a.recordReport(b)})};b.getAggregatedReport=function(){this.triggerAllSelfAssessments();return this.$2};b.TEST_ONLY_reset=function(){this.$1.clear(),this.$2.clear(),this.$3=[]};return a}();var g=function(){function a(a){this.$1=a}var b=a.prototype;b.toAckPayloadFormat=function(){return Array.from(this.$1.values())};b.toString=function(){var a=Object.fromEntries(this.$1);return JSON.stringify(a)};return a}(),h=function(){function a(a,b,c){this.identifier=a,this.selfAssessmentFn=b,this.$1=c}var b=a.prototype;b.stopMonitoring=function(){this.$1.stopMonitoring(this)};b.updateState=function(){this.$1.recordReport(this)};return a}();d=new c();f.HealthReportState=a;f.ReliabilityAggregatedReport=g;f.ReportableModule=h;f.MAWReliabilityMonitorSingleton=d}),66);
__d("MAWSetupWorkerAuxStateForLogging",["nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=[],i=3,j={getWorkerAge:function(){if(j.workerStartTime!=null)return Math.floor((Date.now()-c("nullthrows")(j.workerStartTime))/1e3)},restartMessageTypes:[],restartReasons:[],workerStartTime:null,workerTerminatedPermanently:!1};function a(){j.workerStartTime=Date.now()}function b(a){h.push(a),h.length>i&&h.shift()}function d(){return h.join(",")}g.HEART_BEAT_HISTORY=h;g.WorkerLifeCycleState=j;g.resetWorkerCreationTime=a;g.addWorkerHeartbeatToHistory=b;g.getHeartbeatHistoryAsString=d}),98);
__d("MAWTrackPendingOccamadilloThreads",["Deferred","LSDatabaseSingleton","LSInitSyncCompleteSubscription","LSIntEnum","LSPlatformLsInitLog","MAWMIC","MAWMICSchema","QuickPerformanceLogger","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h={},h[d("MAWMICSchema").ANNOTATIONS.occamadilloBatchesSentToWorker]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync]=0,h[d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads]=0,h);(function(){Object.keys(l).forEach(function(a){d("MAWMIC").addIntAnnotation(a,0)})})();function m(a){d("MAWMIC").addIntAnnotation(a,++l[a])}function a(){return l.occamadilloBatchesSentToWorker}var n=new(c("Deferred"))(),o=new Set(),p=new Set(),q=new Set(),r=new Set();function e(a){a=a.callingSource;r.add((k||(k=d("LSIntEnum"))).toNumber(a));d("MAWMIC").addIntArrayAnnotation(d("MAWMICSchema").ANNOTATIONS.occamadilloCallingSources,Array.from(r))}function f(a){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_start);if(o.has(a)){m(d("MAWMICSchema").ANNOTATIONS.occamadilloDuplicateThreads);return}p.add(a);d("LSPlatformLsInitLog").LsSync.isRunning()&&q.add(a);(i||(i=c("QuickPerformanceLogger"))).currentTimestamp();o.add(a);d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);d("LSPlatformLsInitLog").LsSync.hasEnded()&&m(d("MAWMICSchema").ANNOTATIONS.occamadilloPendingThreadsAfterInitSync)}function s(){d("MAWMIC").addBoolAnnotation("threadMappingAcked",!0)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("gkx")("2661"))yield n.getPromise();else{var b=(yield (j||(j=d("LSDatabaseSingleton"))).LSDatabaseSingleton);yield d("LSInitSyncCompleteSubscription").maybeWaitForSyncGroup(b,(k||(k=d("LSIntEnum"))).ofNumber(95))}p["delete"](a);q["delete"](a);d("MAWMIC").addIntAnnotation("occamadilloCompleteThreadCount",o.size-p.size);w()});return u.apply(this,arguments)}function v(){n.resolve(),w()}function w(){d("MAWMIC").addIntAnnotation("occamadilloThreadCount",o.size);if(d("LSPlatformLsInitLog").LsSync.hasEnded()&&q.size===0){d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end);return}p.size===0&&d("MAWMIC").addPoint(d("MAWMICSchema").POINTS.thread_mapping_end)}g.incrementCounter=m;g.getBatchesSentNumber=a;g.markThreadPassedToNativeOp=e;g.addPendingThread=f;g.markBridgeCallAcked=s;g.removePendingThread=t;g.completeSync=v;g.maybeEndOccamadilloThreadMapping=w}),98);
__d("MAWInitError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,b)||this;d.error=void 0;d.name="MAWInitError";d.message=b;d.error=c;return d}return b}(babelHelpers.wrapNativeSuper(Error));f.MAWInitError=a}),66);
__d("MAWInit",["MAWCurrentUser","MAWInitError","MAWMIC","MWQPLJoinId","MultipleTabsLogger","QPLUserFlow","QuickPerformanceLogger","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","qpl","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("qpl")._(25310776,"6155"),j=!1,k=[],l=[],m=!1;function n(){if(m)return;m=!0;c("QPLUserFlow").addAnnotations(i,{bool:{armadillo_init_sync_api_improvements:c("gkx")("24025"),isArmadilloPublicLaunchUser:c("gkx")("23405"),isTlcPublicUser:d("MAWCurrentUser").isTlcPublicUser(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()}})}var o=!1,p=function(){return document.visibilityState!==void 0?document.visibilityState==="hidden":document.hidden},q=function(){r("visibility_change_"+(p()?"hidden":"visible"))};function a(){if(o)return;d("MAWMIC").addPoint("maw_init_start");o=!0;c("QPLUserFlow").start(i,babelHelpers["extends"]({annotations:{bool:{initiallyHidden:p()},string:{hostname:window.location.hostname}},cancelOnUnload:!0},d("MWQPLJoinId").allowJoinId?{joinOptions:{joinId:d("MWQPLJoinId").MWQPLJoinId}}:{}));c("QPLUserFlow").addAlignmentPointForJoin(i,0,{requestId:d("MWQPLJoinId").MWQPLJoinId});d("MultipleTabsLogger").addAnnotationToQPLEvent(i);void d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){c("QPLUserFlow").addAnnotations(i,a)});n();document.addEventListener("visibilitychange",q);k.forEach(function(a){return a()});l.forEach(function(a){return a()});k.splice(0,k.length);l.splice(0,l.length)}function r(a,b){if(!o||j){if(!o&&(b==null?void 0:b.allowEarlyLogPoints)){var d=(h||(h=c("QuickPerformanceLogger"))).currentTimestamp();l.push(function(){c("QPLUserFlow").addPoint(i,a,{timestamp:d})})}return}n();c("QPLUserFlow").addPoint(i,a)}function e(a,b,d){if(!o||j){!o&&(d==null?void 0:d.allowEarlyAnnotations)&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{bool:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{bool:(d={},d[a]=b,d)})}function f(a,b,d){if(!o||j){!o&&(d==null?void 0:d.allowEarlyAnnotations)&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{string:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{string:(d={},d[a]=b,d)})}function s(a,b,d){if(!o||j){!o&&(d==null?void 0:d.allowEarlyAnnotations)&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{string_array:(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{string_array:(d={},d[a]=b,d)})}function t(a,b,d){if(!o||j){!o&&(d==null?void 0:d.allowEarlyAnnotations)&&k.push(function(){var d;c("QPLUserFlow").addAnnotations(i,{"int":(d={},d[a]=b,d)})});return}c("QPLUserFlow").addAnnotations(i,{"int":(d={},d[a]=b,d)})}function u(){n(),j=!0,m=!1,document.removeEventListener("visibilitychange",q)}function v(a,b){u();b=b instanceof d("MAWInitError").MAWInitError&&b.error?b.error:b;c("QPLUserFlow").addAnnotations(i,{string:{errorDescription:b==null?void 0:b.message}});c("QPLUserFlow").endFailure(i,a,{error:b});d("MAWMIC").fail(a,b)}function w(a,b){u(),c("QPLUserFlow").addAnnotations(i,{string:{cancelReason:a}}),b&&c("QPLUserFlow").markError(i,"maw_init_cancel_with_error",{error:b}),c("QPLUserFlow").endCancel(i),d("MAWMIC").addStringAnnotation("mawInitCancelReason",a),d("MAWMIC").cancel("maw_init_cancel",b),c("QPLUserFlow").addAnnotations(c("qpl")._(29818881,"6702"),{string:{maw_cancel_reason:a,maw_error_message:b==null?void 0:b.message}})}function x(a){if(j)return;u();d("MAWMIC").addStringAnnotation("mawInitDropReason",a);(h||(h=c("QuickPerformanceLogger"))).markerDrop(i)}function y(){u(),c("QPLUserFlow").endSuccess(i),d("MAWMIC").addPoint("maw_init_end")}function z(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a+"_start";a=a+"_end";r(c);c=(yield b());r(a);return c});return A.apply(this,arguments)}var B={isCompleted:function(){return j}};e={addBoolAnnotation:e,addIntAnnotation:t,addStringAnnotation:f,addStringArrayAnnotation:s,cancel:w,drop:x,endSuccess:y,fail:v,logPoint:r,measurePerformance:z,start:a};g.MAWInitState=B;g.MAWInit=e}),98);
__d("MAWStartupLoggingUtils",["FBLogger","MAWInit","MAWMIC","getErrorSafe"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){var f;f=(f=b==null?void 0:b.message)!=null?f:"";f.indexOf("Failed to execute 'importScripts'")>=0?d("MAWInit").MAWInit.fail("import_scripts_failure",c("getErrorSafe")(b)):d("MAWInit").MAWInit.fail("worker_error",c("getErrorSafe")(b));c("FBLogger")("messenger_web").mustfix("[MAWWebWorkerSingletonAsync: "+a+"]: %s:%s:%s:%s:%s:%s:%s",JSON.stringify(b==null?void 0:b.message),b==null?void 0:b.lineno,b==null?void 0:b.colno,b==null?void 0:b.filename,JSON.stringify(b,window.Object.getOwnPropertyNames(b)),b==null?void 0:b.name,e)}function b(a){var b=function b(d){d=d==null?void 0:d.data;if(typeof d==="object")if((d==null?void 0:d.type)==="importScripts_error"){var e,f;a.removeEventListener("message",b);var g=c("FBLogger")("messenger_web");g=g.addMetadata("FBLOGGER","ERROR_STACK",(e=typeof (d==null?void 0:d.stack)==="string"?d==null?void 0:d.stack:JSON.stringify(d==null?void 0:d.stack))!=null?e:"no_stack");e=d!=null?d:{};var h=e.error_code,i=e.error_msg,j=e.error_name;e=e.source;f=(f=d==null?void 0:d.perfEntry)!=null?f:{};var k=f.duration,l=f.encodedBodySize,m=f.responseStatus;f=f.transferSize;g.mustfix("[MAWWebWorkerSingletonAsync Script Import Error Details]: %s:%s:%s || errCode:%s || respStatus:%s || encBodySize:%s || duration:%s || transferSize:%s",e!=null&&JSON.stringify(e)||"no_source",j!=null&&JSON.stringify(j)||"no_name",i!=null&&JSON.stringify(i)||"no_msg",h!=null&&JSON.stringify(h)||"none",(g=JSON.stringify(m))!=null?g:"none",(e=JSON.stringify(l))!=null?e:"none",(j=JSON.stringify(k))!=null?j:"none",(i=JSON.stringify(f))!=null?i:"none")}else(d==null?void 0:d.type)==="importScripts_success"&&a.removeEventListener("message",b)};a.addEventListener("message",b)}var h=new Set(["worker_connection_established","worker_init_point_hsdp_end","worker_init_point_hblp_end","get_worker_rev_ack_received","old_worker_shutdown_end","old_worker_shutdown_start"]);function e(a){var b=a.data.annotations;if(b!=null){var c={allowEarlyAnnotations:!0};Object.keys(b).forEach(function(a){var e;e=(e=b[a])!=null?e:{};Object.entries(e).forEach(function(b){var e=b[0];b=b[1];e="workerInit"+e.charAt(0).toUpperCase()+e.substring(1);a==="int"&&typeof b==="number"?(d("MAWInit").MAWInit.addIntAnnotation(e,b,c),d("MAWMIC").addIntAnnotation(e,b)):a==="string"&&typeof b==="string"?(d("MAWInit").MAWInit.addStringAnnotation(e,b,c),d("MAWMIC").addStringAnnotation(e,b)):a==="bool"&&typeof b==="boolean"&&(d("MAWInit").MAWInit.addBoolAnnotation(e,b,c),d("MAWMIC").addBoolAnnotation(e,b))})})}var e={allowEarlyLogPoints:!0};if(a.type==="point"){if(h.has(a.data.event)){var f="worker_"+a.data.event;d("MAWInit").MAWInit.logPoint(f,e);d("MAWMIC").addPoint(f)}}else a.type==="end"&&(a.data.cancel===!0?d("MAWInit").MAWInit.logPoint("worker_creation_cancel",e):a.data.errorName!=null&&(d("MAWInit").MAWInit.addStringAnnotation("errorDescription",a.data.errorName,{allowEarlyAnnotations:!0}),d("MAWInit").MAWInit.logPoint("worker_creation_fail",e)))}g.logWorkerError=a;g.setImportScriptsErrorListener=b;g.logSharedWorkerQPLEvents=e}),98);
__d("MAWWorkerWatchdogRecovery",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){return g}f.setRecoveryForWatchdog=a;f.getWorkerRecoveryForWatchdog=b}),66);
__d("SharedWorkerDevChangeManager",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=!1,i=new Set();function a(a,b){var c=b.storageWorkerResource;b=b.tabResource;if(!h)return!0;if(i.has(a))return!0;if(new URLSearchParams(window.location.search).has("force_shared_worker_updates"))return!1;if(c.version===2&&b.version===2&&c.sandboxOnlyChecksum!=null)return c.sandboxOnlyChecksum===b.sandboxOnlyChecksum;return c.version===2&&c.rsrcBundleUrl==null||b.version===2&&b.getJSModuleBundleResource().url==null?!1:c.rsrcBundleUrl===b.getJSModuleBundleResource().url}function b(a){if(!h)return!1;if(i.has(a))return!1;return new URLSearchParams(window.location.search).has("force_shared_worker_updates")?!0:!1}function c(a){h&&i.add(a)}g.shouldUseStorageWorkerForDev=a;g.shouldUpgradeWorkerForDevExperimental=b;g.trackCreatedWorker=c}),98);
__d("SharedWorkerEventManager",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){var d=function(a){var d;if(typeof a.data==="object"&&((d=a.data)==null?void 0:d.type)==="console"&&typeof ((d=a.data)==null?void 0:d.response)==="object"&&((d=a.data)==null?void 0:d.response)!=null){d=a.data.response;a=d.method;d=d.args;if(typeof a!=="string"||!["log","error","info","debug","warn"].includes(a)){c("FBLogger")("worker").mustfix("Unexpected console method: %s",String(a));return}if(!Array.isArray(d)){c("FBLogger")("worker").mustfix('Expected console args "%s" to be an array',JSON.stringify(d));return}b({method:a,args:d})}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function i(a,b){var c=function(a){var c;if(typeof a.data==="object"&&((c=a.data)==null?void 0:c.type)==="sw-uncaught-error"){a=typeof ((c=a.data)==null?void 0:c.e)==="object"?(c=a.data.e)!=null?c:{}:{};c=a.error;var d=a.lineno,e=a.colno,f=a.filename;a=a.message;b({error:c instanceof Error?c:null,errorObject:{lineno:typeof d==="number"?d:null,colno:typeof e==="number"?e:null,filename:typeof f==="string"?f:null,message:typeof a==="string"?a:null}})}},d=a.port;d.addEventListener("message",c);return function(){return d.removeEventListener("message",c)}}function a(a,b,d){var e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="sw-get-rev"&&typeof a.data.response==="object"){b==null?void 0:b.markPoint("get_worker_rev_ack_received");a=typeof a.data==="object"&&typeof ((e=a.data)==null?void 0:e.response)==="object"?(e=a.data)==null?void 0:e.response:{};e=a==null?void 0:a.workerRevision;var f=a==null?void 0:a.spinTime;a=a==null?void 0:a.workerChecksum;if(e==null||typeof e!=="number"){b==null?void 0:b.addAnnotations({string:{malformedData:"rev is non-number"}});c("FBLogger")("worker").mustfix("Expected worker rev to be non-null number, but instead received: %s",String(e));return}if(f==null||typeof f!=="number"){b==null?void 0:b.addAnnotations({string:{malformedData:"spin_time is non-number"}});c("FBLogger")("worker").mustfix("Expected worker spin time to be non-null number, but instead received: %s",String(f));return}d({rev:e,spinTime:f,workerChecksum:typeof a==="string"?a:void 0})}},f=a.port;f.addEventListener("message",e);return function(){return f.removeEventListener("message",e)}}function b(a,b,c){var d=function d(e){var f;if(typeof e.data==="object"&&((f=e.data)==null?void 0:f.type)==="sw-shutdown"&&typeof e.data.response==="object"){var g,h;f=typeof ((f=e.data.response)==null?void 0:f.reason)==="string"?(f=e.data.response)==null?void 0:f.reason:null;g=typeof ((g=e.data.response)==null?void 0:g.workerID)==="string"?(g=e.data.response)==null?void 0:g.workerID:null;e=typeof ((h=e.data.response)==null?void 0:h.isInitialized)==="boolean"?(h=e.data.response)==null?void 0:h.isInitialized:null;b({reason:f,workerID:g,isInitialized:e});(c==null?void 0:c.once)===!0&&a.port.removeEventListener("message",d)}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function d(a,b){a.port.addEventListener("message",function(a){var c;typeof a.data==="object"&&((c=a.data)==null?void 0:c.type)==="sw-uptime-tracking"&&typeof ((c=a.data)==null?void 0:c.response)==="object"&&typeof ((c=a.data)==null?void 0:(c=c.response)==null?void 0:c.trackerID)==="number"&&b({trackerID:a.data.response.trackerID})})}function e(a,b,d){var e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="execute-worker-ack"&&typeof ((e=a.data)==null?void 0:e.response)==="object"){e=typeof a.data==="object"&&typeof ((e=a.data)==null?void 0:e.response)==="object"?(a=(e=a.data)==null?void 0:e.response)!=null?a:{}:{};a=e.workerRevision;var f=e.spinMode,g=e.spinTime,h=e.firstInit,i=e.errorGettingSiteData;e=e.error;if(typeof h!=="boolean"){b==null?void 0:b.addAnnotations({string:{malformedData:"firstInit is non-boolean"}});c("FBLogger")("worker").mustfix("Expected firstInit to be a boolean, but instead received: %s",String(h));return}i=i!=null?i:e;if(typeof i==="string")return d({err:i,isFirstInit:h});if(typeof a==="number"&&typeof f==="number"&&typeof g==="number")return d({workerRev:a,workerSpinTime:g,workerSpinMode:f,isFirstInit:h});else b==null?void 0:b.addAnnotations({string:{malformedData:"workerRevision, spinMode, and/or spinTime are non-numbers"}}),c("FBLogger")("worker").mustfix("Expected workerRevision, spinMode, and spinTime to be non-null number, but instead received: %s %s %s",String(a),String(f),String(g))}},f=a.port;f.addEventListener("message",e);return function(){return f.removeEventListener("message",e)}}function f(a,b,d,e){var f=function f(g){var h;if(typeof g.data==="object"&&((h=g.data)==null?void 0:h.type)==="execute-worker-imports"&&typeof ((h=g.data)==null?void 0:h.response)==="object"){(e==null?void 0:e.once)===!0&&a.port.removeEventListener("message",f);b==null?void 0:b.markPoint("bundle_imports_ack");h=typeof g.data==="object"&&typeof ((h=g.data)==null?void 0:h.response)==="object"?(g=(h=g.data)==null?void 0:h.response)!=null?g:{}:{};g=h.err;h=h.attempts;if(g!=null&&typeof g!=="string"){b==null?void 0:b.addAnnotations({string:{malformedData:"err is neither null or a string"}});c("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(g));return}if(h!=null&&typeof h!=="number"){b==null?void 0:b.addAnnotations({string:{malformedData:"attempts is neither null or a number"}});c("FBLogger")("worker").mustfix("Expected attempts to be a number or null, but instead receieved: %s",String(h));return}d({err:g,attempts:h})}},g=a.port;g.addEventListener("message",f);return function(){return g.removeEventListener("message",f)}}function j(a,b,d){var e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="ww-hrp-init"){b==null?void 0:b.markEventEnd("hrp_init");e=typeof a.data==="object"&&typeof ((e=a.data)==null?void 0:e.response)==="object"?(a=(e=a.data)==null?void 0:e.response)!=null?a:{}:{};a=e.err;if(a!=null&&typeof a!=="string"){b==null?void 0:b.addAnnotations({string:{malformedData:"err is neither null or a string"}});c("FBLogger")("worker").mustfix("Expected err to be null or a string, but instead receieved: %s",String(a));return}d({err:a})}},f=a.port;f.addEventListener("message",e);return function(){return f.removeEventListener("message",e)}}function k(a,b){var c=function(a){var c;if(typeof a.data==="object"&&((c=a.data)==null?void 0:c.type)==="worker-init-mark"&&typeof ((c=a.data)==null?void 0:c.response)==="object"&&typeof ((c=a.data)==null?void 0:(c=c.response)==null?void 0:c.point)==="string"){b((c=a.data)==null?void 0:(a=c.response)==null?void 0:a.point)}},d=a.port;d.addEventListener("message",c);return function(){return d.removeEventListener("message",c)}}function l(a,b,c){var d=function d(e){var f;if(typeof e.data==="object"&&((f=e.data)==null?void 0:f.type)==="self-terminate"&&typeof ((f=e.data)==null?void 0:f.response)==="object"&&typeof ((f=e.data)==null?void 0:(f=f.response)==null?void 0:f.from)==="string"){var g,h,i;f=(f=e.data)==null?void 0:(f=f.response)==null?void 0:f.from;g=typeof ((g=e.data)==null?void 0:(g=g.response)==null?void 0:g.reason)==="string"?(g=e.data)==null?void 0:(g=g.response)==null?void 0:g.reason:"unknown";h=typeof ((h=e.data)==null?void 0:(h=h.response)==null?void 0:h.workerID)==="string"?(h=e.data)==null?void 0:(h=h.response)==null?void 0:h.workerID:"unknown";i=typeof ((i=e.data)==null?void 0:(i=i.response)==null?void 0:i.error)==="string"?(i=e.data)==null?void 0:(e=i.response)==null?void 0:e.error:void 0;(c==null?void 0:c.once)===!0&&a.port.removeEventListener("message",d);b(f,g,h,i)}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function m(a,b){b=b!=null?b:{};var c=b.reason;b=b.upgrade;a.port.postMessage({type:"sw-shutdown",args:[{reason:c,upgrade:b}]})}function n(a){a.port.postMessage({type:"sw-get-rev",args:[]})}function o(a,b){b=b!=null?b:{};var c=b.jsModuleResource;b=b.isDev;a.port.postMessage({type:"execute-worker",args:[c!=null?c:{},b]})}var p=["no-hrp","initialized","processed"];function q(a,b,c){var d=function d(e){var f;if(typeof e.data==="object"&&((f=e.data)==null?void 0:f.type)==="connection-ack"&&typeof ((f=e.data)==null?void 0:f.response)==="object"&&typeof ((f=e.data)==null?void 0:(f=f.response)==null?void 0:f.from)==="string"){var g;f=typeof ((f=e.data)==null?void 0:(f=f.response)==null?void 0:f.workerID)==="string"?(f=e.data)==null?void 0:(f=f.response)==null?void 0:f.workerID:void 0;g=typeof ((g=e.data)==null?void 0:(g=g.response)==null?void 0:g.hrpStatus)==="string"?(g=e.data)==null?void 0:(g=g.response)==null?void 0:g.hrpStatus:void 0;b((e=e.data)==null?void 0:(e=e.response)==null?void 0:e.from,f,g!=null&&p.includes(g)?g:void 0);(c==null?void 0:c.once)===!0&&a.port.removeEventListener("message",d)}},e=a.port;e.addEventListener("message",d);return function(){return e.removeEventListener("message",d)}}function r(a,b){var c=function(a){b(a.data)},d=a.port;d.addEventListener("message",c);return function(){return d.removeEventListener("message",c)}}function s(a){a.port.postMessage({type:"ww-connection-ack"})}function t(a,b,c){c=b.isDev;var d=b.hrp;b=b.js_env;a.port.postMessage({type:"ww-hrp-init",hrp:d,is_dev:c,js_env:b,tiered:!0})}function u(a,b){b=b.trackerID;a.port.postMessage({type:"sw-uptime-tracking",args:{trackerID:b}})}function v(a){var b=h(a,function(a){var b,c=a.args;a=a.method;(b=console)[a].apply(b,c)}),d=i(a,function(a){var b=a.error;a=a.errorObject;b!=null?c("FBLogger")("worker").catching(b).mustfix("Shared Worker uncaught error."):c("FBLogger")("worker").mustfix("Shared Worker uncaught error with no Error object. %s:%d:%d:%s",a.message,a.lineno,a.colno,a.filename)});return function(){b(),d()}}g.registerLogFowardingListener=h;g.registerUncaughtErrorForwardingListener=i;g.registerGetWorkerRevListener=a;g.registerWorkerShutdownListener=b;g.registerUptimeTrackerListener=d;g.registerExecuteWorkerAckListener=e;g.registerExecuteWorkerImportsListener=f;g.registerHrpInitListener=j;g.registerWorkerInitPointsListener=k;g.registerWorkerSelfTerminationListener=l;g.emitWorkerShutdown=m;g.emitGetRev=n;g.emitExecuteWorker=o;g.registerConnectionAckListener=q;g.registerAnyMessageListener=r;g.emitConnectionAckRequest=s;g.emitHrpInit=t;g.emitUptimeTracking=u;g.registerForwardListeners=v}),98);
__d("WebStorageLockManager",["FBLogger","LocalStorageWrapper","LockManager","Promise","Run","asyncToGeneratorRuntime","clearInterval","err","promiseDone","setInterval","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){c("FBLogger")("messenger_web").mustfix(a)}function a(a,e){var f="Failed to execute 'request' on 'LockManager'",g="Lock broken by another request with the 'steal' option.",j=function(a,b,c){var d=a.get(b);if(d!=null)return d;d=c();a.set(b,d);return d};try{var k=d("LocalStorageWrapper").getStorage(i),l=function(a,b){d("LocalStorageWrapper").setItemGuarded(k,a,b,i,e==null?void 0:e.onQuotaExceeded)},m=function(a){d("LocalStorageWrapper").removeItemGuarded(k,a,i)},n=function(a){return d("LocalStorageWrapper").getItemGuarded(k,a,i)},o=function(){function a(a,b){this.lockName=a,this.tabId=b,this.lockA=this.lockName+"-a",this.lockB=this.lockName+"-b"}var d=a.prototype;d.run=function(a){return this.$1(a,0)};d.$1=function(a,d){var e=this,f=function(b){return window.requestAnimationFrame(function(){return e.$1(a,d+1).then(b)})},g=function(a){return n(a)==null};l(this.lockA,this.tabId);return new(h||(h=b("Promise")))(function(b){var h=function(){try{a(),b()}finally{m(e.lockB),m(e.lockA)}};g(e.lockB)||d>10?(d>10&&c("FBLogger")("messenger_web").warn("web-lock polyfill: Had to steal lock"),l(e.lockB,e.tabId),n(e.lockA)===e.tabId?h():window.requestAnimationFrame(function(){n(e.lockB)===e.tabId?h():f(b)})):f(b)})};return a}(),p=function(){function a(b){this.tabId=b,this.lock=new o(a.tabsKey,b),c("promiseDone")(this.$1()),this.$2(),this.keepOnlyTabs(function(b){return a.isAlive(b)})}a.isAlive=function(b){b=n(a.$3(b));return b==null?!1:Date.now()-parseFloat(b)<1e3};var e=a.prototype;e.keepOnlyTabs=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield this.lock.run(function(){var c;c=JSON.parse((c=n(a.tabsKey))!=null?c:"[]").filter(b);c.length>0?l(a.tabsKey,JSON.stringify(c)):m(a.tabsKey)})});function d(a){return c.apply(this,arguments)}return d}();e.$2=function(){var b=a.$3(this.tabId);l(b,Date.now().toString());var e=c("setInterval")(function(){l(b,Date.now().toString())},500);d("Run").onUnload(function(){c("clearInterval")(e),m(b)})};e.$1=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=this;yield this.lock.run(function(){var c;c=JSON.parse((c=n(a.tabsKey))!=null?c:"[]");l(a.tabsKey,JSON.stringify([].concat(c,[b.tabId])))});d("Run").onUnload(function(){return c("promiseDone")(b.keepOnlyTabs(function(a){return a!==b.tabId}))})});function f(){return e.apply(this,arguments)}return f}();a.$3=function(a){return"$navigator.heartbeat-"+a};return a}();p.tabsKey="$navigator.heartbeat-tabs";var q=function(){function a(b,e){var f=this;this.requests=new Map();this.name=b;this.tabId=e;this.queueKey=a.storagePrefix+"-"+b+"-q";this.currentOwnerKey=a.storagePrefix+"-"+b+"-o";this.lock=new o(a.storagePrefix+"-"+b,this.tabId);d("Run").onUnload(function(){c("promiseDone")(f.keepOnlyRequests(function(a){return(a==null?void 0:a.t)!==f.tabId}))})}var e=a.prototype;e.enqueue=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,d,a){var e=this,f=c("uuidv4")().toString(),g={t:this.tabId,u:f},h=function(){b(null),e.markRequestReleased(f)},i=function(){b(f),e.markRequestReleased(f)};this.requests.set(f,[function(){return b(f)},function(){d(),e.markRequestReleased(f)}]);if((a==null?void 0:a.signal)!=null){a.signal.onabort=function(){c("promiseDone")(e.keepOnlyRequests(function(a){return(a==null?void 0:a.u)!==f})),i()};if(a.signal.aborted)return i()}yield this.lock.run(function(){var b=e.getOwner();(a==null?void 0:a.steal)===!0&&e.$1(b==null?void 0:b.u);if(b==null||(a==null?void 0:a.steal)===!0||!p.isAlive(b.t))e.$2(e.currentOwnerKey,babelHelpers["extends"]({},g,{},(a==null?void 0:a.steal)===!0?{s:!0}:{})),e.$3(f);else if((a==null?void 0:a.ifAvailable)!==!0){b=e.getQueue();b.push(g);e.$2(e.queueKey,b)}else h()})});function d(b,c,d){return a.apply(this,arguments)}return d}();e.dequeue=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this,d,e=null;yield this.lock.run(function(){var d=c.getOwner();if((d==null?void 0:d.t)!==c.tabId||(d==null?void 0:d.u)!==b)return;d=c.getQueue();d=a.getNextOwner(d);var f=d[0];d=d[1];e=f;c.$2(c.currentOwnerKey,f);c.$2(c.queueKey,d)});this.$3((d=e)==null?void 0:d.u)});function d(a){return c.apply(this,arguments)}return d}();e.storageChangedOnOtherTab=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this;a==="o"&&(yield this.lock.run(function(){var a=c.getOwner();if(a==null)return;c.$3(a==null?void 0:a.u);if(a.s===!0){a=b==null?void 0:b.oldValue;if(a!=null){a=JSON.parse(a);a.t===c.tabId&&c.$1(a.u)}}}))});function c(b,c){return a.apply(this,arguments)}return c}();e.getQueue=function(){var a;return(a=this.$4(this.queueKey))!=null?a:[]};e.getOwner=function(){return this.$4(this.currentOwnerKey)};a.getQueueNameAndStorageType=function(b){if(!b.startsWith(a.storagePrefix))return null;var d=b.slice(a.storagePrefix.length+1,b.length-2),e=b.charAt(b.length-1);switch(e){case"q":case"o":case"a":case"b":break;default:throw c("err")("Queue was stored with a suffix other than q or o. This is either a bug in the web lock api polyfill code, or it means that something overwrote localStorage with a weird key. Key: "+b)}return[d,e]};a.getNextOwner=function(a){for(var b=0;b<a.length;b+=1)if(p.isAlive(a[b].t))return[a[b],a.slice(b+1)];return[null,[]]};e.$4=function(a){a=n(a);return a!=null?JSON.parse(a):null};e.$2=function(a,b){b=b==null||Array.isArray(b)&&b.length===0?null:JSON.stringify(b);b==null?m(a):l(a,b)};e.keepOnlyRequests=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var c=this;yield this.lock.run(function(){var d=c.getOwner(),e=c.getQueue().filter(b);if(b(d))c.$2(c.queueKey,e);else{d=a.getNextOwner(e);e=d[0];d=d[1];c.$2(c.currentOwnerKey,e);c.$2(c.queueKey,d)}})});function d(a){return c.apply(this,arguments)}return d}();e.markRequestReleased=function(a){a!=null&&this.requests["delete"](a)};e.$3=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a=a[0];a()}}};e.$1=function(a){if(a!=null){a=this.requests.get(a);if(a!=null){a[0];a=a[1];a()}}};return a}();q.storagePrefix="$navigator.locks";var r=function(){function a(a){this.$1=new Map(),this.storage=d("LocalStorageWrapper").getStorage(i),this.tabId=a,new p(this.tabId),c("promiseDone")(this.$2()),this.$3()}var e=a.prototype;e.request=function(){var a=this;for(var e=arguments.length,i=new Array(e),j=0;j<e;j++)i[j]=arguments[j];return new(h||(h=b("Promise")))(function(e,j){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var k,l=i[0],e=i.length===3?i[1]:null,m=i.length===2?i[1]:i[2];if(l.startsWith("-"))throw new DOMException("Names cannot start with '-'.",f);if((e==null?void 0:e.ifAvailable)===!0&&(e==null?void 0:e.signal)!=null)throw new DOMException("The 'signal' and 'ifAvailable' options cannot be used together.",f);var n=a.$4(l),o=(yield new(h||(h=b("Promise")))(function(a){c("promiseDone")(n.enqueue(a,function(){j(new DOMException(g,f))},e))}));if((e==null?void 0:(k=e.signal)==null?void 0:k.aborted)===!0)throw new DOMException("The request was aborted.",f);try{yield m(o!=null?{mode:(k=e==null?void 0:e.mode)!=null?k:d("LockManager").LockMode.Exclusive,name:l}:null)}finally{o!=null&&(yield n.dequeue(o)),n.markRequestReleased(o)}})(),e,j)})};e.query=function(){var a=[],c=[];for(var e of this.$5())if(e!=null){var f={mode:d("LockManager").LockMode.Exclusive,name:e.name};if(e.getOwner()!=null)a.push(f);else for(var g of e.getQueue())c.push(f)}return(h||(h=b("Promise"))).resolve({held:a,pending:c})};e.$4=function(a){var b=this;return j(this.$1,a,function(){return new q(a,b.tabId)})};e.$3=function(){var a=this;window.addEventListener("storage",function(b){var d=b.key;if(b.storageArea!==a.storage||d==null)return;d=q.getQueueNameAndStorageType(d);if(d==null)return;var e=d[0];d=d[1];c("promiseDone")((e=a.$4(e))==null?void 0:e.storageChangedOnOtherTab(d,b))})};e.$2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(this.$5().map(function(a){return a==null?void 0:a.keepOnlyRequests(function(a){return a==null?!1:p.isAlive(a.t)})}))});function c(){return a.apply(this,arguments)}return c}();e.$5=function(){var a=this;return k==null?[]:Object.keys(k).map(function(b){b=q.getQueueNameAndStorageType(b);if(b==null)return;b=b[0];return a.$4(b)})};return a}();return new r(a)}catch(a){return null}}g.make=a}),98);
__d("supportsNativeWebLock",[],(function(a,b,c,d,e,f){"use strict";function a(){return self.LockManager!=null&&self.navigator.locks instanceof self.LockManager}f["default"]=a}),66);
__d("SharedWorkerLockManager",["Deferred","FBLogger","WebStorageLockManager","emptyFunction","pageID","promiseDone","setTimeout","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h="shared_worker_mutex",i=6e5;function j(a){var b;b=(b=window)==null?void 0:(b=b.navigator)==null?void 0:b.locks;if(b!=null)return b;var e=d("WebStorageLockManager").make(c("pageID"));if(e!=null){a==null?void 0:a.addAnnotations({bool:{fallback_lock_manager:!0}});return{request:function(a,b){return e.request(a,b)}}}return null}function k(a,b,d){c("setTimeout")(function(){a.isSettled()||(b==null?void 0:b.endFailure("lock_timeout"),c("FBLogger")("worker").warn("[SharedWorkerLockManager]: lock timed out in %s ms",i),a.resolve(),d==null?void 0:d())},i)}function a(a,b){var d=b.workerQPLLogger,e=b.onLockTimeout;b=b.onLockFail;var f=j(d);d==null?void 0:d.addAnnotations({bool:{native_locks:f!=null?c("supportsNativeWebLock")():null}});if(f==null){d==null?void 0:d.markPoint("no_lock_manager");c("FBLogger")("worker").warn("Unable to initialize lock manager");a(c("emptyFunction"));return}d==null?void 0:d.markPoint("lock_requested");var g=new(c("Deferred"))();c("promiseDone")(f.request(h,function(){d==null?void 0:d.markPoint("lock_obtained");k(g,d,e);a(function(){d==null?void 0:d.markPoint("lock_released"),g.resolve()});return g.getPromise()}),void 0,b)}g.withWorkerLock=a}),98);
__d("SharedWorkerLoggingUtils",["ErrorSerializer","FBLogger","ODS","QPLUserFlow","getErrorSafe","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e){(h||(h=d("ODS"))).bumpEntityKey(6653,"shared_worker_infra","worker_self_termination."+b+"."+a),i(a,b,c,e,!0)}function i(a,b,d,e,f){f===void 0&&(f=!1);var g=c("qpl")._(931600201,"1438");c("QPLUserFlow").start(g);c("QPLUserFlow").endSuccess(g,{annotations:{string:{workerName:a,workerID:e,reason:d,location:b,pageID:c("pageID")},bool:{isSelfTermination:f}}})}function b(a,b,c,d,e,f){a==null?void 0:a.markEventEnd("execute_worker"),a==null?void 0:a.addAnnotations({"int":{runningWorkerRev:e,runningWorkerSpinTime:b,runningWorkerSpinMode:f},string:{executeWorkerErr:c},bool:{isFirstInit:d}})}function e(a,b,d){var e;e=c("getErrorSafe")((e=b instanceof ErrorEvent&&(b==null?void 0:b.error))!=null?e:b);c("FBLogger")("worker").catching(e).warn("Worker %s onerror: %s type, %s message",d,String(b.type),c("ErrorSerializer").toReadableMessage(e));a==null?void 0:a.addAnnotations({string_array:{onErrorHandler:[(a=JSON.stringify((d=e==null?void 0:e.message)!=null?d:b==null?void 0:b.message))!=null?a:"undefined",String((d=b==null?void 0:b.lineno)!=null?d:e==null?void 0:e.lineno),String((a=b==null?void 0:b.colno)!=null?a:e==null?void 0:e.colno),String((d=b==null?void 0:b.filename)!=null?d:e==null?void 0:e.filename)]}})}g.logSelfTermination=a;g.logShutdown=i;g.logExecuteAck=b;g.logSharedWorkerError=e}),98);
__d("SharedWorkerStatusLock",[],(function(a,b,c,d,e,f){"use strict";var g="sw-lock",h="sw-ds-lock";function i(a){return g+"-"+a}function j(a){return h+"-"+a}function k(a,b){return g+"-"+a+"-"+b}function a(){var a=null,b;function c(c){var d=self,e=d.navigator.locks;d.LockManager!=null&&e instanceof d.LockManager&&(b==null&&(b=new d.Promise(function(b){a=b})),e.request(i(d.name),function(a){if(a!=null)return b}),c.requestDynamicStringLockToo===!0&&e.request(j(d.name),function(a){if(a!=null)return b}),c.requestWorkerIdStatusLockToo===!0&&e.request(k(d.name,d.worker_id),function(a){if(a!=null){c.onUniqueLockAckquired==null?void 0:c.onUniqueLockAckquired();return b}}))}function d(){a==null?void 0:a(),b=null,a=null}return{init:c,release:d}}f.getStatusLockName=i;f.getDynamicStringInitLockName=j;f.getWorkerIdStatusLockName=k;f.getStatusLock=a}),66);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("mergeHelpers")).ArrayStrategies,i=c.checkArrayStrategy,j=c.checkMergeArrayArgs,k=c.checkMergeLevel,l=c.checkMergeObjectArgs,m=c.isTerminal,n=c.normalizeMergeArg,o=function(a,b,c,d){l(a,b);k(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];q(a,b,g,c,d)}},p=function(a,b,c,d){j(a,b);k(d);if(c===h.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)q(a,b,f,c,d)}},q=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var i=b&&m(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],n=Object.prototype.hasOwnProperty.call(a,c),q=n&&m(l),r=n&&Array.isArray(l),s=n&&!r&&!r;q?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):b||(a[c]=l):r?i?a[c]=f:j?(d&&h[d]||g(0,5117),d===h.Clobber&&(l.length=0),p(l,f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)):s?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&o(l,f,d,e+1):n||(i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k&&(a[c]={},o(a[c],f,d,e+1)))};function a(a,b,c){b=n(b);i(c);o(a,b,c,0)}f["default"]=a}),66);
__d("WebAsyncStorage",["Deferred","Promise","err","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";var h;a=typeof window!=="undefined"?window:self;var i=a.indexedDB,j=1,k="data",l=!1,m;d=Date.now();var n=new(c("Deferred"))(),o=3;function p(){var a=i.open("AsyncStorage",j);a.onerror=function(b){b=(b=a.error)!=null?b:new Error("Failed to open AsyncStorage IndexedDB instance.");if(b.name==="UnknownError"&&o>0){o--;return p()}n.reject(b)};a.onsuccess=function(a){l&&!1,m=a.target.result,n.resolve({db:m}),m.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);n.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(k))return;a.createObjectStore(k,{keyPath:"key"})}}i&&p();function q(a,b){if(m)try{a()}catch(a){b&&b(a)}else n.getPromise().then(function(){l&&!1,q(a,b)},function(a){b&&b(a)})}e={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==void 0&&c[0]!==void 0&&c[0][1]!==void 0?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},getOrSetItem:function(a,b,c){this.multiGetOrSet([[a,b]],function(a,b){b=b!==void 0&&b[0]!==void 0&&b[0][1]!==void 0?b[0][1]:null;c(a&&a[0]||null,b)})},upsertAndSaveAtomic:function(a,b,c){var d=null;this._multiOp([a],"readwrite",function(a){return c(a,d)},function(a){return a},function(a,c,e){if(c&&a===c.key){var f=b(c.value.value);if(f!=null){var g=c.value;g.value=f;d=f;c.update(g)}}else{f=b(null);f!=null&&(d=f,e.push([a,f]))}})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(l&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];l&&!1;b.update(d)}else c.push(a)})},multiGetOrSet:function(a,b){if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}var c=[];this._multiOp(a,"readwrite",function(a){return b(a,c)},function(a){return a[0]},function(a,b,d){b&&a[0]===b.key?(c.push([a,b.value.value]),l&&!1):d.push(a)})},multiMerge:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,d){if(b&&a[0]===b.key){var e=b.value,f=JSON.parse(e.value);c("mergeDeepInto")(f,JSON.parse(a[1]),c("mergeHelpers").ArrayStrategies.Clobber);l&&!1;e.value=JSON.stringify(f);b.update(e)}else l&&!1,d.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(l&&!1,b["delete"]())})},getAllKeys:function(a){q(function(){var b=m.transaction([k],"readonly");b=b.objectStore(k).openCursor();var c=[];b.onsuccess=function(b){b=b.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(b){return a(null,[])})},clear:function(a){q(function(){var b=m.transaction([k],"readwrite");b=b.objectStore(k).openCursor();b.onsuccess=function(b){b=b.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(b){return a(null)})},_multiOp:function(a,b,c,d,e){q(function(){var f=!1,g=a.slice().sort(function(a,b){a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=m.transaction([k],b),i=h.objectStore(k).openCursor(),j=[],n=0;i.onsuccess=function(a){a=a.target.result;if(!a){while(n<g.length)e(g[n],a,j),n++;o();return}var b=a.key;l&&!1;while(d(g[n])<=b){l&&!1;e(g[n],a,j);n++;if(n===g.length){o();return}}b=d(g[n]);a["continue"](b)};function o(){var a=h.objectStore(k);j.forEach(function(b){l&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(a){a=new Error("IndexedDB error: "+a.target.error.message);c&&c([a])};l&&!1},function(a){c&&c([a])})},_persistentWritesDisabled:!1,disablePersistentWrites:function(){this._persistentWritesDisabled=!0},isOpenPromiseSettled:function(){return n.isSettled()},isOperational:function(){return i==null?(h||(h=b("Promise"))).resolve({success:!1,error:c("err")("IDB interface not available")}):n.getPromise().then(function(){return{success:!0}})["catch"](function(a){return{success:!1,error:a}})}};f=e;g["default"]=f}),98);
__d("validateSharedWorkerReference",["ConstUriUtils","isRelativeURL","isSameOrigin","memoize"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoize")(function(){return d("ConstUriUtils").getUri(window.location.href)});function i(a){var b=h(),e=d("ConstUriUtils").getUri(a);e=b!=null&&e!=null?c("isSameOrigin")(e,b):!1;return e||c("isRelativeURL")(a)}function a(a){if(a==null||typeof a!=="object")return null;var b=a.rev,c=a.spin_time,d=a.url,e=a.version,f=a.rsrcBundleUrl;a=a.sandboxOnlyChecksum;return typeof b!=="number"||typeof c!=="number"||e!=null&&e!==1&&e!==2||!Number.isInteger(b)||!Number.isInteger(c)||typeof d!=="string"||!i(d)||f!=null&&typeof f!=="string"||a!=null&&typeof a!=="string"?null:{rev:b,spin_time:c,url:d,version:e!=null?e:1,rsrcBundleUrl:f,sandboxOnlyChecksum:a}}g["default"]=a}),98);
__d("SharedWorkerStorageManager",["Deferred","FBLogger","Promise","WebAsyncStorage","validateSharedWorkerReference"],(function(a,b,c,d,e,f,g){"use strict";var h,i="__swbundle__",j={};function k(a){return""+i+a}function l(a){var b=new(c("Deferred"))();c("WebAsyncStorage").removeItem(k(a),function(c){if(c)return b.reject(c);j[a]=null;b.resolve()});return b.getPromise()}function m(a,b){var d=new(c("Deferred"))();c("WebAsyncStorage").setItem(k(a),b,function(c){if(c!=null)return d.reject(c);j[a]=b;d.resolve()});return d.getPromise()}function n(a){var b=new(c("Deferred"))();c("WebAsyncStorage").getItem(k(a),function(c,d){if(c)return b.reject(c);j[a]=d;b.resolve(d)});return b.getPromise()}function a(){return j}function d(a,b){return n(a).then(function(a){a=c("validateSharedWorkerReference")(a);return a==null?null:a})["catch"](function(d){c("FBLogger")("worker").catching(d).mustfix("Failed to getSharedWorkerReference for bundleName %s",a);b==null?void 0:b.addAnnotations({bool:{failedToGetSharedWorkerResource:!0}});throw d})}function e(a,b){return l(a)["catch"](function(d){c("FBLogger")("worker").catching(d).mustfix("Failed to removeSharedWorkerReference for bundleName %s",a);b==null?void 0:b.addAnnotations({bool:{failedToDeleteSharedWorkerResource:!0}});throw d})}function f(a,d,e){var f=c("validateSharedWorkerReference")(d);if(f==null){c("FBLogger")("worker").mustfix('Failed to save worker reference for bundle "%s". Invalid reference: %s',a,JSON.stringify(d));return(h||(h=b("Promise"))).resolve()}return m(a,f)["catch"](function(b){c("FBLogger")("worker").catching(b).mustfix("Failed to saveSharedWorkerReference for bundleName %s",a);e==null?void 0:e.addAnnotations({bool:{failedToSaveSharedWorkerResource:!0}});throw b})}function o(a,b){var d=new(c("Deferred"))();c("WebAsyncStorage").upsertAndSaveAtomic(k(a),function(a){a=c("validateSharedWorkerReference")(a);return b(a)},function(b,e){if(b){c("FBLogger")("worker").catching(b).mustfix("Failed to getOrUpdateWorkerReference for bundleName %s",a);return d.reject(b)}j[a]=e;d.resolve(e)});return d.getPromise()}g.SHARED_WORKER_STORAGE_KEY_BASE=i;g.getDebugState=a;g.getSharedWorkerReference=d;g.removeSharedWorkerReference=e;g.saveSharedWorkerReference=f;g.getOrUpdateWorkerReference=o}),98);
__d("TrustedTypesWebWorkerScriptURLPolicy",["TrustedTypes"],(function(a,b,c,d,e,f,g){"use strict";a={createScriptURL:function(a){return a}};b=c("TrustedTypes").createPolicy("web-worker-url",a);d=b;g["default"]=d}),98);
__d("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("supportsModuleWorker",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=null;function a(a){if(h!=null)return h;if(h!=null)return h;if(c("UserAgent").isEngine("Blink")){h=a?c("UserAgent").isEngine_DEPRECATED_DANGEROUS("Blink > 83"):c("UserAgent").isEngine_DEPRECATED_DANGEROUS("Blink > 80.1");return h}if(c("UserAgent").isBrowser("Safari")){h=c("UserAgent").isBrowser("Safari > 14.9");return h}if(c("UserAgent").isBrowser("Firefox")){h=c("UserAgent").isBrowser("Firefox > 113");return h}if(c("UserAgent").isEngine("WebKit")){h=c("UserAgent").isEngine_DEPRECATED_DANGEROUS("WebKit > 606");return h}if(c("UserAgent").isBrowser("IE")){h=!1;return h}var b={get type(){h=!0}};try{a?new SharedWorker("blob://",b):new Worker("blob://",b)}finally{h=(a=h)!=null?a:!1;return h}}g["default"]=a}),98);
__d("createSharedWorkerV2BundleUrlExperimental",["XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","nullthrows","supportsModuleWorker"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=c("supportsModuleWorker")(!0);return c("nullthrows")((b=c("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:b?"MODULE":"CLASSIC",name:a}))==null?void 0:b.toString())}g["default"]=a}),98);
__d("SharedWorkerMigrationUtils",["ConstUriUtils","Deferred","FBLogger","Promise","SharedWorkerEventManager","SharedWorkerStatusLock","SharedWorkerStorageManager","TrustedTypesWebWorkerScriptURLPolicy","asyncToGeneratorRuntime","clearTimeout","createSharedWorkerV2BundleUrlExperimental","err","justknobx","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("supportsNativeWebLock")())return!0;var b=(yield self.navigator.locks.query());return b.held.some(function(b){return b.name===d("SharedWorkerStatusLock").getDynamicStringInitLockName(a)})});return j.apply(this,arguments)}function a(){return c("supportsNativeWebLock")()}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!c("supportsNativeWebLock")())return!0;var b=(yield self.navigator.locks.query());return b.held.some(function(b){return b.name===d("SharedWorkerStatusLock").getStatusLockName(a)})});return l.apply(this,arguments)}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!c("supportsNativeWebLock")())return!0;var e=(yield self.navigator.locks.query());return e.held.some(function(c){return c.name===d("SharedWorkerStatusLock").getWorkerIdStatusLockName(a,b)})});return m.apply(this,arguments)}var n={SharedWorkerBundle:c("justknobx")._("2852"),MAWMainWebWorkerV2Bundle:c("justknobx")._("2920")};function f(a){return(a=n[a])!=null?a:!1}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!(yield i(a)))return!1;var b=new(c("Deferred"))(),e=c("createSharedWorkerV2BundleUrlExperimental")(a);e=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e);e=c("supportsModuleWorker")(!0)?new SharedWorker(e,{name:a,type:"module"}):new SharedWorker(e,a);d("SharedWorkerEventManager").registerWorkerShutdownListener(e,function(a){b.resolve(!0)},{once:!0});d("SharedWorkerEventManager").emitWorkerShutdown(e,{upgrade:!1,reason:"dynamic_string_worker_rollback"});e.port.start();return b.getPromise()});return p.apply(this,arguments)}function q(a){a=d("ConstUriUtils").getUri(a);return a!=null&&a.getQueryParam("hash")!=null}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.name,f=a.logger;try{a=(yield (h||(h=b("Promise"))).all([k(e),i(e)]));var g=a[0];a=a[1];if(!g||c("supportsNativeWebLock")()&&a){f.markPoint("legacy_termination_skipped");f.addAnnotations({bool:{dynamicStringWorkerAlreadyRunning:a,workerAlreadyRunning:g,native_locks:c("supportsNativeWebLock")()}});return}a=(yield d("SharedWorkerStorageManager").getSharedWorkerReference(e));f.markPoint("storage_read");f.addAnnotations({bool:{storageResourceSet:a!=null}});if(a==null)return;try{yield d("SharedWorkerStorageManager").removeSharedWorkerReference(e),f.markPoint("storage_cleaned")}catch(a){f.markPoint("storage_error"),f.addAnnotations({string:{storageError:a.toString()}}),c("FBLogger")("worker").catching(a).mustfix("Failed to remove reference from storage.")}g=q(a.url);f.markPoint(g?"legacy_termination_start":"termination_skipped");if(g){var j=new(c("Deferred"))();g=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a.url);a=c("supportsModuleWorker")(!0)?new SharedWorker(g,{name:e,type:"module"}):new SharedWorker(g,e);g=function(){f.markPoint("legacy_termination_end"),j.resolve(!0)};d("SharedWorkerEventManager").registerWorkerShutdownListener(a,g,{once:!0});d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(a,g,{once:!0});a.port.start();d("SharedWorkerEventManager").emitWorkerShutdown(a,{upgrade:!1,reason:"maw-request-refresh"});e=c("setTimeout")(function(){f.markPoint("legacy_termination_timeout"),j.reject(c("err")("Failed to close Shared Web Worker properly. SelfTerminationTimeout was exceeded."))},1e3);yield j.getPromise();c("clearTimeout")(e)}}catch(a){f.markPoint("legacy_check_and_termination_error"),f.addAnnotations({string:{legacyCheckError:a.toString()}}),c("FBLogger")("worker").catching(a).mustfix("Failed to check storage and possibly terminate legacy worker.")}});return s.apply(this,arguments)}g.isDynamicStringWorkerRunning=i;g.supportsNativeWebLocks=a;g.isStatusLockHeld=k;g.isWorkerIdStatusLockHeld=e;g.shouldCheckForDynamicStringWorker=f;g.maybeTerminateDynamicStringWorker=o;g.isLegacyWorkerURL=q;g.checkStorageAndTerminateLegacyWorker=r}),98);
__d("SharedWorkerUptimeTracker",["FBLogger","ODS","SharedWorkerEventManager","clearInterval","performanceNow","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=1e4,k=45e3,l=new Map();function m(a){return Math.floor(((i||(i=c("performanceNow")))()-a)/1e3)}function n(a,b){var e=0,f={};d("SharedWorkerEventManager").registerUptimeTrackerListener(a,function(a){a=a.trackerID;var c=f[a];if(c==null)return;(h||(h=d("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+b,1,0);h.bumpEntityKey(6653,"shared_worker_infra","worker_uptime_elapsed_time_to_response_sec."+m(c.createdMs)+"."+b);delete f[a]});return c("setInterval")(function(){var g=e++;c("setTimeout")(function(){var a=f[g];if(a==null)return;delete f[g]},k);f[g]={createdMs:(i||(i=c("performanceNow")))()};(h||(h=d("ODS"))).bumpFraction(6653,"shared_worker_infra","worker_uptime."+b,0,1);d("SharedWorkerEventManager").emitUptimeTracking(a,{trackerID:g})},j)}function a(a,b){if(l.has(b)){c("FBLogger")("worker").mustfix('Uptime tracking for worker "%s" already started.',b);return}l.set(b,{intervalID:n(a,b)})}function b(a){var b=l.get(a);b!=null&&(c("clearInterval")(b.intervalID),l["delete"](a))}g.startUptimeTracking=a;g.stopUptimeTracking=b}),98);
__d("XCometFBMultiSiteWebWorkerV2HasteResponseControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/webworker/rsrc/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("WebWorkerV2DynamicData",["FBLogger","Promise","XCometFBMultiSiteWebWorkerV2HasteResponseControllerRouteBuilder","cometAsyncFetchShared","err","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,b){b===void 0&&(b=!1);var c=a.name,d=i.get(c);if(d==null||b){var e=Math.floor(+Date.now()/1e3);d=j(a,b).then(function(a){return{time:e,data:a}});i.set(c,d)}return d}function j(a,d){var e=a.name,f=a.v2HasteResponsePreloader;if(f==null||d)return k(e,d);var g=null,i=c("gkx")("14133");a=new(h||(h=b("Promise")))(function(a,b){f.onLoaded(function(d){d=d.data;(d==null||d.hrp==null)&&(i&&b(c("err")("Preloaded data for worker %s is missing haste response",e)),c("FBLogger")("worker").mustfix("Preloaded data for worker %s is missing haste response, preload data keys: %s",e,d==null?"null":Object.keys(d).join(", ")));g=d;a(d)}).onError(b)});if(i){var j,l,m=function(){l==null&&(l=k(e,d));return l};return(h||(h=b("Promise"))).race([a["catch"](function(){return m()}),new h(function(a,b){j=window.setTimeout(function(){c("promiseDone")(m(),a,b)},1e4)})]).then(function(a){window.clearTimeout(j);return a})}return h.race([a,new h(function(a,b){window.setTimeout(function(){g==null?c("promiseDone")(k(e,d),a,b):a(g)},1e4)})])}function k(a,b){var d=null;b&&(d=new FormData(),d.set("__rev","null"),d.set("__spin_r","null"));return c("cometAsyncFetchShared")(c("XCometFBMultiSiteWebWorkerV2HasteResponseControllerRouteBuilder").buildUri({worker_module:a}).toString(),{formData:(d=d)!=null?d:void 0,data:{},getFullPayload:!0,method:"POST",skipSRState:!0,retryCount:b?2:void 0}).then(function(b){if(b!=null&&typeof b==="object"&&Object.prototype.hasOwnProperty.call(b,"hrp")&&typeof b.hrp==="object")return b;throw c("err")("Unexpected data from WorkerInitResourceDeliveryController for worker %s",a)})}g.readDynamicDataForWorker=a}),98);
__d("checkForIndexedDbSupported",[],(function(a,b,c,d,e,f){"use strict";function a(){return!window.indexedDB?!1:!0}f["default"]=a}),66);
__d("buildSharedWorkerInitQPLLogger",["QPLUserFlow","SiteData","checkForIndexedDbSupported","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(931595918,"2062"),i=0;function a(a){var b=!1,d=!1,e=i++;function f(f){var g=f.version,i=f.workerName,j=f.callReason,k=f.experimental_init;f=f.migrationEnabled;if(b||d)return;b=!0;g={"int":{version:g,clientRev:c("SiteData").client_revision},bool:{isDev:!1,supportsIDB:c("checkForIndexedDbSupported")(),experimental_init:k!=null?k:!1,migrationEnabled:f!=null?f:!1},string:{workerName:i,hostname:window.location.hostname,callReason:j,pageID:c("pageID")}};c("QPLUserFlow").start(h,{onFlowTimeout:function(){c("QPLUserFlow").addAnnotations(h,{bool:{setupTimeout:!0}},{instanceKey:e}),d=!0},cancelOnUnload:!0,annotations:g,timeoutInMs:66e4,instanceKey:e});a==null?void 0:a({type:"start",data:{annotations:g}})}function g(f,g){f=f+"_start";a==null?void 0:a({type:"point",data:{annotations:g,event:f}});if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e})}function j(f,g){f=f+"_end";a==null?void 0:a({type:"point",data:{annotations:g,event:f}});if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null?void 0:a({type:"point",data:{annotations:g,event:f}})}function k(f,g){a==null?void 0:a({type:"point",data:{annotations:g,event:f}});if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e})}function l(f){a==null?void 0:a({type:"end",data:{annotations:f}});if(!b||d)return;c("QPLUserFlow").endSuccess(h,{annotations:f,instanceKey:e});d=!0}function m(f,g){a==null?void 0:a({type:"end",data:{errorName:f,annotations:g}});if(!b||d)return;c("QPLUserFlow").endFailure(h,f,{annotations:g,instanceKey:e});d=!0}function n(f){a==null?void 0:a({type:"end",data:{annotations:f,cancel:!0}});if(!b||d)return;c("QPLUserFlow").endCancel(h,{annotations:f,instanceKey:e});d=!0}function o(f){a==null?void 0:a({type:"annotate",data:{annotations:f}});if(!b||d)return;c("QPLUserFlow").addAnnotations(h,f,{instanceKey:e})}return{start:f,endFailure:m,addAnnotations:o,endSuccess:l,endCancel:n,markEventStart:g,markEventEnd:j,markPoint:k}}g["default"]=a}),98);
__d("buildSharedWorkerTerminateQPLLogger",["QPLUserFlow","SiteData","pageID","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(931600201,"1438"),i=0;function a(a){var b=!1,d=!1,e=i++;function f(f){var g=f.workerName;f=f.callReason;if(b||d)return;b=!0;g={"int":{clientRev:c("SiteData").client_revision},bool:{isDev:!1},string:{workerName:g,hostname:window.location.hostname,callReason:f,pageID:c("pageID")}};c("QPLUserFlow").start(h,{onFlowTimeout:function(){c("QPLUserFlow").addAnnotations(h,{bool:{setupTimeout:!0}},{instanceKey:e}),d=!0},cancelOnUnload:!0,annotations:g,timeoutInMs:3e4,instanceKey:e});a==null?void 0:a({type:"start",data:{annotations:g}})}function g(f,g){if(!b||d)return;f=f+"_start";c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null?void 0:a({type:"point",data:{annotations:g,event:f}})}function j(f,g){if(!b||d)return;f=f+"_end";c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null?void 0:a({type:"point",data:{annotations:g,event:f}})}function k(f,g){if(!b||d)return;c("QPLUserFlow").addPoint(h,f,{data:g,instanceKey:e});a==null?void 0:a({type:"point",data:{annotations:g,event:f}})}function l(f){if(!b||d)return;c("QPLUserFlow").endSuccess(h,{annotations:f,instanceKey:e});a==null?void 0:a({type:"end",data:{annotations:f}});d=!0}function m(f,g){if(!b||d)return;c("QPLUserFlow").endFailure(h,f,{annotations:g,instanceKey:e});a==null?void 0:a({type:"end",data:{errorName:f,annotations:g}});d=!0}function n(f){if(!b||d)return;c("QPLUserFlow").endCancel(h,{annotations:f,instanceKey:e});a==null?void 0:a({type:"end",data:{annotations:f,cancel:!0}});d=!0}function o(f){if(!b||d)return;c("QPLUserFlow").addAnnotations(h,f,{instanceKey:e});a==null?void 0:a({type:"annotate",data:{annotations:f}})}return{start:f,endFailure:m,addAnnotations:o,endSuccess:l,endCancel:n,markEventStart:g,markEventEnd:j,markPoint:k}}g["default"]=a}),98);
__d("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/static_resources/sharedworker/init_script/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("getSharedWorkerHash",["uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(){return c("uuidv4")()}g["default"]=a}),98);
__d("getWorkerInitScriptSPINParams",["SiteData","StaticSiteData","objectEntries"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,b,d,e=(b=c("SiteData"))[(d=c("StaticSiteData")).spin_mhenv_key];d=babelHelpers["extends"]((a={},a[d.hs_key]=b.haste_session,a[d.spin_rev_key]=b[d.spin_rev_key],a[d.spin_branch_key]=b[d.spin_branch_key],a[d.spin_time_key]=b[d.spin_time_key],a),Boolean(e)?(b={},b[c("StaticSiteData").spin_mhenv_key]=e,b):null);return new Map(c("objectEntries")(d))}g["default"]=a}),98);
__d("createSharedWorkerBundleUrl",["XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a;return c("nullthrows")((a=c("XCometFBMultiSiteSharedWorkerStaticInitScriptControllerRouteBuilder").buildUri({hash:c("getSharedWorkerHash")()}).addQueryParams(c("getWorkerInitScriptSPINParams")()))==null?void 0:a.toString())}g["default"]=a}),98);
__d("createSharedWorkerV2BundleUrl",["BootloaderDocumentInserter","BootloaderPreloader","TrustedTypesWebWorkerScriptURLPolicy","XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","getSharedWorkerHash","getWorkerInitScriptSPINParams","gkx","justknobx","nullthrows","qex","supportsModuleWorker"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=c("supportsModuleWorker")(!0),b=c("getWorkerInitScriptSPINParams")();b.set("hash",c("getSharedWorkerHash")());b.set("use_broadcast",c("justknobx")._("4177"));b.set("worker_id_in_terminate",c("gkx")("12766"));b.set("with_worker_id_lock",c("qex")._("4412"));return c("nullthrows")((a=c("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:a?"MODULE":"CLASSIC"}))==null?void 0:(a=a.addQueryParams(b))==null?void 0:a.toString())}var i=c("gkx")("13019")?h():null;a=function(){if(i==null)return;var a=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(i);d("BootloaderDocumentInserter").batchDOMInsert(function(b){d("BootloaderPreloader").preloadResource({type:"js",src:a.toString(),nc:1},b)})};b=function(){var a=i;if(a!=null){i=null;return a}return h()};g.maybePreloadSharedWorkerV2BundleUrl=a;g.createSharedWorkerV2BundleUrl=b}),98);
__d("handleWorkerWriteError",["FBLogger","WebStorageCleanupReason"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a instanceof Error){c("FBLogger")("worker").catching(a).mustfix("Error occured checking in shared worker reference");return}if(a==="writes disabled"){var b;c("FBLogger")("worker").warn("Writes to WebAsyncStorage is disabled. Unable to save shared worker reference. Reason: %s",(b=d("WebStorageCleanupReason").getLastCleanupReason())!=null?b:"n/a");return}c("FBLogger")("worker").mustfix("Error occured checking in shared worker reference: %s",JSON.stringify(a))}g["default"]=a}),98);
__d("SharedWorkerInitFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4266");b=d("FalcoLoggerInternal").create("shared_worker_init",a);e=b;g["default"]=e}),98);
__d("logSharedWorkerInitStep",["SharedWorkerInitFalcoEvent","SiteData","gkx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h=c("uuidv4")();function a(a,b,d,e){if(!c("gkx")("21115"))return;c("SharedWorkerInitFalcoEvent").log(function(){return{client_id:h,bundle_name:a,client_rev:String(c("SiteData").client_revision),local_shared_worker_ref:b!=null?{bundle_url:b.url,rev:String(b.rev),spin_time:String(b.spin_time)}:null,new_shared_worker_ref:d!=null?{bundle_url:d}:null,init_step:e}})}g["default"]=a}),98);
__d("SharedWorkerBundleResource",["BootloaderPreloader","BrowserLockManager","Deferred","FBLogger","Promise","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLockManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerStatusLock","SharedWorkerStorageManager","SharedWorkerUptimeTracker","SharedWorkerV2ResourceExperimental","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","asyncToGeneratorRuntime","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerBundleUrl","createSharedWorkerV2BundleUrl","createSharedWorkerV2BundleUrlExperimental","err","getErrorSafe","gkx","handleWorkerWriteError","justknobx","logSharedWorkerInitStep","pageID","promiseDone","qex","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h,i=5e3,j="shared_worker_broadcast_channel";d("createSharedWorkerV2BundleUrl").maybePreloadSharedWorkerV2BundleUrl();var k=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this)||this;c.name="SelfTerminationError";c.message="Worker self terminated with the reason: "+a;c.reason=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function l(a,b,e,f){f==null?void 0:f.markEventStart("shared_worker_construct");var g=new SharedWorker(c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),b);f==null?void 0:f.markEventEnd("shared_worker_construct");g.addEventListener("error",function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(f,a,b)});var h=new Set();d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(g,function(a,c,e){d("SharedWorkerLoggingUtils").logSelfTermination(b,a,c,e)},{once:!0});var i=0;d("SharedWorkerEventManager").registerConnectionAckListener(g,function(a,b){i++;if(h.has("worker_connection_established")){f==null?void 0:f.addAnnotations({"int":{connectionAckNum:i}});return}h.add("worker_connection_established");f==null?void 0:f.addAnnotations({string:{connectedFrom:a,workerID:b}});f==null?void 0:f.markPoint("worker_connection_established")});d("SharedWorkerEventManager").registerWorkerInitPointsListener(g,function(a){if(h.has(a))return;h.add(a);f==null?void 0:f.markPoint("worker_init_point_"+a)});g.port.start();d("SharedWorkerEventManager").registerExecuteWorkerImportsListener(g,f,function(a){var b=a.err;a=a.attempts;f==null?void 0:f.addAnnotations({string:{importsError:b},"int":{importAttempts:a}});f==null?void 0:f.markPoint(b==null?"bundle_imports_success":"bundle_imports_failure")});var j=new(c("Deferred"))();d("SharedWorkerEventManager").registerExecuteWorkerAckListener(g,f,function(a){var b=a.workerSpinTime,e=a.err,g=a.isFirstInit,h=a.workerRev;a=a.workerSpinMode;d("SharedWorkerLoggingUtils").logExecuteAck(f,b,e,g,h,a);e!=null||b==null||h==null?j.reject(c("err")(e!=null?e:"no worker rev or spin time")):j.resolve({rev:h,spinTime:b})});f==null?void 0:f.markEventStart("execute_worker");d("SharedWorkerEventManager").emitExecuteWorker(g,{jsModuleResource:e,isDev:!1});return j.getPromise().then(function(a){var b=a.rev;a=a.spinTime;return{worker:g,rev:b,spinTime:a}})}function m(a,b,d){d==null?void 0:d.markEventStart("worker_constructor");a=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a);b=c("supportsModuleWorker")(!0)?new SharedWorker(a,{name:b,type:"module"}):new SharedWorker(a,b);d==null?void 0:d.markEventEnd("worker_constructor",{string:{workerUrl:a.toString()}});return b}function n(a,b,c){var e=[],f=new Set();e.push(d("SharedWorkerEventManager").registerWorkerInitPointsListener(a,function(a){if(f.has(a))return;f.add(a);c==null?void 0:c.markPoint("worker_init_point_"+a)}));e.push(d("SharedWorkerEventManager").registerHrpInitListener(a,c,function(){}));var g=function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(c,a,b)};a.addEventListener("error",g);e.push(function(){return a.removeEventListener("error",g)});return e}function o(a,b,e,f){d("SharedWorkerMigrationUtils").shouldCheckForDynamicStringWorker(b)&&(f==null?void 0:f.markEventStart("dynamic_string_worker_check"),c("promiseDone")(d("SharedWorkerMigrationUtils").maybeTerminateDynamicStringWorker(b),function(a){f==null?void 0:f.markEventEnd("dynamic_string_worker_check",{bool:{didTerminateDynamicStringWorker:a}})}));var g=m(a,b,f);d("SharedWorkerEventManager").registerConnectionAckListener(g,function(a,b,c){f==null?void 0:f.addAnnotations({string:{connectedFrom:a,workerID:b,hrpStatus:c}}),f==null?void 0:f.markPoint("worker_connection_established")});var h=new(c("Deferred"))();d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(g,function(a,c,e,g){f==null?void 0:f.addAnnotations({string:{selfTerminationError:g}}),d("SharedWorkerLoggingUtils").logSelfTermination(b,a,c,e),h.reject(new k(c))},{once:!0});n(g,b,f);g.port.start();d("SharedWorkerEventManager").emitConnectionAckRequest(g);f==null?void 0:f.markPoint("read_dynamic_data");c("promiseDone")(H(e,!1,f).then(function(a){a=a.hrp;f==null?void 0:f.markEventStart("hrp_init");d("SharedWorkerEventManager").emitHrpInit(g,{hrp:a.hrp,js_env:a.js_env,isDev:!1},f)},function(a){a=c("getErrorSafe")(a);f==null?void 0:f.addAnnotations({string:{hrpInitErr:a.toString()}})}));d("SharedWorkerEventManager").registerExecuteWorkerAckListener(g,f,function(a){var b=a.workerSpinTime,e=a.err,g=a.isFirstInit,i=a.workerRev;a=a.workerSpinMode;d("SharedWorkerLoggingUtils").logExecuteAck(f,b,e,g,i,a);e!=null||i==null||b==null?h.reject(c("err")(e!=null?e:"no worker rev or spin time")):h.resolve({rev:i,spinTime:b})});f==null?void 0:f.markEventStart("execute_worker");d("SharedWorkerEventManager").emitExecuteWorker(g);return h.getPromise().then(function(a){var b=a.rev;a=a.spinTime;return{worker:g,rev:b,spinTime:a}})}function p(a,b,e,f,g,h){var i=new(c("Deferred"))();d("SharedWorkerEventManager").registerGetWorkerRevListener(a,h,function(a){var j=a.rev;a=a.spinTime;c("promiseDone")(d("SharedWorkerStorageManager").saveSharedWorkerReference(e,{url:b,rev:j,spin_time:a,version:g.version,rsrcBundleUrl:g.getJSModuleBundleResource().url,sandboxOnlyChecksum:g.sandboxOnlyChecksum},h).then(function(){return d("SharedWorkerStorageManager").getSharedWorkerReference(e,h)}).then(function(a){c("logSharedWorkerInitStep")(e,a,g.resourceUrlForLogging,"after_worker_reference_save")}),function(){h.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!0}}),i.resolve(),f()},function(a){h.markEventEnd("get_worker_rev",{bool:{successfullySavedWorkerRef:!1}}),i.reject(a),c("handleWorkerWriteError")(a),f()})});h.markEventStart("get_worker_rev");d("SharedWorkerEventManager").emitGetRev(a);return i.getPromise()}function q(a,b,e,f){f===void 0&&(f=null);var g=[],h=function(c,a,f){g.forEach(function(a){return a()}),b(c,a,f),d("SharedWorkerUptimeTracker").stopUptimeTracking(e)};g.push(d("SharedWorkerEventManager").registerForwardListeners(a));g.push(d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){var b=a.reason;a=a.workerID;d("SharedWorkerLoggingUtils").logShutdown(e,null,b,a);b=b==="dynamic_string_worker_rollback"?"requested-upgrade":b;h(b,a,"sw-shutdown")}));g.push(d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(a,function(b,c,a){h(c,a,"self-terminate")}));c("qex")._("4410")&&c("supportsNativeWebLock")()&&f!=null&&g.push(L(e,f,function(){h("worker-id-lock-release",f,"self-terminate")}));c("qex")._("4411")&&self.BroadcastChannel!=null&&f!=null&&g.push(K(e,function(a){h(a,f,"broadcast")}));d("SharedWorkerDevChangeManager").trackCreatedWorker(e);d("SharedWorkerUptimeTracker").startUptimeTracking(a,e);c("logSharedWorkerInitStep")(e,null,null,"create_worker_end")}function r(a,b,c,d,e,f){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){h.addAnnotations({string:{initFlow:"use_existing_ref"}});c("logSharedWorkerInitStep")(a,null,null,"using_existing_worker_ref");var i=d("SharedWorkerMigrationUtils").isLegacyWorkerURL(b.url),j=(yield b.version===2?i?o(b.url,a,e.getJSModuleBundleResource(),h):d("SharedWorkerV2ResourceExperimental").startV2Worker(b.url,a,e.getJSModuleBundleResource(),h):l(b.url,a,e.getJSModuleBundleResource(),h));j=j.worker;f();b.version===2&&!i&&void p(j,b.url,a,f,e,h);q(j,g,a);return j});return s.apply(this,arguments)}function t(a,b,c,d){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){e.markPoint("terminate_on_upgrade");var g=new(c("Deferred"))(),h=d("SharedWorkerMigrationUtils").isStatusLockHeld(a);if((yield d("SharedWorkerMigrationUtils").isDynamicStringWorkerRunning(a))&&c("supportsNativeWebLock")()&&f===!1)g.resolve(),e.addAnnotations({string:{oldWorkerShutdown:"not_needed_for_dynamic_string"}});else if(self.BroadcastChannel!=null&&c("gkx")("13712")){var i=F(a);i.postMessage({type:"terminate",reason:"requested-upgrade",pageID:c("pageID")});g.resolve();e.addAnnotations({string:{oldWorkerShutdown:"broadcast"}})}else if(yield h){b.version===2&&c("supportsModuleWorker")(!0)?i=new SharedWorker(b.url,{name:a,type:"module"}):i=new SharedWorker(b.url,a);d("SharedWorkerEventManager").registerWorkerShutdownListener(i,function(a){var b=a.workerID,h=a.isInitialized;f?c("setTimeout")(function(){e.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:b},bool:{oldWorkerWasInitialized:h}}),g.resolve()},d("SharedWorkerV2ResourceExperimental").DELAY_FOR_WORKER_SHUTDOWN_MS):(e.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:b},bool:{oldWorkerWasInitialized:h}}),g.resolve());e.addAnnotations({string:{oldWorkerShutdown:"success"}})},{once:!0});e.markEventStart("old_worker_shutdown");i.port.start();d("SharedWorkerEventManager").emitWorkerShutdown(i,{upgrade:!0})}else g.resolve(),e.addAnnotations({string:{oldWorkerShutdown:"not_needed"}});f===!0?yield g.getPromise():g.resolve()});return u.apply(this,arguments)}function v(a,b,c,d,e,f,g){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e,f,g){f.addAnnotations({string:{initFlow:"upgrade_worker_ref"}});yield t(a,b,f,g);return y(a,c,d,e,f,"upgrading_worker_ref")});return w.apply(this,arguments)}function x(a,b,c,d,e){e.addAnnotations({string:{initFlow:"new_worker_ref"}});return y(a,b,c,d,e,"new_worker_ref")}function y(a,b,c,d,e,f){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){c("logSharedWorkerInitStep")(a,null,null,h);(yield d("SharedWorkerMigrationUtils").isStatusLockHeld(a))&&c("FBLogger")("worker").info("Trying to create a worker %s while old one is still running",a);var i=(yield b.createSharedWorker()),j=i[0];i=i[1].worker;h==="upgrading_worker_ref"&&(yield d("SharedWorkerStorageManager").removeSharedWorkerReference(a,g));yield p(i,j,a,e,b,g);q(i,f,a);return i});return z.apply(this,arguments)}function A(a,b){var e=d("SharedWorkerDevChangeManager").shouldUseStorageWorkerForDev(a.name,{storageWorkerResource:b,tabResource:a}),f=b.spin_time,g=b.version;b=b.rev;return b>=c("SiteData").client_revision&&(a.version===g||f>=c("SiteData")[c("StaticSiteData").spin_time_key])&&e}function B(a,b,c,d,e){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){f.markEventStart("create_worker");var h=a.name;d("SharedWorkerUptimeTracker").stopUptimeTracking(h);f.addAnnotations({bool:{workerAlreadyRunning:c("supportsNativeWebLock")()?yield d("SharedWorkerMigrationUtils").isStatusLockHeld(h):null}});var i=c("supportsNativeWebLock")()?yield d("SharedWorkerMigrationUtils").isStatusLockHeld(h):!0;if(!g&&a.version===2&&c("gkx")("13712"))return N(a,b,e,f);var j=(yield d("SharedWorkerStorageManager").getSharedWorkerReference(h,f));c("logSharedWorkerInitStep")(h,j,a.resourceUrlForLogging,"create_worker_start");var k=j!=null&&d("SharedWorkerMigrationUtils").isLegacyWorkerURL(j==null?void 0:j.url);i=g&&i===!1&&k;if(j==null||i)return x(h,a,b,e,f);k=j.spin_time;i=j.version;var l=j.rev;f.addAnnotations({"int":{storageWorkerSpinTime:k,storageWorkerVersion:i,storageWorkerRev:l}});if(A(a,j))return r(h,j,a,b,e,f);else return v(h,j,a,b,e,f,g)});return C.apply(this,arguments)}function a(a,e,f){f=f!=null?f:{};var g=f.onQPLEvent;f=f.reason;var h=a.name,i=c("buildSharedWorkerInitQPLLogger")(g);i.start({version:1,workerName:h,callReason:f});var j=new(c("Deferred"))();d("SharedWorkerLockManager").withWorkerLock(function(d){var f;c("promiseDone")(B({name:h,version:1,resourceUrlForLogging:(f=a.url)!=null?f:"",getJSModuleBundleResource:function(){return a},createSharedWorker:function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=c("createSharedWorkerBundleUrl")();return[b,yield l(b,h,a,i)]});function e(){return d.apply(this,arguments)}return e}()},d,e,i,!1),function(a){i.markEventEnd("create_worker"),i.endSuccess(),j.resolve(a)},function(a){a=typeof a==="string"?c("err")(a):a;i.endFailure("worker_init_failure",{string:{workerInitFailureReason:a.message,errorName:a.name}});j.reject(a);d()})},{workerQPLLogger:i,onLockTimeout:function(){return j.reject(c("err")("Worker lock timeout"))}});return j.getPromise()}function D(a,e,f,g){g===void 0&&(g=0);var i=a.name,j=f!=null?f:{},l=j.onQPLEvent;j=j.reason;var m=c("buildSharedWorkerInitQPLLogger")(l);m.start({version:2,workerName:i,callReason:j,experimental_init:f==null?void 0:f.useDynamicStringInit});m.addAnnotations({bool:{usingModuleWorker:c("supportsModuleWorker")(!0)}});var n=new(c("Deferred"))();l=(f==null?void 0:f.useDynamicStringInit)!==!0&&c("qex")._("4050")===!0;j=function(g){c("promiseDone")(B({name:i,version:2,getJSModuleBundleResource:function(){return a},sandboxOnlyChecksum:a.sandboxOnlyChecksum,createSharedWorker:(f==null?void 0:f.useDynamicStringInit)===!0?b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=c("createSharedWorkerV2BundleUrlExperimental")(i);return[b,yield d("SharedWorkerV2ResourceExperimental").startV2Worker(b,i,a,m)]}):b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=d("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl();return[b,yield o(b,i,a,m)]})},g,e,m,(f==null?void 0:f.useDynamicStringInit)===!0),function(a){m.markEventEnd("create_worker"),m.endSuccess(),n.resolve(a)},function(a){a=typeof a==="string"?c("err")(a):a;n.reject(a);g()})};l?j(function(){}):d("SharedWorkerLockManager").withWorkerLock(j,{workerQPLLogger:m,onLockTimeout:function(){return n.reject(c("err")("Worker lock timeout"))},onLockFail:function(a){n.reject(a)}});return n.getPromise()["catch"](function(d){if(d instanceof k&&g<2){m.endCancel({string:{workerInitCancelReason:d.message},"int":{workerInitRetry:g}});return new(h||(h=b("Promise")))(function(b,d){c("setTimeout")(function(){c("promiseDone")(D(a,e,f,g+1),b,d)},g===0?200:500)})}m.endFailure("worker_init_failure",{string:{workerInitFailureReason:d.message,errorName:d.name}});throw d})}function e(a,b,c){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=e!=null?e:a.name,j=new(c("Deferred"))(),k=c("buildSharedWorkerTerminateQPLLogger")();k.start({workerName:g});c("promiseDone")(c("supportsNativeWebLock")()?d("SharedWorkerMigrationUtils").isStatusLockHeld(g):(h||(h=b("Promise"))).resolve(void 0),function(a){return k.addAnnotations({bool:{workerAlreadyRunning:a}})});k.addAnnotations({string:{reason:f,terminatingPageId:c("pageID")}});if(self.BroadcastChannel!=null&&c("gkx")("13712")){e=F(g);e.postMessage({type:"terminate",reason:f,pageID:c("pageID")});c("promiseDone")(d("SharedWorkerStorageManager").removeSharedWorkerReference(g,k).then(function(){k.endSuccess(),j.resolve()}));return j.getPromise()}d("SharedWorkerLockManager").withWorkerLock(function(e){c("promiseDone")(d("SharedWorkerStorageManager").getSharedWorkerReference(g,k).then(function(e){k.markPoint("read_worker_reference",{"int":{storageWorkerVersion:e==null?void 0:e.version},bool:{storageReferenceExists:e!=null}});if(e!=null){var f=d("SharedWorkerMigrationUtils").isLegacyWorkerURL(e.url);k.addAnnotations({bool:{isLegacy:f}});var i=e.version===2?f?o(e.url,g,a,void 0).then(function(a){a=a.worker;return a}):d("SharedWorkerV2ResourceExperimental").startV2Worker(e.url,g,a,void 0).then(function(a){a=a.worker;return a}):l(e.url,g,a).then(function(a){a=a.worker;return a});f=c("justknobx")._("3569")?(h||(h=b("Promise"))).resolve(null):d("SharedWorkerStorageManager").removeSharedWorkerReference(g,k);return f.then(function(){return i})}k.markPoint("storage_resource_empty");return null}),function(a){try{e();d("SharedWorkerUptimeTracker").stopUptimeTracking(g);if(a==null){k.endSuccess();j.resolve();return}d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){var e=a.workerID;a=a.isInitialized;k.markPoint("worker_shut_down",{string:{workerID:e},bool:{wasInitialized:a}});e=c("justknobx")._("3569")?d("SharedWorkerStorageManager").removeSharedWorkerReference(g,k):(h||(h=b("Promise"))).resolve(null);c("promiseDone")(e,function(){return k.endSuccess()},function(a){k.endFailure("failed_to_remove_worker_reference",{string:{errorDescription:a.toString()}})});j.resolve()},{once:!0});d("SharedWorkerEventManager").emitWorkerShutdown(a,{reason:f})}catch(a){k.endFailure("terminate_worker_failure",{string:{workerTerminateFailReason:a.message}}),j.reject(a.message)}},function(a){c("FBLogger")("worker").catching(c("getErrorSafe")(a)).mustfix("Failed to terminate worker"),k.endFailure("connect_to_worker_failure",{string:{workerTerminateFailReason:a.message}}),j.reject(a.message),e()})},{workerQPLLogger:k});c("setTimeout")(function(){return j.reject()},i);return j.getPromise()});return E.apply(this,arguments)}function F(a){return new self.BroadcastChannel(j+"_"+a)}function f(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("SharedWorkerStorageManager").getSharedWorkerReference(a.name));return a!=null});return G.apply(this,arguments)}function H(a,b,c){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e==null?void 0:e.markEventStart("load_hrp");b=(yield d("WebWorkerV2DynamicData").readDynamicDataForWorker(a,b));var f=b.data;b=b.time;e==null?void 0:e.markEventEnd("load_hrp");try{var g,h=c("justknobx")._("1979");e==null?void 0:e.markEventStart("prefetch_worker_scripts",{bool:{prefetchWorkerScripts:h},"int":{resourcesCount:(g=f.hrp.allResources)==null?void 0:g.length}});h&&d("BootloaderPreloader").preloadWorkerJSFromHRP(f.hrp)}catch(b){g=c("getErrorSafe")(b);e==null?void 0:e.markPoint("prefetch_worker_scripts_fail",{string:{hrpInitErr:g.toString()}});c("FBLogger")("worker").catching(g).warn("Failed to preload worker %s JS from HRP",a.name)}e==null?void 0:e.markEventEnd("prefetch_worker_scripts");return{hrp:f,time:b,rev:(h=f.hrp.hsrp)==null?void 0:(g=h.hblp)==null?void 0:(a=g.consistency)==null?void 0:a.rev}});return I.apply(this,arguments)}function J(b,a,c){return d("SharedWorkerStorageManager").getOrUpdateWorkerReference(b.name,function(d){if(d==null)return a;if(A(b,d))return d;void t(b.name,d,c,!1);return a})}function K(a,b){if(self.BroadcastChannel!=null){var d=F(a),e=function(a){a=a.data;if(typeof a==="object"&&(a==null?void 0:a.type)==="terminate"){var d=typeof a.reason==="string"?a.reason:"unknown";a=typeof a.pageID==="string"?a.pageID:null;if(a!=null&&a===c("pageID")&&d==="requested-upgrade")return;b(d)}};d.addEventListener("message",e);return function(){return d.removeEventListener("message",e)}}return function(){}}function L(a,b,e){var f=new AbortController();void (c("BrowserLockManager")==null?void 0:c("BrowserLockManager").request(d("SharedWorkerStatusLock").getWorkerIdStatusLockName(a,b),{signal:f.signal},function(a){a!=null&&e()}));return function(){f.abort()}}function M(a,b,e,f){var g=new(c("Deferred"))();void d("SharedWorkerStorageManager").getOrUpdateWorkerReference(a,function(a){if(a==null||a.url!==b){g.resolve("url-was-changed");return a}return a.rev!==e||a.spin_time!==f?babelHelpers["extends"]({},a,{rev:e,spin_time:f}):a}).then(function(){g.resolve("success")});return g.getPromise()}function N(a,b,c,d){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(a.version!==2)throw c("err")("Worker version must be 2");var i=a.name,j=(yield H(a.getJSModuleBundleResource(),!1,g)),l=j.rev;if(l==null)throw c("err")("HRP rev or spin time is null");l={url:d("createSharedWorkerV2BundleUrl").createSharedWorkerV2BundleUrl(),rev:l,spin_time:j.time,version:a.version,rsrcBundleUrl:a.getJSModuleBundleResource().url,sandboxOnlyChecksum:a.sandboxOnlyChecksum};var o=new(c("Deferred"))(),p=new(c("Deferred"))(),r=[];try{var s=function(a){p.reject(a),o.reject(a)};r.push(K(i,function(a){s(new k("broadcast-"+a))}));g==null?void 0:g.markEventStart("get_worker_reference");var t=(yield J(a,l,g));g==null?void 0:g.markEventEnd("get_worker_reference");var u=m(t.url,i,g);r.push(d("SharedWorkerEventManager").registerConnectionAckListener(u,function(a,b,c){g==null?void 0:g.addAnnotations({string:{connectedFrom:a,workerID:b}}),o.resolve({hrpStatus:c!=null?c:"no-hrp",workerID:b})}));r.push(d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(u,function(a,b,c,e){g==null?void 0:g.addAnnotations({string:{selfTerminationError:e}}),d("SharedWorkerLoggingUtils").logSelfTermination(i,a,b,c),s(new k(b))},{once:!0}));r.push(d("SharedWorkerEventManager").registerWorkerShutdownListener(u,function(a){var b=a.reason;a=a.workerID;d("SharedWorkerLoggingUtils").logShutdown(i,null,b,a);s(new k(b!=null?b:"sw-shutdown-unknown"))}));r.push.apply(r,n(u,i,g));g.markEventStart("worker_connection");u.port.start();d("SharedWorkerEventManager").emitConnectionAckRequest(u);var v=(yield o.getPromise()),w=v.hrpStatus;v=v.workerID;g.markEventEnd("worker_connection");c("qex")._("4410")&&c("supportsNativeWebLock")()&&v!=null&&r.push(L(i,v,function(){s(new k("worker-id-lock-release"))}));if(w==="no-hrp"){g==null?void 0:g.markPoint("read_dynamic_data");w=l.rev>=t.rev;l=w?(h||(h=b("Promise"))).resolve(j):H(a.getJSModuleBundleResource(),!0,g);c("promiseDone")(l.then(function(a){g==null?void 0:g.markEventStart("hrp_init"),d("SharedWorkerEventManager").emitHrpInit(u,{hrp:a.hrp.hrp,js_env:a.hrp.js_env,isDev:!1},g)},function(a){a=c("getErrorSafe")(a);g==null?void 0:g.markPoint("hrp_init_fail",{string:{hrpInitErr:a.toString()}});s(a)}))}r.push(d("SharedWorkerEventManager").registerExecuteWorkerAckListener(u,g,function(a){var b=a.workerSpinTime,e=a.err,f=a.isFirstInit,h=a.workerRev;a=a.workerSpinMode;d("SharedWorkerLoggingUtils").logExecuteAck(g,b,e,f,h,a);e!=null||b==null||h==null?p.reject(c("err")(e!=null?e:"no worker rev or spin time")):p.resolve({workerRev:h,workerSpinTime:b})}));g==null?void 0:g.markEventStart("execute_worker");d("SharedWorkerEventManager").emitExecuteWorker(u);w=(yield p.getPromise());j=w.workerRev;a=w.workerSpinTime;g==null?void 0:g.markEventStart("update_worker_ref");l=(yield M(i,t.url,j,a));g==null?void 0:g.markEventEnd("update_worker_ref",{string:{updateWorkerRef:l}});if(l==="url-was-changed"){d("SharedWorkerEventManager").emitWorkerShutdown(u,{reason:"url-was-changed"});throw new k("url-was-changed")}e();q(u,f,i,v);return u}finally{r.forEach(function(a){return a()})}});return O.apply(this,arguments)}g.SHARED_WORKER_BROADCAST_CHANNEL=j;g.SelfTerminationError=k;g.createPushSafeSharedWebWorkerAsync=a;g.createPushSafeSharedWebWorkerV2Async=D;g.terminateSharedWorker=e;g.doesSharedWorkerReferenceExist=f}),98);
__d("SharedWorkerV2ResourceExperimental",["Deferred","Promise","SharedWorkerBundleResource","SharedWorkerDevChangeManager","SharedWorkerEventManager","SharedWorkerLoggingUtils","SharedWorkerMigrationUtils","SharedWorkerUptimeTracker","SiteData","StaticSiteData","TrustedTypesWebWorkerScriptURLPolicy","asyncToGeneratorRuntime","buildSharedWorkerInitQPLLogger","buildSharedWorkerTerminateQPLLogger","createSharedWorkerV2BundleUrlExperimental","justknobx","pageID","promiseDone","setTimeout","supportsModuleWorker","supportsNativeWebLock"],(function(a,b,c,d,e,f,g){"use strict";var h,i=50,j=5e3,k=2e3;function l(a,b,e,f){return d("SharedWorkerDevChangeManager").shouldUpgradeWorkerForDevExperimental(a)&&!f?!0:b<c("SiteData").client_revision&&e<c("SiteData")[c("StaticSiteData").spin_time_key]}function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){var g=a.name,j=c("buildSharedWorkerInitQPLLogger")(f==null?void 0:f.onQPLEvent);j.start({version:2,workerName:g,experimental_init:!0,callReason:f==null?void 0:f.reason,migrationEnabled:!0});j.markEventStart("create_worker");c("supportsNativeWebLock")()&&c("promiseDone")(d("SharedWorkerMigrationUtils").isStatusLockHeld(g).then(function(a){j.addAnnotations({bool:{workerAlreadyRunning:a}})}));(f==null?void 0:f.migratedWorker)===!0&&(yield d("SharedWorkerMigrationUtils").checkStorageAndTerminateLegacyWorker({name:g,logger:j}));f=(yield n(a,j));var k=f.worker,l=f.needsUpgrade;return new(h||(h=b("Promise")))(function(b,f){var h=function(a){return b(p(a,g,j,e))};l?(d("SharedWorkerEventManager").registerWorkerShutdownListener(k,function(b){var d=b.workerID;b=b.isInitialized;j.markEventEnd("old_worker_shutdown",{string:{oldWorkerID:d},bool:{oldWorkerWasInitialized:b}});c("setTimeout")(function(){return n(a,j).then(function(a){a=a.worker;return h(a)})},i)},{once:!0}),j.markEventStart("old_worker_shutdown"),d("SharedWorkerEventManager").emitWorkerShutdown(k,{upgrade:!0})):h(k)})});return m.apply(this,arguments)}function n(a,b){var e=a.name,f=c("createSharedWorkerV2BundleUrlExperimental")(e);f=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(f);var g=c("supportsModuleWorker")(!0)?"module":"classic",h=new SharedWorker(f,{name:e,type:g}),i=new Set();d("SharedWorkerEventManager").registerWorkerInitPointsListener(h,function(a){if(i.has(a))return;i.add(a);b==null?void 0:b.markPoint("worker_init_point_"+a)});var j=new(c("Deferred"))();d("SharedWorkerEventManager").registerGetWorkerRevListener(h,b,function(c){var d=c.rev,f=c.spinTime;c=c.workerChecksum;c=l(e,d,f,a.sandboxOnlyChecksum===c);j.resolve(c);c?b.addAnnotations({"int":{oldWorkerRev:d,oldWorkerSpinTime:f}}):b.addAnnotations({"int":{workerRev:d,workerSpinTime:f}})});o(h,e,b);h.port.start();d("SharedWorkerEventManager").emitConnectionAckRequest(h);return j.getPromise().then(function(a){return{worker:h,needsUpgrade:a}})}function o(a,b,c,e){a.addEventListener("error",function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(c,a,b)});d("SharedWorkerEventManager").registerForwardListeners(a);d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(a,function(a,b,d,e){c.endFailure("worker_init_failure",{string:{selfTerminationError:e,selfTerminationReason:b}})},{once:!0});d("SharedWorkerEventManager").registerConnectionAckListener(a,function(a,b){c==null?void 0:c.addAnnotations({string:{connectedFrom:a,workerID:b}}),c==null?void 0:c.markPoint("worker_connection_established")},{once:!0});return a}function p(a,b,e,f){d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){var e=a.reason,g=a.workerID;d("SharedWorkerLoggingUtils").logShutdown(b,null,e,g);e==="requested-upgrade"?c("setTimeout")(function(){return f==null?void 0:f(e,g)},1e3):e==="dynamic_string_worker_rollback"?f==null?void 0:f("maw_request_refresh",g):f==null?void 0:f(e,g);d("SharedWorkerUptimeTracker").stopUptimeTracking(b)});e.markEventEnd("create_worker");e.endSuccess();d("SharedWorkerUptimeTracker").startUptimeTracking(a,b);d("SharedWorkerDevChangeManager").trackCreatedWorker(b);return a}function q(a,e,f,g,i){i===void 0&&(i=0);var j=f.name,l=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a),m=c("supportsModuleWorker")(!0)?"module":"classic",n=new SharedWorker(l,{name:j,type:m});g==null?void 0:g.markPoint("shared_worker_construct_done");g==null?void 0:g.addAnnotations({string:{workerUrl:l.toString()}});var o=new(c("Deferred"))(),p=[];p.push(d("SharedWorkerEventManager").registerConnectionAckListener(n,function(a,b){g==null?void 0:g.addAnnotations({string:{connectedFrom:a,workerID:b}}),g==null?void 0:g.markPoint("worker_connection_established"),o.resolve()},{once:!0}));p.push(d("SharedWorkerEventManager").registerWorkerInitPointsListener(n,function(a){g==null?void 0:g.markPoint("worker_init_point_"+a)}));p.push(d("SharedWorkerEventManager").registerForwardListeners(n));d("SharedWorkerEventManager").emitConnectionAckRequest(n);n.addEventListener("error",function(a){d("SharedWorkerLoggingUtils").logSharedWorkerError(g,a,e)});var r=new(c("Deferred"))();p.push(d("SharedWorkerEventManager").registerGetWorkerRevListener(n,g,function(a){var b=a.rev;a=a.spinTime;g==null?void 0:g.addAnnotations({"int":{initialWorkerRev:b,initialSpinTime:a}});r.resolve({worker:n,rev:b,spinTime:a})}));p.push(d("SharedWorkerEventManager").registerWorkerSelfTerminationListener(n,function(a,b,c,f){g==null?void 0:g.addAnnotations({string:{selfTerminationError:f}}),d("SharedWorkerLoggingUtils").logSelfTermination(e,a,b,c),r.reject(new(d("SharedWorkerBundleResource").SelfTerminationError)(b))},{once:!0}));p.push(d("SharedWorkerEventManager").registerWorkerShutdownListener(n,function(a){var b=a.reason;a=a.workerID;g==null?void 0:g.addAnnotations({string:{shutdownReason:b}});d("SharedWorkerLoggingUtils").logShutdown(e,null,b,a);r.reject(new(d("SharedWorkerBundleResource").SelfTerminationError)(b!=null?b:"unknownShutdown"))},{once:!0}));n.port.start();i===0&&c("justknobx")._("1707")&&void (h||(h=b("Promise"))).race([o.getPromise().then(function(){return"success"}),new h(function(a){c("setTimeout")(function(){a("timeout")},k)})]).then(function(b){if(b==="timeout"){b=n;var c=q(a,e,f,g,i+1);void c.then(function(a){return r.resolve(a)});p.forEach(function(a){return a()});b.port.close()}});return r.getPromise()}function e(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=a.name,f=new(c("Deferred"))();a=(yield d("SharedWorkerMigrationUtils").isStatusLockHeld(e));var g=c("buildSharedWorkerTerminateQPLLogger")();if(!a){g.start({workerName:e});g.markPoint("no_worker_running");g.endSuccess();return}g.start({workerName:e});g.addAnnotations({string:{reason:b,terminatingPageId:c("pageID")}});a=c("createSharedWorkerV2BundleUrlExperimental")(e);a=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(a);var h=c("supportsModuleWorker")(!0)?"module":"classic";a=new SharedWorker(a,{workerName:e,type:h});g.markPoint("worker_created");d("SharedWorkerEventManager").registerWorkerShutdownListener(a,function(a){a=a.workerID;g.markPoint("worker_shut_down",{string:{workerID:a}});g.endSuccess();d("SharedWorkerUptimeTracker").stopUptimeTracking(e);f.resolve()},{once:!0});a.port.start();d("SharedWorkerEventManager").emitWorkerShutdown(a,{reason:b});c("setTimeout")(function(){return f.reject()},j);return f.getPromise()});return r.apply(this,arguments)}g.DELAY_FOR_WORKER_SHUTDOWN_MS=i;g.createPushSafeSharedWebWorkerV2Async=a;g.startV2Worker=q;g.terminateSharedWorker=e}),98);
__d("WebWorkerV2Resource",["TrustedTypesWebWorkerScriptURLPolicy","WebWorkerV2DynamicData","XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder","forEachObject","getAsyncParamsFromCurrentPageURI","getWorkerInitScriptSPINParams","nullthrows","promiseDone","supportsModuleWorker"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e){b=b!=null?b:a.name;var f=c("supportsModuleWorker")(!1)&&e!==!0?"module":"classic",g=c("getWorkerInitScriptSPINParams")();c("forEachObject")(c("getAsyncParamsFromCurrentPageURI")(),function(a,b){g.set(b,a)});e=c("nullthrows")(c("XCometFBMultiSiteWebWorkerV2InitScriptControllerRouteBuilder").buildUri({worker_type:c("supportsModuleWorker")(!1)&&e!==!0?"MODULE":"CLASSIC"}).addQueryParams(g)).toString();e=c("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e);var h=new Worker(e,{name:b,type:f});c("promiseDone")(d("WebWorkerV2DynamicData").readDynamicDataForWorker(a).then(function(a){a=a.data;h.postMessage({type:"ww-hrp-init",hrp:a.hrp,js_env:a.js_env,is_dev:!1,tiered:!0})}));return{worker:h,url:e.toString()}}g.createDedicatedV2WebWorker=a}),98);
__d("MAWWebWorkerSingleton",["Deferred","MAWInit","MAWMIC","MAWStartupLoggingUtils","MAWWaitForBackendSetup","MAWWorkerWatchdogRecovery","Promise","SharedWorkerBundleResource","SharedWorkerMigrationUtils","SharedWorkerV2ResourceExperimental","WAResolvable","WebWorkerV2Resource","clearTimeout","cr:6600","err","gkx","promiseDone","setTimeout","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=function(a){i=a},k=function(){return i},l=f,m=new(d("WAResolvable").Resolvable)(),n=null;function a(){return d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?d("SharedWorkerMigrationUtils").isStatusLockHeld(b("cr:6600").name):(h||(h=b("Promise"))).resolve(n!==null)}function e(){var a={isSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),nativeLocksSupported:d("SharedWorkerMigrationUtils").supportsNativeWebLocks(),workerCreationPromiseExists:n!==null};if(a.isSharedWorker!==!0)return(h||(h=b("Promise"))).resolve(a.workerCreationPromiseExists===!0?{data:a,tag:"dedicated_exists"}:{data:a,tag:"dedicated_not_exists"});if(a.nativeLocksSupported!==!0)return(h||(h=b("Promise"))).resolve({data:a,tag:"shared_unknown_locks_not_supported"});var c=d("MAWWaitForBackendSetup").getCurrentWorkerID();return(h||(h=b("Promise"))).all([d("SharedWorkerMigrationUtils").isStatusLockHeld(b("cr:6600").name),c!=null?d("SharedWorkerMigrationUtils").isWorkerIdStatusLockHeld(b("cr:6600").name,c):(h||(h=b("Promise"))).resolve(!1)]).then(function(b){var c=b[0];b=b[1];a.sharedLockHeld=c;a.workerIdLockHeld=b;if(c&&b)return{data:a,tag:"shared_exists_and_connected"};if(c)return{data:a,tag:"shared_exists_not_connected"};return b?{data:a,tag:"shared_only_unique_lock_held"}:{data:a,tag:"shared_not_exists"}})}function f(){n=null}function o(a){if(n){d("MAWMIC").addPoint(a+"_wait_on_worker_creation");d("MAWInit").MAWInit.logPoint(a+"_wait_on_worker_creation");return n}d("MAWInit").MAWInit.logPoint(a+"_create_worker_start");d("MAWMIC").addPoint(a+"_create_worker_start");n=(d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?p(a):q().then(function(a){return{worker:a,workerID:"dedicated"}})).then(function(b){var c=b.worker;b=b.workerID;d("MAWMIC").addPoint(a+"_create_worker_end");d("MAWInit").MAWInit.logPoint(a+"_create_worker_end");return{worker:c,workerID:b}},function(a){n=null;throw a});return n}function p(a){var e=function(a,b,d){c("promiseDone")(m.promise.then(function(){return l(a,b,d)}))};d("MAWWorkerWatchdogRecovery").setRecoveryForWatchdog(e);var f=new(c("Deferred"))(),g=c("gkx")("7313");d("MAWMIC").addBoolAnnotation("migrationEnabled",g);g=g?d("SharedWorkerV2ResourceExperimental").createPushSafeSharedWebWorkerV2Async(b("cr:6600"),e,{migratedWorker:!0,onQPLEvent:d("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:a}):d("SharedWorkerBundleResource").createPushSafeSharedWebWorkerV2Async(b("cr:6600"),e,{onQPLEvent:d("MAWStartupLoggingUtils").logSharedWorkerQPLEvents,reason:a,useDynamicStringInit:c("gkx")("8737")});return g.then(function(a){j(a);d("MAWMIC").addPoint("shared_worker_bundle_created");var b=c("setTimeout")(function(){d("MAWMIC").addPoint("shared_worker_connection_ack_timeout"),f.reject(c("err")("Worker connection ack timeout"))},1e4),e=function(a){var e;if(typeof a.data==="object"&&((e=a.data)==null?void 0:e.type)==="connection-ack"&&typeof ((e=a.data)==null?void 0:e.response)==="object"&&typeof ((e=a.data)==null?void 0:(e=e.response)==null?void 0:e.from)==="string"){e=typeof ((e=a.data)==null?void 0:(e=e.response)==null?void 0:e.workerID)==="string"?(e=a.data)==null?void 0:(a=e.response)==null?void 0:a.workerID:void 0;e!=null?(d("MAWMIC").addPoint("shared_worker_workerID_received"),d("MAWMIC").addStringAnnotation("workerID",e),b!=null&&c("clearTimeout")(b),f.resolve(e)):(d("MAWMIC").addPoint("shared_worker_null_workerID_received"),d("MAWMIC").addStringAnnotation("workerID","unknown"))}};a.port.addEventListener("message",e);a.port.postMessage({type:"ww-connection-ack"});a.addEventListener("error",function(a){d("MAWStartupLoggingUtils").logWorkerError("Shared Worker",a,"")});return f.getPromise().then(function(b){return{worker:a.port,workerID:b}})})}function q(){return(h||(h=b("Promise"))).resolve(d("WebWorkerV2Resource").createDedicatedV2WebWorker(b("cr:6600"))).then(function(a){var b=a.url;a=a.worker;a.onerror=function(a){return d("MAWStartupLoggingUtils").logWorkerError("Dedicated Worker",a,b)};d("MAWStartupLoggingUtils").setImportScriptsErrorListener(a);return a})}function r(a){l=a,m.resolve()}g.getSharedWorkerInstance__TEST_ONLY=k;g.doesWorkerExist=a;g.getWorkerHealthStatus=e;g.resetWorkerCreation=f;g.createWorkerIfNone=o;g.setOnCloseForWorkerInstance=r}),98);
__d("MAWWaitForBackendSetup",["ErrorSerializer","MAWInit","MAWInitError","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWebWorkerSingleton","Promise","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=new(h||(h=b("Promise")))(function(a,b){i=a,j=b}),l=!1,m=!1,n=!1,o=!1,p=null,q=i,r=j;function s(a){return new(h||(h=b("Promise")))(function(b,e){k.then(b)["catch"](function(b){var f=a+" rejected because backend setup failed: "+b.message+".";b=b instanceof d("MAWInitError").MAWInitError?b.error:null;b!=null&&(f=f.concat(" More error detail: "+c("ErrorSerializer").toReadableMessage(b)));e(c("err")(f))})})}function a(a,b){c("promiseDone")(s(b).then(function(){a()}))}function t(){if(!o)return;k=new(h||(h=b("Promise")))(function(a,b){i=a,j=b});o=!1;l=!1;q=i;r=j;m=!0;n=!1}function e(a){l=!0,o=!0,n=!1,q==null?void 0:q(a)}function f(a){l=!1,o=!0,n=!1,r==null?void 0:r(a)}function u(){return l}function v(){return o}function w(){return m}function x(a){a!=null&&p!==a&&d("MAWSetupWorkerAuxStateForLogging").resetWorkerCreationTime(),p=a}function y(a){if(p==null||p!==a)return;z()}function z(){p=null,d("MAWWebWorkerSingleton").resetWorkerCreation(),t(),d("MAWInit").MAWInit.logPoint("reset_current_worker"),d("MAWMIC").addPoint("reset_current_worker")}function A(){return p}function B(){n=!0}function C(){return n}g.waitForBackendSetup=s;g.runAfterBackendSetup=a;g.resetBackendSetup=t;g.resolveBackendSetup=e;g.rejectBackendSetup=f;g.isBackendSetupSuccessful=u;g.isBackendSetupSettled=v;g.wasBackendSetupReset=w;g.setCurrentWorker=x;g.resetCurrentWorkerWithId=y;g.resetCurrentWorkerSkipIdCheck=z;g.getCurrentWorkerID=A;g.markBackendSetupStarted=B;g.isBackendSetupInProgress=C}),98);
__d("MAWWorkerEvent",["FBLogger","MAWMIC","MAWReliabilityMonitor","MAWSetupWorkerAuxStateForLogging","MAWTrackPendingOccamadilloThreads","MAWWaitForBackendSetup","MultipleTabsLogger","QPLUserFlow","pageID","performanceNow","promiseDone","qpl","requireDeferred","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MAWBridgeObserver").__setRef("MAWWorkerEvent"),j=c("requireDeferred")("MAWWebWorkerSingleton").__setRef("MAWWorkerEvent"),k=new Set(),l=new Set(["addEbUploadTrackingWorkerQPL","ackWithInstanceKey","addMediaDownloadQpl","searchGetFTSRestoreSessionId","none"]),m=new Set(["bulkMaybeCreateOrUpdateThread","createThread","createOrUpdateThread"]),n=new Map(),o=function(a){switch(a){case"sendAndReceive":return 1e4;case"fireAndForget":return 4e3;case"waitUntilCompleted":return 1e4;case"waitUntilPersisted":return 1e4;default:return 1e4}},p=function(a,b,d){d=window.setTimeout(function(){v(a,"ack_timeout"),c("promiseDone")(i.load().then(function(a){a.notifyUnackedEvent({route:b,timestamp:(h||(h=c("performanceNow")))()})}))},o(d));n.set(a,d);return d},q=function(a){var b=n.get(a);b!=null&&(window.clearTimeout(b),c("promiseDone")(i.load().then(function(a){a.resetUnackedMessages()})),n["delete"](a))};function a(a,b,e){if(k.has(e)||l.has(b))return;k.add(e);c("QPLUserFlow").start(c("qpl")._(1056842055,"807"),{annotations:{bool:{duringMIC:d("MAWMIC").duringMIC(),useSharedWorker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker(),workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},"int":{key:e},string:{callType:a,event:b,pageID:c("pageID"),workerHeartbeatsOnStart:d("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:d("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});void d("MultipleTabsLogger").hasMultipleTabs().then(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),{bool:{isMultiTabs:a}},{instanceKey:e})});void j.load().then(function(a){return a.getWorkerHealthStatus().then(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),{string:{workerHealthStatusOnStart:a.tag}})})})}function b(a){if(!k.has(a))return;k["delete"](a);c("QPLUserFlow").endSuccess(c("qpl")._(1056842055,"807"),{instanceKey:a})}function e(a,b){if(!k.has(a))return;k["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"fail",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:b},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a})}function f(a,b,e){if(!k.has(a))return;k["delete"](a);c("QPLUserFlow").endFailure(c("qpl")._(1056842055,"807"),"timeout",{annotations:{bool:{workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{error:b,workerHealthStatus:e.tag},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:a})}function r(a,b){if(!k.has(a))return;c("QPLUserFlow").addAnnotations(c("qpl")._(1056842055,"807"),b,{instanceKey:a})}function s(a,b){if(!k.has(a))return;try{if(Array.isArray(b)){var e=b.every(function(a){return typeof a==="object"&&a!=null&&"state"in a&&a.state===d("MAWReliabilityMonitor").HealthReportState.OK.valueOf()});b=b.reduce(function(a,b){typeof b==="object"&&b!=null&&"state"in b&&"identifier"in b&&"reason"in b&&b.state!==d("MAWReliabilityMonitor").HealthReportState.OK.valueOf()&&typeof b.state==="string"&&typeof b.reason==="string"&&typeof b.identifier==="string"&&a.push([b.identifier,b.state,b.reason].join(":"));return a},[]);r(a,{bool:{workerHealthStatus:e},string:{error:(a=b[0])!=null?a:void 0},string_array:{errors:b}})}}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to log ack result annotations");return!1}}function t(a,b,c){if(typeof c==="object"&&typeof (c==null?void 0:c.timestamp)==="number"){c=c.payload;q(a);v(a,"ack");s(a,c);m.has(b)&&d("MAWTrackPendingOccamadilloThreads").markBridgeCallAcked()}}function u(a,b,c){l.has(b)||p(a,b,c),v(a,"send")}function v(a,b,d){if(!k.has(a))return;c("QPLUserFlow").addPoint(c("qpl")._(1056842055,"807"),b,{instanceKey:a,timestamp:d})}g.getUnackedEventTimeout=o;g.logStart=a;g.logSuccess=b;g.logFailure=e;g.logTimeoutFailure=f;g.logAnnotations=r;g.logAck=t;g.logSend=u}),98);
__d("MAWBridgeLoggingUtils",["MAWWorkerEvent","ODS","Random","WAHashStringToNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i=3185,j="armadillo_worker_runtime",k="getWorkerHeartbeat",l=10,m=new Array(l);function n(a,b,c){(h||(h=d("ODS"))).bumpEntityKey(i,j,a+"_"+b+"_"+c)}function a(a){return d("WAHashStringToNumber").hashStringToNumber(a+Math.round(d("Random").random()*1e4)+1e4)}function b(a,b,c,e){n(b,c,"start");if(c===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_start");d("MAWWorkerEvent").logStart(a,c,e);m.length===l&&m.shift();m.push(b+"_"+c)}function o(a){m.filter(Boolean).forEach(function(b){(h||(h=d("ODS"))).bumpEntityKey(i,j,b+a)})}function c(a,b,c){n(a,b,"success");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_success");d("MAWWorkerEvent").logSuccess(c)}function e(a,b,c,e){n(a,b,"fail");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_fail");d("MAWWorkerEvent").logFailure(e,c)}function f(a,b,c,e){n(a,b,"timeout");if(b===k)return;(h||(h=d("ODS"))).bumpEntityKey(i,j,"route_timeout");d("MAWWorkerEvent").logTimeoutFailure(c,"Route timeout",e)}function p(){o("_before_unresponsive"),m.fill(null)}g.CAT_ID=i;g.ENT=j;g.HEARTBEAT_ROUTE=k;g.RECENT_ROUTES_NUM=l;g.getBridgeEventInstanceKey=a;g.routeStart=b;g.logRecentRoutes=o;g.routeSuccess=c;g.routeFail=e;g.routeTimeoutFail=f;g.logRecentBridgeEvents=p}),98);
__d("WAAbortError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("AbortError"));var h="AbortError";function a(a){return function(b){if(b.name===h)return a(b);else throw b}}g.AbortError=b;g.ABORT_ERROR=h;g.catchAbort=a}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return new(h||(h=b("Promise")))(function(b,e){if(c==null?void 0:c.aborted)throw new(d("WAAbortError").AbortError)();var f=setTimeout(g,a);c==null?void 0:c.addEventListener("abort",h);function g(){c==null?void 0:c.removeEventListener("abort",h),b()}function h(){c==null?void 0:c.removeEventListener("abort",h),clearTimeout(f),e(new(d("WAAbortError").AbortError)())}})}function c(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}g.delayMs=a;g.withTimeout=c}),98);
__d("MAWMaybeWithTimeout",["MAWODSProxy","WAOdsEnums","WAPromiseDelays"],(function(a,b,c,d,e,f,g){"use strict";function h(){return!0}function a(a,b,c,e){return h()?d("WAPromiseDelays").withTimeout(a.then(function(a){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_NON_TIMEOUT,key:e!=null?e:"unknown"});return a}),b,function(){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_TIMEOUT,key:e!=null?e:"unknown"});return c()}):a}g.maybeWithTimeout=a}),98);
__d("MAWTimedBridge",["MAWBridgeLoggingUtils","MAWMaybeWithTimeout","MAWWaitForBackendSetup","MAWWebWorkerSingleton","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["route.",""]);h=function(){return a};return a}var i=17e4;function a(a,b,c,e,f){f===void 0&&(f=i);return d("MAWWaitForBackendSetup").waitForBackendSetup(c).then(function(){return d("MAWMaybeWithTimeout").maybeWithTimeout(a(),f,function(){return d("MAWWebWorkerSingleton").getWorkerHealthStatus().then(function(a){d("MAWBridgeLoggingUtils").routeTimeoutFail(b,c,e,a);d("WALogger").COUNT(h(),c).tags("bridge_timeout");throw new j("Bridge route "+c+" timed out, WorkerHealthStatus: "+a.tag)})},c)})}var j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="BridgeTimeoutError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));g.DEFAULT_MAW_BRIDGE_TIMEOUT_MS=i;g.bridgeTimeout=a;g.MAWBridgeTimeoutError=j}),98);
__d("MAWBridgeFireAndForget",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWaitForBackendSetup","MAWWorkerEvent","Promise","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("justknobx")._("1143");function a(a,c,e,f){return d("MAWWaitForBackendSetup").runAfterBackendSetup(function(){var g=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(c);f!==!0&&d("MAWBridgeLoggingUtils").routeStart("fireAndForget",a,c,g);void d("MAWTimedBridge").bridgeTimeout(function(){return new(h||(h=b("Promise")))(function(b){d("MAWBridge").getBridge().fireAndForget(a,c,e,f,{onAck:function(e){f!==!0&&(d("MAWWorkerEvent").logAck(g,c,e),d("MAWBridgeLoggingUtils").routeSuccess(a,c,g)),b()},onSend:function(a){var b=a.queueMsgs;a=a.queueSize;f!==!0&&(d("MAWWorkerEvent").logSend(g,c,"fireAndForget"),d("MAWWorkerEvent").logAnnotations(g,{"int":{bridgeSize:a},string_array:{bridgeMsgs:b}}))}},{bridgeQPLInstanceKey:g})})},a,c,g,i)},c)}g.fireAndForget=a}),98);
__d("MAWBridgeSendAndReceive",["MAWBridge","MAWBridgeLoggingUtils","MAWTimedBridge","MAWWorkerEvent"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=d("MAWBridgeLoggingUtils").getBridgeEventInstanceKey(b),g=(e==null?void 0:e.isLoggingDisabled)!==!0,h=d("MAWTimedBridge").bridgeTimeout(function(){g&&d("MAWBridgeLoggingUtils").routeStart("sendAndReceive",a,b,f);return d("MAWBridge").getBridge().sendAndReceive(a,b,c,e==null?void 0:e.isLoggingDisabled,{onAck:function(a){g&&d("MAWWorkerEvent").logAck(f,b,a)},onSend:function(a){var c=a.queueMsgs;a=a.queueSize;g&&(d("MAWWorkerEvent").logSend(f,b,"sendAndReceive"),d("MAWWorkerEvent").logAnnotations(f,{"int":{bridgeSize:a},string_array:{bridgeMsgs:c}}))}},{bridgeQPLInstanceKey:f}).then(function(c){g&&d("MAWBridgeLoggingUtils").routeSuccess(a,b,f);return c})["catch"](function(c){g&&d("MAWBridgeLoggingUtils").routeFail(a,b,c.message,f);throw c})},a,b,f,e==null?void 0:e.timeoutMs);return h}g.sendAndReceive=a}),98);
__d("MAWConsoleLogger",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=c("gkx")("2656");function a(a,b,c){if(h){var d=c.map(function(a){return"["+a+"]"}).join("");if(a==="count"){console.count(d+" "+String(b));return}for(var e=arguments.length,f=new Array(e>3?e-3:0),g=3;g<e;g++)f[g-3]=arguments[g];if(d){var i;(i=console)[a].apply(i,[d,b].concat(f))}else{var j;(j=console)[a].apply(j,[b].concat(f))}}}g.logToConsole=a}),98);
__d("WAShiftTimer",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){h(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){h(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){h(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){h(a);h(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function h(a){if(!(a>=0))throw c("err")("ShiftTimer must be given delayMs >= 0")}g.ShiftTimer=a}),98);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){"use strict";var h=20,i=1e3;a=function(){function a(a,b,c){var e=this;this.$1=null;this.$6=Date.now();this.$7=new(d("WAShiftTimer").ShiftTimer)(function(){var a=e.$1;if(a==null)return;e.$1=null;e.$2(a)});this.$2=b;this.$3=a;this.$5=c!=null?c:h;this.$4=this.$5}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$7.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$6,0)/i;b=Math.min(b+c,this.$5);this.$4=b;this.$6=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$7.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$7.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."]);h=function(){return a};return a}var i=function(a,b){this.key=a,this.value=b,this.prev=null,this.next=null};a=function(){function a(a){var b=this,e;this.$2=new Map();this.purgeNow=function(){for(var a=b.$6.prev;b.$4>b.$3&&a!==b.$5;a=a?a.prev:null){if(a==null)throw c("err")("The linked list is not constructed properly.");var d=a,e=d.key;d=d.value;if(!b.$9(e,d))continue;b["delete"](e);b.$10&&b.$10(e,d)}b.$8&&b.$8(b.$2)};this.$3=a.sizeLimit;this.$7=a.getSize;this.$8=a.onPurge;this.$9=(e=a.shouldEvict)!=null?e:function(){return!0};this.$10=a.onEvict;this.$11=a.onAdd;this.$12=a.onDelete;this.$4=0;this.$5=new i("placeholder-head",null);this.$6=new i("placeholder-tail",null);this.$5.next=this.$6;this.$6.prev=this.$5;this.$1=new(d("WAShiftTimer").ShiftTimer)(function(){return b.purgeNow()})}var b=a.prototype;b.get=function(a){if(!this.$2.has(a))return null;a=this.$2.get(a);if(a==null)return null;var b=a.prev,d=a.next;b&&(b.next=d);d&&(d.prev=b);d=this.$5.next;if(d==null)throw c("err")("The linked list is not constructed properly.");this.$5.next=a;d.prev=a;a.prev=this.$5;a.next=d;return a.value};b.has=function(a){return this.$2.has(a)};b.touch=function(a){this.get(a)};b.put=function(a,b){if(this.$3===0)return;if(this.$7(b)>this.$3){d("WALogger").WARN(h());return}this["delete"](a);this.$14(a,b);this.schedulePurge()};b.$14=function(a,b){var d=new i(a,b);this.$2.set(a,d);var e=this.$5.next;if(e==null)throw c("err")("The linked list is not constructed properly.");this.$5.next=d;e.prev=d;d.prev=this.$5;d.next=e;this.$4+=this.$7(b);this.$11&&this.$11(a,b)};b["delete"]=function(a){if(!this.$2.has(a))return;var b=this.$2.get(a);if(b==null)return;this.$4-=this.$7(b.value);var c=b.prev,d=b.next;c&&(c.next=d);d&&(d.prev=c);this.$2["delete"](a);this.$12&&this.$12(a,b.value)};b.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()};b.schedulePurge=function(){this.$1.onOrBefore(1e3)};b.getCurrentSize=function(){return this.$4};b.getPlaceholderHead=function(){return this.$5};b.forEach=function(a){if(this.$4===0)return;var b=this.$6.prev;if(b==null)throw c("err")("The linked list is not constructed properly.");while(b!=null&&b!==this.$5)a(b.value),b=b.prev};return a}();g.LruCache=a}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WALogger","WALruCache","WAPromiseManagement","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to execute onAck: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," not intended for client ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]);s=function(){return a};return a}var t=function(){function a(a,b,c,e,f){var g=this;this.port=null;this.$2=1;this.openRequests=new Map();this.listeners=new Set();if((f==null?void 0:f.useLRUCache)===!0){var h,i=new(d("WALruCache").LruCache)({sizeLimit:(h=f.portalCacheSize)!=null?h:100,getSize:function(){return 1}});this.processedRequests={has:function(a){return i.has(a)},add:function(a){i.put(a,!0)}}}else{var j=new Set();this.processedRequests={has:function(a){return j.has(a)},add:function(a){j.add(a)}}}this.$1=a;this.clientId=e;this.config=f;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){g.$3(a)},(h=this.config)==null?void 0:h.bridgeBatcherMaxTokens);c.forEach(function(b){a.setNamespaceHandler(b,g.$4(b))})}var e=a.prototype;e.$5=function(){var a=this.clientId!=null?this.clientId+"_":"";return""+a+this.$2++};e.$6=function(a){a=a.split("_");return a.length!==2?null:a[0]};e.addListener=function(a){var b=this;this.listeners.add(a);return function(){return b.listeners["delete"](a)}};e.setPort=function(a){var b=this;d("WALogger").LOG(s());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(r()).devConsole(c.data);return}c=c.data;if(!c||!Array.isArray(c))return;c.forEach(function(c){b.$7(c,"incoming"),b.$8(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").DEV(q(),a.name);b.sendStream.addEvent({type:"request",content:a})})};e.getBridge=function(){return this.$1};e.$4=function(a){var b=this;return function(c,d,e,f,g,h){b.$9(a,c,d,e,f,g,h)}};e.$9=function(a,b,c,d,e,f,g){var h,i=this.$5();h=babelHelpers["extends"]({fromClientId:(h=this.clientId)!=null?h:void 0},g);g={requestId:i,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e,opts:h};this.openRequests.set(i,{request:g,resolver:d,eventCallbacks:f});this.sendStream.addEvent({type:"request",content:g})};e.$10=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};e.$3=function(a){var b=this,c=this.port;if(!c){d("WALogger").DEV(p(),a.length);return}c.postMessage(a);var e=a.map(function(a){var b;b=(b=(b=a.content.arg)==null?void 0:b.type)!=null?b:"";return""+((a=a.content.name)!=null?a:"")+(b?":"+b:"")}).filter(Boolean);a.forEach(function(c){var d;b.$7(c,"outgoing");c=b.openRequests.get(c.content.requestId);(c==null?void 0:(d=c.eventCallbacks)==null?void 0:d.onSend)!=null&&c.eventCallbacks.onSend({queueSize:a.length,queueMsgs:e})})};e.$7=function(a,b){this.listeners.forEach(function(c){return c(a,b)})};e.$8=function(a,e){var f=this;if(e.type==="request"){var g=e.content,i=g.namespace,p=g.name,q=g.requestId,r=g.arg,s=g.expectsResponse,t=g.silentLog,u=g.opts;t||d("WALogger").LOG(o(),q,p);if((u==null?void 0:u.toClientId)!=null&&u.toClientId!==this.clientId){t||d("WALogger").LOG(n(),q,this.clientId);return}g=this.$1;var v={type:"result",content:{requestId:q,type:"handled",result:{payload:g.getAckPayoad(),timestamp:Date.now()},silentLog:t,opts:u}};this.$7(v,"outgoing");a.postMessage([v]);if(s){v=g.sendAndReceive(i,p,r,t,void 0,u).then(function(b){f.$10(a,{requestId:q,type:"success",result:b,silentLog:t,opts:u})},function(b){f.$10(a,{requestId:q,type:"error",result:String(b),silentLog:t,opts:u})});d("WAPromiseManagement").preventGarbageCollection(v)}else g.fireAndForget(i,p,r,t,void 0,u)}else{e.type;s=e.content;v=s.requestId;g=s.type;i=s.result;p=s.silentLog;p||d("WALogger").DEV(m(),v,g);r=this.$6(v);if(r!==this.clientId||this.processedRequests.has(v))return;e=this.openRequests.get(v);if(!e){d("WALogger").WARN(l(),v);return}switch(g){case"success":case"error":this.openRequests["delete"](v);this.processedRequests.add(v);s=e.resolver;s?s(g==="success"?i:(h||(h=b("Promise"))).reject(c("err")(i!=null?i:""))):d("WALogger").ERROR(k(),i);break;case"handled":try{(p=e.eventCallbacks)==null?void 0:p.onAck==null?void 0:p.onAck(i)}catch(a){d("WALogger").ERROR(j(),a.message)}e.resolver||(this.openRequests["delete"](v),this.processedRequests.add(v));break}}};return a}();function a(a,b,c,d,e){return new t(a,c,b,d,e)}function e(a){var b;(b=a.port)==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,h=b.silentLog;d("WALogger").LOG(i(),b.requestId);a?a(c.sendAndReceive(e,f,g,h)):c.fireAndForget(e,f,g,h)})}g.CrossWorkerPortal=t;g.attachPortal=a;g.killPortalAndSendPendingToBridge=e}),98);
__d("MAWCrossWorkerPortal",["FBLogger","WACrossWorkerPortal","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){if(h!=null)return h;h=d("WACrossWorkerPortal").attachPortal(a,b,e,c("pageID"),f);return h}function b(){if(h==null){c("FBLogger")("messenger_web").warn("Trying to kill portal before its setup");return}d("WACrossWorkerPortal").killPortalAndSendPendingToBridge(h)}g.getOrCreateCrossWorkerPortal=a;g.killPortalWhenWorkerTerminating=b}),98);
__d("MAWCryptoConsts",[],(function(a,b,c,d,e,f){"use strict";a=60*60;b=24*a;c=32;d=new Uint8Array(0).buffer;e=128;a=256;var g=12,h=1,i=2,j=2,k=4;b=b*30*6;var l=3,m="AES-GCM",n="HKDF",o="SHA-256";f.HKDF_SEED_LENGTH_IN_BYTES=c;f.HKDF_INFO=d;f.AES_GCM_TAG_LENGTH=e;f.AES_GCM_KEY_LENGTH=a;f.AES_GCM_IV_LENGTH_IN_BYTES=g;f.VERSION=h;f.CIPHER_ID=i;f.ADDITIONAL_DATA_LENGTH_IN_BYTES=j;f.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES=k;f.ENC_KEY_TTL=b;f.MAX_KEYCHAIN_SETUP_RETRIES=l;f.AES_GCM=m;f.HKDF=n;f.SHA256=o}),66);
__d("MAWDbChatId__UNSAFE_DO_NOT_USE",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return(h||(h=d("I64"))).of_float(a)}function b(a,b){return a+"_"+b}g.convertToChatId64__DEPRECATED=a;g.craftAltIndex__DEPRECATED=b}),98);
__d("WADirectPath",["WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h="0_0_0_.enc";function a(a){return a}function b(a){if(a==null)return d("WAResultOrError").makeError("direct-path-undefined");if(a==="")return d("WAResultOrError").makeError("direct-path-empty");return a.includes(h)?d("WAResultOrError").makeError("direct-path-corrupted"):d("WAResultOrError").makeResult(a)}g.unsafeCastToDirectPath=a;g.validateDirectPath=b}),98);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("WAMediaEntryData.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};a.internalSpec={fileSha256:[1,(e=d("WAProtoConst")).TYPES.BYTES],mediaKey:[2,e.TYPES.BYTES],fileEncSha256:[3,e.TYPES.BYTES],directPath:[4,e.TYPES.STRING],mediaKeyTimestamp:[5,e.TYPES.INT64],serverMediaType:[6,e.TYPES.STRING],uploadToken:[7,e.TYPES.BYTES],validatedTimestamp:[8,e.TYPES.BYTES],sidecar:[9,e.TYPES.BYTES],objectId:[10,e.TYPES.STRING],fbid:[11,e.TYPES.STRING],downloadableThumbnail:[12,e.TYPES.MESSAGE,c],handle:[13,e.TYPES.STRING],filename:[14,e.TYPES.STRING],progressiveJpegDetails:[15,e.TYPES.MESSAGE,b],size:[16,e.TYPES.INT64],lastDownloadAttemptTimestamp:[17,e.TYPES.INT64]};b.internalSpec={scanLengths:[1,e.FLAGS.REPEATED|e.TYPES.UINT32],sidecar:[2,e.TYPES.BYTES]};c.internalSpec={fileSha256:[1,e.TYPES.BYTES],fileEncSha256:[2,e.TYPES.BYTES],directPath:[3,e.TYPES.STRING],mediaKey:[4,e.TYPES.BYTES],mediaKeyTimestamp:[5,e.TYPES.INT64],objectId:[6,e.TYPES.STRING]};g.MediaEntrySpec=a;g.MediaEntry$ProgressiveJpegDetailsSpec=b;g.MediaEntry$DownloadableThumbnailSpec=c}),98);
__d("WAProgressiveJpegMarkers",[],(function(a,b,c,d,e,f){"use strict";a=255;b=0;c={SOF0:192,SOF1:193,SOF2:194,SOF3:195,DHT:196,SOF5:197,SOF6:198,SOF7:199,JPG:200,SOF9:201,SOF10:202,SOF11:203,SOF13:205,SOF14:206,SOF15:207,RST0:208,RST1:209,RST2:210,RST3:211,RST4:212,RST5:213,RST6:214,RST7:215,SOI:216,EOI:217,SOS:218,DQT:219,DRI:221,APP0:224,APP1:225,APP2:226,APP3:227,APP4:228,APP5:229,APP6:230,APP7:231,APP8:232,APP9:233,APP10:234,APP11:235,APP12:236,APP13:237,APP14:238,APP15:239,COM:254,TEM:1};d=[b,c.RST0,c.RST1,c.RST2,c.RST3,c.RST4,c.RST5,c.RST6,c.RST7];f.MARKER_PREFIX=a;f.MARKER_ESCAPE_BYTE=b;f.MARKERS=c;f.SOS_STREAM=d}),66);
__d("WAProgressiveJpegGetScanOffsets",["WAProgressiveJpegMarkers","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Non-progressive JPEG marker found"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ending marker found before end of image"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scan found at offset ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Not a JPEG image"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["starting"]);l=function(){return a};return a}var m=d("WATagsLogger").TAGS(["media","progressiveJpegUtils"]);function a(a){m.DEV(l());if(!n(a)){m.DEV(k());return[]}var b=[],c=2,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA",f=null,g=0,r=!1,s=!1,t=!1;function u(){t=!1,m.DEV(j(),c-1),b.push(c-1)}while(c<a.byteLength){f=a[c];if(r){m.ERROR(i());return[]}switch(e){case"READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA":f===d("WAProgressiveJpegMarkers").MARKER_PREFIX&&(e="READ_MARKER_SECOND_BYTE");break;case"READ_MARKER_SECOND_BYTE":if(f===d("WAProgressiveJpegMarkers").MARKER_PREFIX)e="READ_MARKER_SECOND_BYTE";else if(f===d("WAProgressiveJpegMarkers").MARKER_ESCAPE_BYTE)e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";else if(f===d("WAProgressiveJpegMarkers").MARKERS.EOI)r=!0,t&&u();else if(!s&&p(f)){m.LOG(h());return[]}else o(f)?(s=!0,e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA"):(t&&u(),f===d("WAProgressiveJpegMarkers").MARKERS.SOS&&(t=!0),q(f)?e="READ_SIZE_FIRST_BYTE":e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA");break;case"READ_SIZE_FIRST_BYTE":e="READ_SIZE_SECOND_BYTE";break;case"READ_SIZE_SECOND_BYTE":c+=g*256;c+=f;c-=2;e="READ_MARKER_FIRST_BYTE_OR_ENTROPY_DATA";break}c+=1;g=f}return b}function n(a){if(a.byteLength<=2)return!1;if(a[0]!==d("WAProgressiveJpegMarkers").MARKER_PREFIX)return!1;return a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOF2&&a[1]!==d("WAProgressiveJpegMarkers").MARKERS.SOI?!1:!0}function o(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF2||a===d("WAProgressiveJpegMarkers").MARKERS.SOF6||a===d("WAProgressiveJpegMarkers").MARKERS.SOF10||a===d("WAProgressiveJpegMarkers").MARKERS.SOF14}function p(a){return a===d("WAProgressiveJpegMarkers").MARKERS.SOF0||a===d("WAProgressiveJpegMarkers").MARKERS.SOF1||a===d("WAProgressiveJpegMarkers").MARKERS.SOF3||a===d("WAProgressiveJpegMarkers").MARKERS.SOF5||a===d("WAProgressiveJpegMarkers").MARKERS.SOF7||a===d("WAProgressiveJpegMarkers").MARKERS.JPG||a===d("WAProgressiveJpegMarkers").MARKERS.SOF9||a===d("WAProgressiveJpegMarkers").MARKERS.SOF11||a===d("WAProgressiveJpegMarkers").MARKERS.SOF13||a===d("WAProgressiveJpegMarkers").MARKERS.SOF15}function q(a){if(a===d("WAProgressiveJpegMarkers").MARKERS.TEM)return!1;return a>=d("WAProgressiveJpegMarkers").MARKERS.RST0&&a<=d("WAProgressiveJpegMarkers").MARKERS.RST7?!1:a!==d("WAProgressiveJpegMarkers").MARKERS.EOI&&a!==d("WAProgressiveJpegMarkers").MARKERS.SOI}g.getProgressiveJpegScanOffsets=a}),98);
__d("WAProgressiveJpegGetScanLengths",["WAProgressiveJpegGetScanOffsets"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("WAProgressiveJpegGetScanOffsets").getProgressiveJpegScanOffsets(a);return h(a)}function b(a){return a}function h(a){var b=[],c=0;for(a of a)b.push(a-c),c=a;return b}g.getProgressiveJpegScanLengths=a;g.asProgressiveJpegScanLength=b}),98);
__d("WAServerMediaType",["WAAssertUnreachable"],(function(a,b,c,d,e,f,g){"use strict";d=["image","sticker","ptt","audio","document","video","gif","ppic","md-app-state","md-msg-hist","kyc-id","template","thumbnail-image","thumbnail-video","thumbnail-gif","thumbnail-document","thumbnail-link","payment-bg-image","novi-video","novi-image","product","product-catalog-image","xma-image","biz-cover-photo","preview","newsletter-audio","newsletter-document","newsletter-image","newsletter-gif","newsletter-ptt","newsletter-sticker","newsletter-thumbnail-link","newsletter-video","sticker-pack","thumbnail-sticker-pack","music-artwork"];function a(a){switch(a){case"image":case"sticker":case"ptt":case"audio":case"document":case"video":case"gif":case"ppic":case"md-app-state":case"md-msg-hist":case"kyc-id":case"thumbnail-image":case"thumbnail-video":case"thumbnail-gif":case"thumbnail-document":case"thumbnail-link":case"payment-bg-image":case"novi-video":case"novi-image":case"template":case"product":case"product-catalog-image":case"xma-image":case"biz-cover-photo":case"preview":case"newsletter-audio":case"newsletter-document":case"newsletter-image":case"newsletter-gif":case"newsletter-ptt":case"newsletter-sticker":case"newsletter-thumbnail-link":case"newsletter-video":case"sticker-pack":case"thumbnail-sticker-pack":case"music-artwork":return a;default:return null}}function b(a){switch(a){case"Image":return"image";case"Video":return"video";case"Ptt":return"ptt";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"document";case"Text":case"Futureproof":case"Ciphertext":case"Unavailable":case"ExpiredEphemeral":case"Admin":case"Revoked":case"DeleteForMe":case"EphemeralSettingAdmin":case"EphemeralSyncResponse":case"EphemeralSettingChangeFromCurrentDevice":case"AlertICDC":case"GroupInvite":case"SenderKeyDistribution":case"Reaction":case"EditAction":case"ReceiverFetch":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":return null;default:return c("WAAssertUnreachable")(a)}}g.SERVER_MEDIA=d;g.castToServerMediaType=a;g.getMediaType=b}),98);
__d("WABaseProto",[],(function(a,b,c,d,e,f){"use strict";a="__tu";f.TAGGED_UNION_TAG=a}),66);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];var p=o[1],q=o[0];g.push(q);j.push(p);if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){q=o[2];if(typeof q.cast==="function")f[m]=q;else{var r=!0,s=0;for(var t in q)r&&t!==s++&&(r=!1);t=void 0;if(r){t=[];for(r=0;r<s;r++)t.push(!0)}else{t={};for(r in q)t[q[r]]=!0}f[m]=t}}else if((p&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP){if(o.length!==3)throw new Error("Map field "+n+" should have exactly three elements in its internalSpec");f[m]=o[2]}else f[m]=null}var u={};s=function(a){l[a].forEach(function(b){u[b]||(u[b]=[]),u[b].push(a)})};for(r in l)s(r);q=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];t=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];p=new h(e,g,j,k,f,l,u,q,t);a.internalCompiledSpec=p;return p}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else if(a===d("WAProtoConst").TYPES.MAP)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k==null)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!=null){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!=null&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(l(),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(k(),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j(),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(i(),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d("WAProtoConst").TYPE_MASK,r=t[q],u=(o&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MAP;if(r===void 0&&!u)throw new Error("Can not find the validator for type "+q);if(o&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!=null)if(!Array.isArray(p))d("WALogger").LOG(h(),s(p)).color("red"),m={path:[n],error:"repeated field must be array"};else{q=g[b];for(o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+"["+o+"]")}else if(u&&p!=null){o=g[b];q=o[0];u=o[1];o=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u;var v=t[q],w=t[o];if(v===void 0||w===void 0)throw new Error("Can not find the validator for Map with key type "+q+", value type "+o);for(o of p){var x=o[0],y=o[1];m=v(x,q);if(m){m.path.push(n+"'s key ["+x+"]");return{v:m}}m=w(y,u);if(m){m.path.push(n+"["+x+"]'s value");return{v:m}}}}else if(p!=null){m=r(p,g[b]);m&&m.path.push(n);y=j[n];y&&y.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!=="undefined"&&(m={path:[b],error:"oneof '"+b+"' has fields '"+n+"' and '"+c+"' set"})})});k[e[b]]&&(m={path:[n],error:"tag "+e[b]+" is reserved"});l[n]&&(m={path:[n],error:"field "+n+" is reserved"})}};for(var n=0;n<c.length&&!m;n++){var o=b(n);if(typeof o==="object")return o.v}return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("decodeProtobuf",["WABaseProto","WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function f(a){return c("WAHasProperty")(a,"$$unsafeUnknownFields")?a.$$unsafeUnknownFields:null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e,f){var g=d("WAProtoCompile").compileSpec(a),k=g.names,l=g.fields,m=g.types,o=g.meta,p=g.oneofToFields,q=g.fieldToOneof,r=g.reservedTags,s=g.reservedFields;g=a.internalDefaults;var t=c||babelHelpers["extends"]({},g)||{};t.$$unknownFieldCount=(a=c==null?void 0:c.$$unknownFieldCount)!=null?a:0;for(g=0;g<k.length;g++)m[g]&d("WAProtoConst").FLAGS.REPEATED?t[k[g]]=[]:m[g]===(d("WAProtoConst").TYPES.MAP&d("WAProtoConst").TYPE_MASK)&&(t[k[g]]=new Map());var u=0;c=l.length>0;a=l[0];while(b.size()){g=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow);var v=g&7,w=g>>>3;if(c&&w!==a){g=u;do++u===l.length&&(u=0),a=l[u];while(w!==a&&u!==g)}if(c&&w===a)(function(){var a=k[u],c=m[u];h(v,c,a);var g=c&d("WAProtoConst").TYPE_MASK,l=o[u];if(c&d("WAProtoConst").FLAGS.PACKED){var x=b.readVarInt(d("WABinary").parseUint64OrThrow);x=b.readBinary(x);while(x.size()){var y=i(a,g,x);(g!==d("WAProtoConst").TYPES.ENUM||l[y]||(l.cast==null?void 0:l.cast(y))!==void 0)&&t[a].push(y)}}else if(g===d("WAProtoConst").TYPES.MESSAGE){y=b.readVarInt(d("WABinary").parseUint64OrThrow);x=b.readBinary(y);if(c&d("WAProtoConst").FLAGS.REPEATED)t[a].push(n(l,x,void 0,e,f));else{y=t[a];t[a]=n(l,x,y,e,f)}}else if(g===d("WAProtoConst").TYPES.MAP){x=b.readVarInt(d("WABinary").parseUint64OrThrow);y=b.readBinary(x);var z,A;for(x=0;x<o[u].length;x++){var B=j(y,0,4294967296,"map field and enc type",d("WABinary").parseInt64OrThrow),C=B&7;B=B>>>3;var D=void 0;switch(C){case d("WAProtoConst").ENC.VARINT:D=y.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:D=y.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:C=l[x];if(C===d("WAProtoConst").TYPES.BYTES||C===d("WAProtoConst").TYPES.STRING)D=i(a,C,y);else{var E=y.readVarInt(d("WABinary").parseUint64OrThrow);E=y.readBinary(E);D=n(C,E,void 0,e,f)}break;case d("WAProtoConst").ENC.BIT32:D=y.readBinary(4);break}B===1?z=D:A=D}t[a].set(z,A)}else{C=i(a,g,b);(g!==d("WAProtoConst").TYPES.ENUM||l[C]||(l.cast==null?void 0:l.cast(C))!==void 0)&&(c&d("WAProtoConst").FLAGS.REPEATED?t[a].push(C):t[a]=C)}E=q[a];E&&typeof t[a]!=="undefined"&&E.forEach(function(b){var c=p[b].filter(function(b){return b!==a});c.forEach(function(a){delete t[a]});if(f){t[b]=(c={type:a,value:t[a]},c[d("WABaseProto").TAGGED_UNION_TAG]=!0,c);delete t[a]}});(r[w]||s[a])&&delete t[a]})();else{t.$$unknownFieldCount++;if(e){t.$$unsafeUnknownFields||(t.$$unsafeUnknownFields={});g=void 0;switch(v){case d("WAProtoConst").ENC.VARINT:g=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:g=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:g=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:g=b.readBinary(4);break}t.$$unsafeUnknownFields[w]=g}else v===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):v===d("WAProtoConst").ENC.BIT64?b.advance(8):v===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):v===d("WAProtoConst").ENC.BIT32&&b.advance(4)}}return t}function o(a){return a>=0?a:4294967296+a}g.decodeProtobuf=a;g.decodeProtobufWithTaggedUnions=b;g.decodeProtobufWithUnknowns=e;g.getUnknownFields=f}),98);
__d("encodeProtobuf",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){"use strict";var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArrayView()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;var b=a;function c(a,c){for(var d=0;d<c.length;d++)b(a,c[d])}return function(a,b){a.writeWithVarIntLength(c,b)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l==null&&c&&(l=c[k]);if(l!=null){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else if(p===d("WAProtoConst").TYPES.MAP)for(o of l){r=o[0];var s=o[1];a.writeVarInt(k);var t=q[0],u=q[1],v=typeof u==="object"?d("WAProtoConst").TYPES.MESSAGE:u,w=m[t],x=m[v];if(w==null||x==null)throw new Error("Invalid encoder for map key/value");var y=new(d("WABinary").Binary)(),z=1*8|d("WAProtoUtils").typeToEncType(t);y.writeVarInt(z);w(y,r,t);z=2*8|d("WAProtoUtils").typeToEncType(v);y.writeVarInt(z);x(y,s,u);a.writeVarInt(y.size());a.writeBinary(y)}else{a.writeVarInt(k);w=m[p];w(a,l,q)}}}}g.encodeProtobuf=a;g.encodeErrorInfo=b}),98);
__d("WAMediaUtils",["WACryptoDependencies","WADirectPath","WAGlobals","WALongInt","WAMediaEntryData.pb","WAProgressiveJpegGetScanLengths","WAResultOrError","WAServerMediaType","WATimeUtils","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=new Uint8Array(32);d("WACryptoDependencies").getCrypto().getRandomValues(a);return a.buffer}function i(a){return a}function a(){return h()}function j(a){return a}function k(a){return a}function b(a){return a}function e(a){return a}function f(a,b){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,b);b=a.fileSha256;var c=a.mediaKey,e=a.fileEncSha256,f=a.directPath,g=a.mediaKeyTimestamp,h=a.sidecar,i=a.objectId,j=a.fbid,l=a.serverMediaType,m=a.downloadableThumbnail,n=a.filename,o=a.progressiveJpegDetails;a=a.size;f=d("WADirectPath").validateDirectPath(f);return{fileSha256:b,mediaKey:c,fileEncSha256:e,directPath:f.success?f.value:null,mediaKeyTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(g),sidecar:h&&k(h),objectId:i,fbid:j,downloadableThumbnail:m==null?void 0:{directPath:m.directPath,fileEncSha256:m.fileEncSha256,fileSha256:m.fileSha256,mediaKey:m.mediaKey,mediaKeyTimestamp:d("WALongInt").maybeNumberOrThrowIfTooLarge(m.mediaKeyTimestamp),objectId:m.objectId},serverMediaType:l,filename:n,progressiveJpegDetails:o&&s(o),size:a==null?void 0:d("WALongInt").numberOrThrowIfTooLarge(a)}}function l(a){var b=a.fileSha256,c=a.fileEncSha256,e=a.mediaKey,f=a.directPath,g=a.mediaKeyTimestamp,h=a.serverMediaType,i=a.objectId,j=a.fbid,k=a.downloadableThumbnail,l=a.filename,m=a.progressiveJpegDetails;a=a.size;b=d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,{fileSha256:b,fileEncSha256:c,mediaKey:e,directPath:f,mediaKeyTimestamp:g,serverMediaType:h,objectId:i,fbid:j,downloadableThumbnail:k,filename:l,progressiveJpegDetails:m,size:a});return b.readByteArrayView()}function m(a){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArrayView()}function n(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{directPath:b})).readByteArrayView()}function o(a,b){return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,babelHelpers["extends"]({},a,{downloadableThumbnail:babelHelpers["extends"]({},a.downloadableThumbnail,{directPath:b})})).readByteArrayView()}function p(a,b){a=babelHelpers["extends"]({},a,{fbid:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArrayView()}function q(a,b){a=babelHelpers["extends"]({},a,{objectId:b});return d("encodeProtobuf").encodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a).readByteArrayView()}function r(a){if(a==null)return null;a.$$unknownFieldCount;var b=a.directPath,c=a.objectId,e=babelHelpers.objectWithoutPropertiesLoose(a,["$$unknownFieldCount","directPath","objectId"]);b=d("WADirectPath").validateDirectPath(b);return babelHelpers["extends"]({},e,{directPath:b.success?b.value:null,objectId:c,mediaKey:a.mediaKey&&i(a.mediaKey),mediaKeyTimestamp:a.mediaKeyTimestamp==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(a.mediaKeyTimestamp))})}function s(a){if(a==null)return null;return a.scanLengths==null||a.sidecar==null?null:{sidecar:a.sidecar,scanLengths:a.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})}}function t(a){a=d("decodeProtobuf").decodeProtobuf(d("WAMediaEntryData.pb").MediaEntrySpec,a);var b=a.serverMediaType,c=a.mediaKey,e=a.mediaKeyTimestamp,f=a.uploadToken,g=a.downloadableThumbnail,h=a.progressiveJpegDetails,k=a.size,l=a.lastDownloadAttemptTimestamp,m=a.sidecar,n=a.directPath,o=a.objectId;a=babelHelpers.objectWithoutPropertiesLoose(a,["serverMediaType","mediaKey","mediaKeyTimestamp","uploadToken","downloadableThumbnail","progressiveJpegDetails","size","lastDownloadAttemptTimestamp","sidecar","directPath","objectId"]);var p=null;h!=null&&h.scanLengths!=null&&h.sidecar!=null&&(p={sidecar:h.sidecar,scanLengths:h.scanLengths.map(function(a){return d("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength(d("WALongInt").numberOrThrowIfTooLarge(a))})});h=d("WADirectPath").validateDirectPath(n);return babelHelpers["extends"]({},a,{objectId:o,directPath:h.success?h.value:void 0,sidecar:m,serverMediaType:b==null?null:d("WAServerMediaType").castToServerMediaType(b),mediaKey:c&&i(c),mediaKeyTimestamp:e==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(e)),uploadToken:f&&j(f),progressiveJpegDetails:p,downloadableThumbnail:g&&r(g),size:d("WALongInt").maybeNumberOrThrowIfTooLarge(k),lastDownloadAttemptTimestamp:l==null?null:d("WATimeUtils").castToUnixTime(d("WALongInt").numberOrThrowIfTooLarge(l))})}function u(a){var b=a.directPath,c=a.fileEncSha256,e=a.fileSha256,f=a.mediaKey,g=a.serverMediaType;if(f==null)return d("WAResultOrError").makeError("media-entry-invalid-media-key");else if(b==null)return d("WAResultOrError").makeError("media-entry-invalid-direct-path");else if(c==null)return d("WAResultOrError").makeError("media-entry-invalid-file-enc-sha256");else if(e==null)return d("WAResultOrError").makeError("media-entry-invalid-file-sha256");else if(g==null)return d("WAResultOrError").makeError("media-entry-invalid-server-media-type");return d("WAResultOrError").makeResult(babelHelpers["extends"]({},a,{directPath:b,fileEncSha256:c,fileSha256:e,mediaKey:f,serverMediaType:g}))}function v(a){var b=a.directPath,c=a.fileEncSha256,e=a.fileSha256,f=a.mediaKey,g=[];f==null?g.push("media-entry-invalid-media-key"):b==null?g.push("media-entry-invalid-direct-path"):c==null?g.push("media-entry-invalid-file-enc-sha256"):e==null&&g.push("media-entry-invalid-file-sha256");return f!=null&&b!=null&&c!=null&&e!=null?d("WAResultOrError").makeResult(babelHelpers["extends"]({},a,{directPath:b,fileEncSha256:c,fileSha256:e,mediaKey:f})):d("WAResultOrError").makeError(g)}function w(a){var b="image/jpeg";switch(a){case"image":b="image/jpeg";break;case"ptt":b="audio/wav";break;case"video":b="video/mp4";break;case"gif":b="image/gif";break;case"sticker":b="image/webp";break;case"preview":b="image/jpeg";break;case"document":b=d("WAGlobals").getConfig().isOctetStreamAttachmentMimeTypeEnabled()===!0?"application/octet-stream":"application/pdf";break;case"xma-image":b="image/jpeg";break;default:throw c("err")("Unsupported server media type: "+a)}return b}var x=function(){return"TransformStream"in self};g.createMediaKey=h;g.castToMediaKey=i;g.createUploadToken=a;g.castToUploadToken=j;g.castToStreamingSidecar=k;g.stringToDeliveryObjectId=b;g.stringToBackupEntFbid=e;g.mediaEntryDataToRawData=f;g.rawDataToMediaEntry=l;g.encodeMediaEntryForUpload=m;g.encodeMediaEntryWithUpdatedPath=n;g.encodeMediaEntryDownloadableThumbnailWithUpdatedPath=o;g.encodeMediaEntryWithUpdatedFbid=p;g.encodeMediaEntryWithUpdatedObjectId=q;g.convertMediaDownloadableThumbnailToDownloadableThumbnail=r;g.decodeMediaEntryData=t;g.validateDecodedMediaEntryForDownload=u;g.validateDownloadableThumbnailForDownload=v;g.getMimeTypeFromServerMediaType=w;g.isTransformStreamSupported=x}),98);
__d("MAWDbMedia",["I64","WAMediaUtils","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i="Image",j="Video",k="Ptt",l="Gif",m="Sticker",n="DocumentFile",o={DOCUMENT_FILE:n,GIF:l,IMAGE:i,PTT:k,STICKER:m,VIDEO:j};function a(a){return a}function b(a){return a}function c(a){return(h||(h=d("I64"))).of_float(a)}function e(a){return(h||(h=d("I64"))).to_float(a)}function f(a,b){a=a.mediaEntries.get(b);if(a==null)return d("WAResultOrError").makeError("missing-media-entry");b=d("WAMediaUtils").decodeMediaEntryData(a);a=b.serverMediaType;return a==null?d("WAResultOrError").makeError("missing-server-media-type"):d("WAResultOrError").makeResult(a)}g.IMAGE=i;g.VIDEO=j;g.PTT=k;g.GIF=l;g.STICKER=m;g.DOCUMENT_FILE=n;g.MEDIA_TYPE=o;g.convertNumberToMediaId=a;g.convertToMediaId64=b;g.convertMediaIdToMediaId64=c;g.convertMediaId64ToMediaId=e;g.getServerMediaType=f}),98);
__d("MAWHexUtils",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.toString(16);return(a.length-1).toString(16)+a}function b(a){for(var b=1;b<a.length;b++){var d=a.substring(0,b),e=a.substring(b);if(e.length-1===parseInt(d,16))return parseInt(e,16)}throw c("FBLogger")("messenger_web").mustfixThrow("Cannot convert the order-preserving-hex back to number")}g.orderPreservingHex=a;g.reverseOrderPreservingHex=b}),98);
__d("WAMsg",["WAAssertUnreachable","WAJids","WAMsgType","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.author,c=a.chat;a=a.externalId;return c+"_"+a+"_"+b}function h(a){switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:case d("WAMsgType").MSG_TYPE.IMAGE:case d("WAMsgType").MSG_TYPE.VIDEO:case d("WAMsgType").MSG_TYPE.PTT:case d("WAMsgType").MSG_TYPE.GIF:case d("WAMsgType").MSG_TYPE.STICKER:case d("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return{author:a.id.author,deleteTs:a.deleteTs,ephemeralSetting:a.ephemeralSetting,expirationTs:a.expirationTs,externalId:a.id.externalId,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.ts};case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return{author:a.id.author,externalId:a.id.externalId,sentTs:a.sentTs,ts:a.ts};default:a.type;return null}}function b(a){var b=h(a);if(b==null)return null;switch(a.type){case d("WAMsgType").MSG_TYPE.TEXT:return babelHelpers["extends"]({},b,{msgContent:a.msgContent,type:d("WAMsgType").MSG_TYPE.TEXT});case d("WAMsgType").MSG_TYPE.IMAGE:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.IMAGE});case d("WAMsgType").MSG_TYPE.VIDEO:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.VIDEO});case d("WAMsgType").MSG_TYPE.PTT:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.PTT});case d("WAMsgType").MSG_TYPE.STICKER:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.STICKER});case d("WAMsgType").MSG_TYPE.RECEIVER_FETCH:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.RECEIVER_FETCH});case d("WAMsgType").MSG_TYPE.GIF:return babelHelpers["extends"]({},b,{mediaId:a.mediaId,type:d("WAMsgType").MSG_TYPE.PTT});case d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.EXPIRED_EPHEMERAL});case d("WAMsgType").MSG_TYPE.UNAVAILABLE:return babelHelpers["extends"]({},b,{type:d("WAMsgType").MSG_TYPE.UNAVAILABLE});case d("WAMsgType").MSG_TYPE.REVOKED:case d("WAMsgType").MSG_TYPE.REACTION:case d("WAMsgType").MSG_TYPE.ICDC_ALERT:case d("WAMsgType").MSG_TYPE.ADMIN:case d("WAMsgType").MSG_TYPE.FUTUREPROOF:case d("WAMsgType").MSG_TYPE.CIPHERTEXT:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("WAMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("WAMsgType").MSG_TYPE.GROUP_INVITE:case d("WAMsgType").MSG_TYPE.DELETE_FOR_ME:case d("WAMsgType").MSG_TYPE.DOCUMENT_FILE:case d("WAMsgType").MSG_TYPE.EDIT_ACTION:return null;default:return c("WAAssertUnreachable")(a.type)}}function e(a){if(d("WAJids").isAuthorSystem(a.author))throw c("err")("Cannot send @system messages");else return{author:a.author,chat:a.chat,externalId:a.externalId}}g.craftWAMsgIdString=a;g.asQuotedMsg=b;g.asProtocolMsgId=e}),98);
__d("MAWDbMsg",["FBLogger","I64","MAWDbChatId__UNSAFE_DO_NOT_USE","MAWHexUtils","MAWMsgType","WAMsg"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i=[(i=d("MAWMsgType")).MSG_TYPE.REVOKED,i.MSG_TYPE.EPHEMERAL_SYNC_RESPONSE,i.MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE,i.MSG_TYPE.GROUP_INVITE,i.MSG_TYPE.SK_DISTRIBUTION,i.MSG_TYPE.RAVEN_ACTION];var j=0,k=Number.MAX_SAFE_INTEGER;function a(a){return a}function b(a){return a}function e(a){return y(a)?a:null}function f(a){return a}function l(a){return a}var m="futureproof",n="futureproof_spam",o="spam",p="toBeRead",q="e2ee_admin_msg",r="cutover_admin_msg";function s(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m"}function t(a,b,c){a=d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_m";return a+"_"+c.externalId}function u(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_um"}function v(a,b){return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_r"}function w(a,b,c){c=c!=null?c:d("MAWHexUtils").orderPreservingHex(Math.floor(Math.random()*1e4));return d("MAWHexUtils").orderPreservingHex(a)+"_"+d("MAWHexUtils").orderPreservingHex(b)+"_DEBUG_"+c+")}"}function x(a){a=a.split("_");return a.length>=3&&a[0]!==""&&a[1]!==""&&a[2]==="m"}function y(a){var b=/^(.*)\..*?$/;b=b.test(a);return x(a)||b}function z(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,p)}function A(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,q)}function B(a){return d("MAWDbChatId__UNSAFE_DO_NOT_USE").craftAltIndex__DEPRECATED(a,r)}function C(a){if(!x(a))return 0;a=a.split("_");a[0];a=a[1];return d("MAWHexUtils").reverseOrderPreservingHex(a)}function D(a){return d("MAWHexUtils").orderPreservingHex(a)+"_"}function E(a){return d("MAWHexUtils").orderPreservingHex(a)+"_z"}function F(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.XMA:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isXMAMsg check: "%s"',a.type)}function G(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:return!0;case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isMediaMsg check: "%s"',a.type)}function H(a){return a.type===d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH}function I(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:return!0;case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1;default:c("FBLogger")("messenger_web").mustfix('Invalid msg type for isPhotoOrVideoMediaMsg check: "%s"',a.type);return!1}}function J(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return!0;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1;default:c("FBLogger")("messenger_web").mustfix('Invalid msg type for isDocumentFileMediaMsg check: "%s"',a.type);return!1}}function K(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isContentMsg check: "%s"',a.type)}function L(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return!1}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for isMsgEligibleForTriggeringEphemeralSyncResponse check: "%s"',a.type)}function M(a){return O(a.type)}function N(a){return a.type===d("MAWMsgType").MSG_TYPE.ADMIN}function O(a){return a==="EphemeralSyncResponse"||a==="EphemeralSettingChangeFromCurrentDevice"||a==="GroupInvite"||a==="SenderKeyDistribution"||a==="RavenAction"||a==="EditAction"}function P(a){return a==="RavenAction"}function Q(a){return a.originalTs!=null?a.originalTs:R(a)}function R(a){return a.serverTs!=null?a.serverTs:a.ts}function S(a){if(a.sortOrderMs!=null)return a.sortOrderMs;else return R(a)*1e3}function T(a,b){if(a.serverTs!=null)return Math.max(b+1,a.serverTs*1e3);else return b+1}function U(a){switch(a.type){case d("MAWMsgType").MSG_TYPE.TEXT:return a.msgContent;case d("MAWMsgType").MSG_TYPE.EDIT_ACTION:return a.editMsgContent;case d("MAWMsgType").MSG_TYPE.IMAGE:case d("MAWMsgType").MSG_TYPE.VIDEO:case d("MAWMsgType").MSG_TYPE.PTT:case d("MAWMsgType").MSG_TYPE.GIF:case d("MAWMsgType").MSG_TYPE.STICKER:case d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case d("MAWMsgType").MSG_TYPE.REVOKED:case d("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:case d("MAWMsgType").MSG_TYPE.FUTUREPROOF:case d("MAWMsgType").MSG_TYPE.CIPHERTEXT:case d("MAWMsgType").MSG_TYPE.UNAVAILABLE:case d("MAWMsgType").MSG_TYPE.ADMIN:case d("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case d("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case d("MAWMsgType").MSG_TYPE.ICDC_ALERT:case d("MAWMsgType").MSG_TYPE.GROUP_INVITE:case d("MAWMsgType").MSG_TYPE.XMA:case d("MAWMsgType").MSG_TYPE.RAVEN:case d("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case d("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:case d("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:return}throw c("FBLogger")("messenger_web").mustfixThrow('Invalid msg type for getMsgContent check: "%s"',a.type)}function V(a){return d("WAMsg").craftWAMsgIdString({author:a.author,chat:a.threadJid,externalId:a.externalId})}function W(a){return(h||(h=d("I64"))).to_float(a)}g.NO_CONTENT_MESSAGE_TYPES_ALLOWLIST=i;g.MIN_MSG_SORT_ORDER=j;g.MAX_MSG_SORT_ORDER=k;g.toCachedMsgId__UNSAFE_DO_NOT_USE=a;g.toMsgId__UNSAFE_DO_NOT_USE=b;g.toMsgId=e;g.stanzaIdToMsgId=f;g.instamadilloMsgIdToMsgId=l;g.FUTUREPROOF_ALT_INDEX=m;g.FUTUREPROOF_SPAM_ALT_INDEX=n;g.SPAM_ALT_INDEX=o;g.craftMsgId__DEPRECATED=s;g.craftMsgIdV2=t;g.craftUnrenderedMsgId=u;g.craftReactionId=v;g.craftDebugMsgId=w;g.isValidMsgId=y;g.craftToBeReadAltIndex=z;g.craftE2eeAdminMsgAltIndex=A;g.craftCutoverAdminMsgAltIndex=B;g.getInChatMsgIdFromMsgId=C;g.msgIdsInChatLowerBound=D;g.msgIdsInChatUpperBound=E;g.isXMAMsg=F;g.isMediaMsg=G;g.isReceiverFetchStickerMsg=H;g.isPhotoOrVideoMediaMsg=I;g.isDocumentFileMediaMsg=J;g.isContentMsg=K;g.isMsgEligibleForTriggeringEphemeralSyncResponse=L;g.isUnrenderedMsg=M;g.isAdminMsg=N;g.isUnrenderedMsgType=O;g.isRavenActionMsgType=P;g.getOriginalTsFromMsg=Q;g.getCanonicalTsFromMsg=R;g.getSortOrderWithFallback=S;g.getSortOrderFromPrevious=T;g.getMsgContent=U;g.getWAMsgId=V;g.convertMsgRowId64=W}),98);
__d("MAWErrorObject",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(a instanceof Error)return a;else if(typeof a==="string")return c("err")(a);else return null}g.getErrorObject=a}),98);
__d("MAWSendQplToServer",["BrowserLockManager","ExecutionEnvironment","QPLUserFlow","WAExceededStorageQuota","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,d,e){c("QPLUserFlow").start(a,{annotations:babelHelpers["extends"]({},b||{},{bool:babelHelpers["extends"]({},(b==null?void 0:b.bool)||{},{db_schema_fix:c("gkx")("12688"),isDev:0,isFromUIThread:(h||(h=c("ExecutionEnvironment"))).isInMainThread,isGifSearchEnbled:!0,isLockApiSupported:c("BrowserLockManager")!=null,processAcksInOneQueue:c("gkx")("23955"),useSharedWorker:"SharedWorkerGlobalScope"in self&&self instanceof self.SharedWorkerGlobalScope})}),instanceKey:d,timeoutInMs:e});return i(a,d)}function i(a,b){return{addAnnotations:function(d){c("QPLUserFlow").addAnnotations(a,d,{instanceKey:b})},addPoint:function(d,e){e&&c("QPLUserFlow").addAnnotations(a,e,{instanceKey:b}),c("QPLUserFlow").addPoint(a,d,{instanceKey:b})},endCancel:function(e){var f;c("QPLUserFlow").addAnnotations(a,babelHelpers["extends"]({},e,{bool:babelHelpers["extends"]({},e==null?void 0:e.bool,{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers["extends"]({},e==null?void 0:e.string,{threadID:e==null?void 0:(f=e.string)==null?void 0:f.jid})}),{instanceKey:b});c("QPLUserFlow").endCancel(a,{annotations:e,instanceKey:b})},endFail:function(e,f){var g;c("QPLUserFlow").addAnnotations(a,babelHelpers["extends"]({},f,{bool:babelHelpers["extends"]({},f==null?void 0:f.bool,{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}),string:babelHelpers["extends"]({},f==null?void 0:f.string,{threadID:f==null?void 0:(g=f.string)==null?void 0:g.jid})}),{instanceKey:b});c("QPLUserFlow").endFailure(a,e,{annotations:f,instanceKey:b})},endSuccess:function(e){c("QPLUserFlow").addAnnotations(a,{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),isRelaxedDurability:!0}},{instanceKey:b}),c("QPLUserFlow").endSuccess(a,{annotations:e,instanceKey:b})},markError:function(d,e,f){return c("QPLUserFlow").markError(a,d,{debugInfo:e,error:f,instanceKey:b})}}}g.startQplUserFlow=a;g.makeMAWQPLProxyForExistingQPLUserFlow=i}),98);
__d("MAWQplProxy",["Deferred","ExecutionEnvironment","MAWBridge","MAWSendQplToServer","QPLEvent","asyncToGeneratorRuntime","gkx","justknobx","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(h=c("gkx")("23949"))!=null?h:!1,m=new Set([25313175,25310776,1056839232,1056836502,1056836703,1056847537,521478596,521479468,521476165,521480391,521472095]),n=0,o=(j||(j=c("performanceAbsoluteNow")))()-Date.now();function p(){return Date.now()}var q=new(c("Deferred"))();h=function(){q.resolve()};function r(a,b,e,f,g){f===void 0&&(f=!1),c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"point"},annotations:e==null?void 0:e.annotations,event:a,instanceKey:e==null?void 0:e.instanceKey,performanceAndDateSkew:o,timestamp:f?p():void 0},!0,void 0,g)})}function a(a,b,c,d,e){t(a,{bool:(a={},a[b]=c,a)},d,e)}function e(a,b,c,d,e){t(a,{string:(a={},a[b]=c,a)},d,e)}function f(a,b,c,d,e){t(a,{"int":(a={},a[b]=c,a)},d,e)}function s(a,b,c,d){t(a,{"double":b},c,d)}function t(a,b,e,f){c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"annotations"},annotations:b,event:a,instanceKey:e},!0,void 0,f)})}function u(a,b,e,f,g,h){g===void 0&&(g=!1);var i=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"failure"},annotations:e,event:a,instanceKey:f,timestamp:g?i:void 0},!0,void 0,h)})}function v(a,b,e,f,g){f===void 0&&(f=!1);var h=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"success"},annotations:b,event:a,instanceKey:e,timestamp:f?h:void 0},!0,void 0,g)})}function w(a,b,e,f,g){f===void 0&&(f=!1);var h=p();c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"cancel"},annotations:b,event:a,instanceKey:e,timestamp:f?h:void 0},!0,void 0,g)})}function x(a,b,e,f){c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{name:b,type:"error"},debugInfo:e==null?void 0:e.debugInfo,error:e==null?void 0:e.error,event:a,instanceKey:e==null?void 0:e.instanceKey},!0,void 0,f)})}function y(a,b,c,d,e){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){r(a,b+"_start",{annotations:d,instanceKey:e});d=(yield c());r(a,b+"_end",{instanceKey:e});return d});return z.apply(this,arguments)}function A(a,b,c){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){a.addPoint(b+"_start");c=(yield c);a.addPoint(b+"_end");return c});return B.apply(this,arguments)}var C=c("justknobx")._("2596");function D(a,b,e){e===void 0&&(e={});e=e;var f=e.callBridgeWithTimestamp,g=f===void 0?!1:f;f=e.providedInstanceKey;var h=e.providedTimeoutInMs;e=e.sendThroughBridge;e=e===void 0?!1:e;f==null&&n++;var i=f!=null?f:n,j=h!=null?h:C;f=!(k||(k=c("ExecutionEnvironment"))).isInWorker;h=e||F(a);if(f||!h)return d("MAWSendQplToServer").startQplUserFlow(a,b,i,j);var l=e?{toLastActiveClient:!0}:void 0;c("promiseDone")(q.getPromise(),function(){return d("MAWBridge").getBridge().fireAndForget("event","qplEvent",{action:{type:"start"},annotations:babelHelpers["extends"]({},b||{},{bool:babelHelpers["extends"]({},(b==null?void 0:b.bool)||{})}),event:a,instanceKey:i,timeoutInMs:j,timestamp:g?p():void 0},!0,void 0,l)});return{addAnnotations:function(b){return t(a,b,i,l)},addPoint:function(b,c){return r(a,b,{annotations:c,instanceKey:i},void 0,l)},endCancel:function(b){return w(a,b,i,void 0,l)},endFail:function(b,c){return u(a,b,c,i,void 0,l)},endSuccess:function(b){return v(a,b,i,void 0,l)},markError:function(b,c,d){return x(a,b,{debugInfo:c,error:d,instanceKey:i},l)}}}function E(a,b){return!(k||(k=c("ExecutionEnvironment"))).isInWorker||!F(a)?d("MAWSendQplToServer").makeMAWQPLProxyForExistingQPLUserFlow(a,b):{addAnnotations:function(c){return t(a,c,b)},addPoint:function(c,d){return r(a,c,{annotations:d,instanceKey:b})},endCancel:function(c){return w(a,c,b)},endFail:function(c,d){return u(a,c,d,b)},endSuccess:function(c){return v(a,c,b)},markError:function(c,d,e){return x(a,c,{debugInfo:d,error:e,instanceKey:b})}}}function F(a){return l||m.has((i||(i=d("QPLEvent"))).getMarkerId(a))}g.performanceAbsoluteNow=p;g.workerBridgeDeferred=q;g.resolveWorkerBridge=h;g.sendQplPointThroughBridge=r;g.sendQPLBoolAnnotationThroughBridge=a;g.sendQPLStringAnnotationThroughBridge=e;g.sendQPLIntAnnotationThroughBridge=f;g.sendQPLDoubleAnnotationsThroughBridge=s;g.sendQPLAnnotationsThroughBridge=t;g.sendQPLFailThroughBridge=u;g.sendQPLSuccessThroughBridge=v;g.sendQPLCancelThroughBridge=w;g.sendQPLErrorThroughBridge=x;g.measurePerfInQPL_USE_WITH_CARE=y;g.measurePerfInQPL=A;g.DEFAULT_WORKER_QPL_TIMEOUT_MS=C;g.startQplUserFlow=D;g.makeQplUserFlowFromExistedInstance=E}),98);
__d("MAWTransactionMode",[],(function(a,b,c,d,e,f){"use strict";a="r!";b="rw!";f.READONLY=a;f.READWRITE=b}),66);
__d("MAWLogIndexedDb",["FBLogger","MAWCurrentUser","MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WAExceededStorageQuota","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=null;function k(){return c("justknobx")._("1399")}function l(){if(i==null)throw c("FBLogger")("messenger_web").mustfixThrow("LogDB IndexDB should've been initialized");return i}function m(){return j==null?o().then(function(){return l()}):j.then(function(){return l()})}function a(){return i!=null}var n=[function(a){a=a.target.transaction;d("WAExceededStorageQuota").listenToQuotaExceededError(a);a=a.db.createObjectStore("logs",{autoIncrement:!0,keyPath:"id"});a.createIndex("date","date",{unique:!1})}];function o(a){if(j!=null)return j;if(i!=null)return(h||(h=b("Promise"))).resolve();var c=d("MAWCurrentUser").getID(),e=d("MAWIndexedDbMetadata").logDbName(c),f=(c=a!=null?a:k())!=null?c:n.length;j=new(h||(h=b("Promise")))(function(a,b){var c=indexedDB.open(e,f);c.onupgradeneeded=function(a){for(var b=0;b<n.length;b++){var c=n[b];p(a,b+1)&&c(a)}};c.onsuccess=function(b){var c=b.target.result;c.onversionchange=function(){c.close()};i=c;a()};c.onerror=function(){b(c.error)}});return j}function p(a,b){var c=a.newVersion;a=a.oldVersion;return a<b&&c>=b}function q(a){return a===d("MAWTransactionMode").READWRITE?"readwrite":"readonly"}function e(a,b,e){var f=q(b);return function(b){return function(){for(var g=arguments.length,h=new Array(g),i=0;i<g;i++)h[i]=arguments[i];var j=e!=null?d("MAWQplProxy").startQplUserFlow(e):null;return m().then(function(c){var e=function(b){b=c.transaction(a,b!=null?q(b):f,{durability:"relaxed"});d("WAExceededStorageQuota").listenToQuotaExceededError(b);return b.objectStore(a)};return b.apply(void 0,[e].concat(h))}).then(function(a){j==null?void 0:j.endSuccess();return a})["catch"](function(a){j==null?void 0:j.endFail("transaction_fail");a=d("MAWErrorObject").getErrorObject(a);var b=c("FBLogger")("maw_db");if(a instanceof Error)throw b.catching(a).mustfixThrow("LOG - Error performing transaction in log transactor");throw b.mustfixThrow("LOG - Error performing transaction in log transactor")})}}}g.getLogDbVersion=k;g.getLogDB=l;g.isLogDBInitted=a;g.dbMigrations=n;g.makeLogMsgrTransactor=e}),98);
__d("MAWSaveLogToDisk",["Deferred","MAWLogIndexedDb","MAWTransactionMode","Promise","asyncToGeneratorRuntime","justknobx","pageID","promiseDone","throttle"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("justknobx")._("1403");f=c("justknobx")._("1404");var j=c("justknobx")._("1401");function k(a){if(Number.isInteger(a))return a;if(typeof a==="string")return(a||"").replace(/\n/g,"");try{return JSON.stringify(a)}catch(a){return"Data could not be serialized"}}function l(a,b){b===void 0&&(b="");return a.length>0?"["+a.join("|")+"]":b}function m(a){switch(a){case"logRestricted":return"warn";case"count":return"log";case"debug":case"log":case"warn":case"error":return a}}function a(a){return{args:a.logString,date:a.date,event:l(a.tags,"[]"),level:m(a.logLevel)}}function e(a,b,c,d,e,f){return{args:a+"; ERROR="+c.message+";",data:{entriesToReport:e,error:c,framesToPop:d,stack:f},date:Date.now(),event:l(b,"[]"),level:"error"}}var n=[],o=[],p=5,q=0,r=!1,s=function(){n.length=0},t=function(a){a=y(a);o.length<p?o.push(a):o[q%p]=a;q=(q+1)%p},u=function(a){var c=[],d=0;while(d<a){var e=((q-d-1)%p+p)%p;e=o[e];c.push(e);d++}return(h||(h=b("Promise"))).resolve(c)},v=function(a,b){n.push({context:a,logEntry:b}),t({context:a,logEntry:b}),n.length>i?c("promiseDone")(w()):x()},w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){r=!0;try{var a=[].concat(n);s();yield z(a)}catch(a){}r=!1});return function(){return a.apply(this,arguments)}}(),x=c("throttle")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(r)return;r=!0;try{var a=[].concat(n);s();yield z(a)}catch(a){}r=!1}),f),y=function(a){var b=a.context;a=a.logEntry;return Object.entries(a).reduce(function(a,b){var c=b[0];b=b[1];a[c]=k(b);return a},babelHelpers["extends"]({},a,{category:b+"-"+c("pageID")}))},z=d("MAWLogIndexedDb").makeLogMsgrTransactor("logs",d("MAWTransactionMode").READWRITE)(function(a,b){var d=new(c("Deferred"))(),e=a();b.forEach(function(a){e.add(y(a))});e.transaction.oncomplete=function(){return d.resolve()};e.transaction.onerror=function(a){return d.reject(a)};return d.getPromise()}),A=d("MAWLogIndexedDb").makeLogMsgrTransactor("logs",d("MAWTransactionMode").READONLY)(function(a){var b=new(c("Deferred"))();a=a();a=a.getAll();a.onsuccess=function(a){a=a.target.result;a=a.slice(Math.max(0,a.length-j));b.resolve(a)};a.onerror=function(a){return b.reject(a)};return b.getPromise()});f=function(){return A()["catch"](function(a){return[]})};var B=function(a){a=a<=o.length?u(a):C(a);return a["catch"](function(a){return[]})},C=d("MAWLogIndexedDb").makeLogMsgrTransactor("logs",d("MAWTransactionMode").READONLY)(function(a,b){var d=new(c("Deferred"))();a=a();a=a.index("date");a=a.openCursor(null,"prev");var e=[];a.onsuccess=function(a){a=a.target.result;if(a==null){d.resolve(e);return}e.push(a.value);if(e.length>=b){d.resolve(e);return}a["continue"]()};a.onerror=function(a){return d.reject(a)};return d.getPromise()});g.joinTags=l;g.formatLog=a;g.formatErrorForLogging=e;g.clearLogEntryCache=s;g.saveLogEntry=v;g.forceCachedLogEntryPersist=w;g.getEntriesFromDb=f;g.getLastNEntries=B}),98);
__d("MAWDeleteOldLogsFromDisk",["Deferred","MAWLogIndexedDb","MAWSaveLogToDisk","MAWTransactionMode","WALogger","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete old logs: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete old logs: ",""]);j=function(){return a};return a}var k=c("justknobx")._("1400"),l=c("justknobx")._("1401"),m=c("justknobx")._("1402"),n=(f=d("MAWLogIndexedDb")).makeLogMsgrTransactor("logs",(h=d("MAWTransactionMode")).READONLY)(function(a){var b=new(c("Deferred"))();a=a();a=a.count();a.onsuccess=function(a){a=a.target.result;b.resolve(a)};a.onerror=function(a){b.reject(a)};return b.getPromise()}),o=f.makeLogMsgrTransactor("logs",h.READONLY)(function(a,b){var d=new(c("Deferred"))();a=a();var e=[];a=a.index("date");a=a.openCursor();a.onsuccess=function(a){a=a.target.result;if(a==null||!b(a.value,e)){d.resolve(e);return}e.push(a.value.id);a["continue"]()};a.onerror=function(a){d.reject(a)};return d.getPromise()}),p=f.makeLogMsgrTransactor("logs",h.READWRITE)(function(a){var b=new(c("Deferred"))();a=a();a=a.clear();a.onsuccess=function(){return b.resolve()};a.onerror=function(a){return b.reject(a)};d("MAWSaveLogToDisk").clearLogEntryCache();return b.getPromise()}),q=f.makeLogMsgrTransactor("logs",h.READWRITE)(function(a,b){var d=new(c("Deferred"))(),e=a();b.forEach(function(a){return e["delete"](a)});e.transaction.oncomplete=function(){return d.resolve()};e.transaction.onerror=function(a){return d.reject(a)};return d.getPromise()});function r(a,b){b=Date.now()-m;return a!=null&&a.date<=b}function s(a){return function(b,c){return c.length<a}}function a(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield n());if(a===0)return;a=a-l;if(a>0){a=(yield o(s(a)));yield q(a);return}a=(yield o(r));a.length>0&&(yield q(a))}catch(a){d("WALogger").ERROR(j(),a)}});return t.apply(this,arguments)}function e(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield n());if(a===0)return;if(a>=k){yield p();return}}catch(a){d("WALogger").ERROR(i(),a)}});return u.apply(this,arguments)}g.clearLogs=p;g.deleteOldLogs=a;g.deleteOldLogsOnStartup=e}),98);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";var g=/^[0-9A-Za-z-]{1,32}$/;function a(a){return a}function b(a){return g.test(a)?a:null}f.toStanzaId=a;f.validateCallId=b}),66);
__d("MAWExternalId",["I64","Random","WAStanzaUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=131071,j=null,k=0;function l(){if(!c("gkx")("3139"))return Date.now();var a=j,b=Date.now();if(a==null||n(a)!==n(b)){j=b;k=0;return b}a=b+100*(k+1);var d=p(b),e=p(a);if(d==null||e==null)return b;if(d>e)return b;k++;return a}function m(a){return new Date(a).getTime()>0}function n(a){return Math.floor(a/100)*100}function o(a){return Math.floor(c("Random").random()*a)}function a(){var a=l();return d("WAStanzaUtils").toStanzaId((h||(h=d("I64"))).to_string(h.and_(h.or_(h.lsl_(h.of_float(a),22),h.and_(h.of_float(o(i)),h.of_float(i))),h.max_int)))}function p(a){return!m(a)?null:Math.floor(Number(a)%1e5/100)}g.generateExternalId=a;g.getThreeMostSignificantDigitsForSortOrderTimestamp=p}),98);
__d("MAWFrontendMediaUtils",["MAWDbMedia"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a==="image/gif")return{mediaType:d("MAWDbMedia").MEDIA_TYPE.GIF,serverMediaType:"gif"};if(a==="image/webp"&&b!==!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.STICKER,serverMediaType:"sticker"};c=c!=null?c:a.split("/")[0];switch(c){case"image":if(b===!0)return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"xma-image"};else return{mediaType:d("MAWDbMedia").MEDIA_TYPE.IMAGE,serverMediaType:"image"};case"video":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.VIDEO,serverMediaType:"video"};case"audio":return{mediaType:d("MAWDbMedia").MEDIA_TYPE.PTT,serverMediaType:"ptt"};case"application":default:return{mediaType:d("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE,serverMediaType:"document"}}}g.getMediaTypeAndServerMediaTypeFromBlob=a}),98);
__d("MAWJids",["I64","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("WAJids").createJidUtils({platform:"msgr"});var i=e.toUserJid,j=function(a,b){a=(h||(h=d("I64"))).to_string(a);return b?d("WAJids").toGroupJid(a):i(a)};function a(a){return j(a,!1)}function b(a){return j(a,!0)}f=function(a){a=d("WAJids").threadIdForChatJid(a);return(h||(h=d("I64"))).of_string(a)};function c(a){return d("WAJids").unsafeCoerceToChatJid(a)}g.jidUtils=e;g.toUserJid=i;g.convertIntJidToChatJid=j;g.convertIntJidToOneToOneChatJid=a;g.convertIntJidToGroupJid=b;g.convertChatJidToIntJid=f;g.threadIdToChatJid=c}),98);
__d("WALRUMap",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a=a.max;this.$1=new Map();this.$2=a}var b=a.prototype;b.has=function(a){return this.$1.has(a)};b.get=function(a){return this.$1.get(a)};b.set=function(a,b){this.$1["delete"](a);this.$1.set(a,b);if(this.$1.size>this.$2){a=this.$1.keys().next().value;a!=null&&this.$1["delete"](a)}};b["delete"]=function(a){this.$1["delete"](a)};b.clear=function(){this.$1.clear()};b.size=function(){return this.$1.size};return a}();f.LRUMap=a}),66);
__d("WARandomHex",["WACryptoDependencies","WAHex"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WAHex").toHex(a)}g.randomHex=a}),98);
__d("MAWJobActionsV2",["MAWTransactionMode","Promise","WALRUMap","WARandomHex","WATimeUtils","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return new(h||(h=b("Promise")))(function(b,c){a.onsuccess=b,a.onerror=c})}function j(a){return i(a).then(function(a){return a.target.result})}function k(a,c,e){return new(h||(h=b("Promise")))(function(b,f){var g=a(d("MAWTransactionMode").READONLY).index(c);g=g.openCursor(IDBKeyRange.only(e));var h=[];g.onsuccess=function(a){a=a.target.result;if(!a){b(h);return}h.push(a.value);a["continue"]()};g.onerror=function(a){return f(a)}})}var l=new(d("WALRUMap").LRUMap)({max:100});function a(a,c){var e=c.args,f=c.scheduleConfig,g=c.type,i=c.uniqKey;c=c.version;c=c===void 0?1:c;var l=JSON.stringify([g,i!=null?i:d("WARandomHex").randomHex(32)]),n={backedOffCount:0,current:e,original:e,scheduleConfig:f,startTime:d("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:g,uniqKey:l,version:c,waitUntil:null},o=function(){var b,c=a().add(n),d=j(c);if(n.uniqKey==null&&typeof ((b=c.transaction)==null?void 0:b.commit)==="function")try{c.transaction.commit()}catch(a){}return d.then(function(a){return{id:a,newlyCreated:!0}})};if(i!=null)return k(a,"uniqKey",l).then(function(c){if(c.length===0)return o();var d=[],e=null;c.forEach(function(b){b.step!=="$finished"?e=b:d.push(m(a,b.jobId))});return(h||(h=b("Promise"))).all(d).then(function(){return e!=null?{id:e.jobId,newlyCreated:!1}:o()})});else return o()}function m(a,b){return j(a()["delete"](b))}function e(a,b){return j(a().get(b))}function f(a,b){return j(a().put(b))}function n(a){return j(a().getAll())}function o(a){try{return i(a().clear()).then(c("emptyFunction"))}catch(a){if(a.name==="NotFoundError")return(h||(h=b("Promise"))).resolve();throw a}}g.recentFinishedJobsCache=l;g.maybeCreateJob=a;g.deletePersistedJob=m;g.readPersistedJob=e;g.updatePersistedJob=f;g.readAllPersistedJobs=n;g.clearJobs=o}),98);
__d("MAWKeychainUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return self.crypto.getRandomValues(new Uint8Array(a))}function b(a){var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(new Uint8Array(b),a);return a+b.byteLength},0);return c.buffer}function c(a,b){return new Uint8Array([a,b]).buffer}function d(a){var b=a.length;if(b>0&&b%2===0&&/^[\da-f]+$/gi.test(a)){var c=[];for(var d=0,b=b/2;d<b;++d){var e=parseInt(a.substring(d*2,d*2+2),16);c.push(e)}return new Uint8Array(c)}else return null}f.getBufferWithRandomValuesFromLength=a;f.mergeBuffers=b;f.makeAAD=c;f.fromHexString=d}),66);
__d("MAWSubtleCrypto",[],(function(a,b,c,d,e,f){a=self.crypto;b=a&&(a.subtle||a.webkitSubtle||a.subtle);f.MAWSubtleCrypto=b}),66);
__d("MAWWebInitDataHelpers",["FBLogger","MessengerWebInitData"],(function(a,b,c,d,e,f,g){"use strict";function a(){return 2}function b(a){switch(a){case 2:return[c("MessengerWebInitData").accountKeyV2];case 1:return[c("MessengerWebInitData").accountKey].concat((a=c("MessengerWebInitData").additionalAccountKeysV1)!=null?a:[]);default:throw c("FBLogger")("messenger_web").mustfixThrow("Invalid format version, should never happen.")}}g.getLastAccountKeyFormatVersion=a;g.getAccountKeysString=b}),98);
__d("MAWKeychainCrypto",["FBLogger","MAWCryptoConsts","MAWKeychainUtil","MAWSubtleCrypto","MAWWebInitDataHelpers","Promise","WABase64","asyncToGeneratorRuntime","memoizeOneWithArgs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("MAWKeychainUtil").makeAAD(d("MAWCryptoConsts").VERSION,d("MAWCryptoConsts").CIPHER_ID);function a(a,b,e){var f=d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").AES_GCM_IV_LENGTH_IN_BYTES),g=e?e:i;return d("MAWSubtleCrypto").MAWSubtleCrypto.encrypt({additionalData:g,iv:new Uint8Array(f),name:d("MAWCryptoConsts").AES_GCM,tagLength:d("MAWCryptoConsts").AES_GCM_TAG_LENGTH},a,b).then(function(a){a=d("MAWKeychainUtil").mergeBuffers([g,f,a]);return d("WABase64").encodeB64(a)})["catch"](function(b){throw c("FBLogger")("messenger_web").catching(b).mustfixThrow("Failed to encryptDataToStringBuffer",typeof a,a.constructor.name)})}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;b=new Uint8Array(d("WABase64").decodeB64(b));var e=b.subarray(0,(c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES),f=b.subarray(c.ADDITIONAL_DATA_LENGTH_IN_BYTES,c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);b=b.subarray(c.AES_GCM_IV_LENGTH_IN_BYTES+c.ADDITIONAL_DATA_LENGTH_IN_BYTES);e=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.decrypt({additionalData:e,iv:f,name:c.AES_GCM,tagLength:c.AES_GCM_TAG_LENGTH},a,b));return e});return j.apply(this,arguments)}function k(a){a=d("MAWWebInitDataHelpers").getAccountKeysString(a);return a.map(function(a){var b=d("MAWKeychainUtil").fromHexString(a);if(b==null)throw c("FBLogger")("messenger_web").mustfixThrow("Invalid value for account key. Is empty="+String(a.length===0)+";");return b.buffer})}function l(a){return(h||(h=b("Promise"))).all(k(a).map(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").AES_GCM},!1,["encrypt","decrypt"])}))}function f(){return d("WABase64").encodeB64(d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES))}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WABase64").decodeB64(a);try{a=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",a,{name:d("MAWCryptoConsts").HKDF},!1,["deriveKey"]));return a}catch(a){c("FBLogger")("messenger_web").catching(a).mustfix("Failed to importBrowserEncryptionKey");throw a}});return n.apply(this,arguments)}function o(){return d("MAWKeychainUtil").getBufferWithRandomValuesFromLength(d("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES)}function p(a,b){var c;return d("MAWSubtleCrypto").MAWSubtleCrypto.deriveKey({hash:{name:(c=d("MAWCryptoConsts")).SHA256},info:c.HKDF_INFO,name:c.HKDF,salt:b},a,{length:c.AES_GCM_KEY_LENGTH,name:c.AES_GCM},!0,["encrypt","decrypt"]).then(function(a){return d("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",a)})}function q(a){var b=a.slice(0,d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES);b=new DataView(b).getUint8(0);if(b===0){var c,e=a.slice((c=d("MAWCryptoConsts")).ADDITIONAL_DATA_LENGTH_IN_BYTES,c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2);return{aadLengthInBytes:c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2+c.EXTRA_ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:new DataView(e).getUint8(0),originRandomisedVersion:new DataView(a).getUint32(c.ADDITIONAL_DATA_LENGTH_IN_BYTES*2,!0)}}return{aadLengthInBytes:d("MAWCryptoConsts").ADDITIONAL_DATA_LENGTH_IN_BYTES,keyVersion:b}}function r(a){return q(a)}var s=c("memoizeOneWithArgs")(function(a){return l(a)});function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WABase64").decodeB64(a);a=(yield d("MAWSubtleCrypto").MAWSubtleCrypto.digest(d("MAWCryptoConsts").SHA256,a));return d("WABase64").encodeB64(a)});return u.apply(this,arguments)}g.ADDITIONAL_DATA=i;g.encryptDataToStringBuffer=a;g.decryptDataToArrayBuffer=e;g.getAccountKeysBuffers=k;g.genAccountKeys=l;g.genBrowserEncryptionKeyString=f;g.importBrowserEncryptionKey=m;g.genDatabaseEncryptionSeed=o;g.genDatabaseEncryptionKey=p;g.getKeyVersionFromCipherData=q;g.getKeyVersionFromCipherDataString=r;g.getAccountKeys=s;g.generateHashString=t}),98);
__d("MAWKeychainNaClCrypto",["MAWKeychainCrypto","WABase64","tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.name="EARError";c.message=a;return c}return a}(babelHelpers.wrapNativeSuper(Error));function i(a,b,c){c=new Uint8Array(c);var e=d("tweetnacl").randomBytes(d("tweetnacl").secretbox.nonceLength);b=d("tweetnacl").secretbox(b,e,new Uint8Array(a));a=new Uint8Array(c.length+e.length+b.length);a.set(c);a.set(e,c.length);a.set(b,c.length+e.length);return a.buffer}function j(a,b,c){return d("WABase64").encodeB64(i(a,b,c!=null?c:d("MAWKeychainCrypto").ADDITIONAL_DATA))}function k(a,b,c,e,f){b.slice(0,f);var g=b.slice(f,f+d("tweetnacl").secretbox.nonceLength);b=b.slice(f+d("tweetnacl").secretbox.nonceLength);f=d("tweetnacl").secretbox.open(new Uint8Array(b),new Uint8Array(g),new Uint8Array(a));if(f==null)throw new h("decryptTweetNaCl was unable to decrypt an entity. Attempting to use key version : "+(c!=null?c:"non-provided")+". Format version "+(e!=null?e:"unknown")+".");return f}function l(a,b,c,e){return k(a,d("WABase64").decodeB64(b),c,void 0,e)}function a(a,b,c){return j(a,b,c)}function b(a,b,c,d){return l(a,b,c,d)}function c(a,b,c,d,e){return k(a,b,c,d,e)}g.EARDecryptionError=h;g.encryptTweetNaClArrayBuffer=i;g.encryptTweetNaCl=j;g.decryptTweetNaClArrayBuffer=k;g.decryptTweetNaCl=l;g.encrypt=a;g.decrypt=b;g.decryptArrayBuffer=c}),98);
__d("MAWLeakDetection",[],(function(a,b,c,d,e,f){"use strict";var g="[Vault] Vaulted string detected";function h(a){var b=/\d{10}##\d{10}/gm;return b.test(a)}function a(a){return h(a)?g:a}f.VAULTED_STRING_DETECTED=g;f.detectVaultedString=h;f.maybeReplaceVaultedString=a}),66);
__d("MAWLoggingSwitches",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("503");g.removeLoggingFromBridge=a}),98);
__d("WADevToolsBridge",["WADynamicRouterAsync"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WADynamicRouterAsync").DynamicRouter)();function a(){return h}g.getDevToolBridge=a}),98);
__d("MAWLoggerUtils",["ErrorPubSub","MAWLeakDetection","MAWLoggingSwitches","MAWSaveLogToDisk","Random","ServerJsRuntimeEnvironment","WADevToolsBridge","WAJids","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!1,j=["messenger_web","wmi_eb","labyrinth_web","messenger_web_media","messenger_web_calling","mps"];f={CleanerPurge:"CleanerPurge",CleanerStart:"CleanerStart",CleanerTimestamp:"CleanerTimestamp",CleanerUpdate:"CleanerUpdate",Countdown:"Countdown",Ephemeral:"Ephemeral",Incoming:"Incoming",MsgCleaner:"MsgCleaner",OnLoad:"OnLoad",OnRead:"OnRead",Outgoing:"Outgoing",PeerReceipt:"PeerReceipt",SettingChange:"SettingChange",SettingSync:"SettingSync",DeviceRegistration:"DeviceRegistration",MessageReceive:"MessageReceive",MediaDownload:"MediaDownload",WorkerSetup:"WorkerSetup",MAWWorker:"MAWWorker",MAWInit:"MAWInit",LogoutHandler:"LogoutHandler",MiActMapping:"MiActMapping",ThreadReady:"ThreadReady"};function a(){return Math.floor(Date.now()+d("Random").random()*1e4+1e4)}function b(a){a=a.split("");return a.reduce(function(a,b){b=b.charCodeAt(0);a=(a<<5)-a+b;a&=a;return a},0)}function e(){if(i)return;i=!0;(h||(h=c("ErrorPubSub"))).addListener(function(a){var b=!j.includes(a.project);if(b){k(a.type==="error"||a.type==="fatal"?"error":a.type==="warn"?"warn":"log",a.message,(b=a.tags)!=null?b:[],(a=(b=a.metadata)==null?void 0:b.includes("MESSENGER_E2EE_WEB:ENVIRONMENT:worker"))!=null?a:!1)}})}function k(a,b,e,f){if(d("ServerJsRuntimeEnvironment").isRunningServerJsRuntime())return;b=d("MAWLeakDetection").maybeReplaceVaultedString(d("WAJids").maybeSanitizeLogLineText(b));var g=Date.now();c("gkx")("3282")&&d("WADevToolsBridge").getDevToolBridge().fireAndForget("devtool","logLine",{logLevel:a,logString:l(b,e)},!0);if(!d("MAWLoggingSwitches").removeLoggingFromBridge)return;b=b.replace(/\n/g," ");if(a==="debug"||typeof b!=="string")return;d("MAWSaveLogToDisk").saveLogEntry(f?"worker":"browser",{args:b,date:g,event:d("MAWSaveLogToDisk").joinTags(e,"[unknown]"),level:a})}function l(a,b){return b.length>0?d("MAWSaveLogToDisk").joinTags(b)+" "+a:a}g.Tag=f;g.getInstanceKey=a;g.getInstanceKeyFromId=b;g.initMessengerWebLogging=e;g.logToHistory=k}),98);
__d("MAWMiActGetMappingWithMawTypes",["I64","MAWJids","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var c=(h||(h=d("I64"))).to_string(a.jid);b=b?d("WAJids").toGroupJid(c):d("MAWJids").toUserJid(c);return{clientThreadPk:a.clientThreadPk,jid:b,serverThreadKey:a.serverThreadKey}}g["default"]=a}),98);
__d("MAWMiActMappingTableAPI",["I64","MAWJids","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,c){return c==null?(i||(i=b("Promise"))).resolve(null):d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(c))}function a(a,b){return l(a,b).then(function(a){return a==null?void 0:a.serverThreadKey})}function k(a,c){return c==null?(i||(i=b("Promise"))).resolve(null):d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table.index("jid")).getKeyRange(c))}function l(a,b){return k(a,d("MAWJids").convertChatJidToIntJid(b))}function c(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.intJid;b=b.threadKey;b=(yield j(a,b));return b!=null?b:k(a,c)});return m.apply(this,arguments)}function n(a){return(h||(h=d("I64"))).le(a,h.zero)}function e(a,b){return a.tables.mi_act_mapping_table.subscribe(function(a,c){var d=a[0],e=a[1];a[2];a=c.operation;a==="delete"&&!n(e)&&b(e,d)})}g.getMappingRowForThreadKey=j;g.getThreadKeyForChatJid=a;g.getMappingRowForIntJid=k;g.getMappingRowForChatJid=l;g.getMappingRowForThreadKeyOrJid=c;g.subscribeToMappingDeletion=e}),98);
__d("MAWMiActThreadLifecycleState",[],(function(a,b,c,d,e,f){"use strict";a={AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:"AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW",AUTHORITATIVE_THREAD_ONLY:"AUTHORITATIVE_THREAD_ONLY",CLIENT_PARTIAL_MI_THREAD:"CLIENT_PARTIAL_MI_THREAD",CLIENT_PARTIAL_MI_THREAD_WITH_ACT:"CLIENT_PARTIAL_MI_THREAD_WITH_ACT",JID_MISSING_MAPPING_ROW:"JID_MISSING_MAPPING_ROW",JID_MISSING_MI_THREAD:"JID_MISSING_MI_THREAD",MI_AND_ACT_THREAD_COMPLETE:"MI_AND_ACT_THREAD_COMPLETE",OPTIMISTIC_THREAD_NO_ACT:"OPTIMISTIC_THREAD_NO_ACT",OPTIMISTIC_THREAD_WITH_ACT:"OPTIMISTIC_THREAD_WITH_ACT",SERVER_PARTIAL_MI_THREAD:"SERVER_PARTIAL_MI_THREAD",THREAD_KEY_ONLY:"THREAD_KEY_ONLY"};f.MiActThreadStatesEnum=a}),66);
__d("MWLogSendToSentFailedError",["FBLogger","QuickPerformanceLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,d,e,f){var g=a.qplEventType;a=a.qplInstanceKey;g=(h||(h=c("QuickPerformanceLogger"))).getMarker(g,a);a=g==null?void 0:(a=g.annotations)==null?void 0:(a=a.bool)==null?void 0:a.is_secure;c("FBLogger")("messenger_web_messaging","send_to_sent_failed").blameToPreviousFrame().blameToPreviousFrame().warn("send_to_sent failed with reason: %s. Caught error message: %s. Additional description: %s. Secure? %s. Error Code: %s. Application Error: %s.",b,(b=d==null?void 0:d.message)!=null?b:"",(g=(d=g==null?void 0:(d=g.annotations)==null?void 0:(b=d.string)==null?void 0:b.error_description)!=null?d:g==null?void 0:(b=g.annotations)==null?void 0:(d=b.string)==null?void 0:d.errorType)!=null?g:"",a===!0?"secure":a===!1?"open":"unknown",(b=e==null?void 0:e.toString())!=null?b:"",(d=f==null?void 0:f.toString())!=null?d:"")}g["default"]=a}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share",NoteReply:"note_reply"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasNoteReply;h=h===void 0?!1:h;var i=a.hasShare;i=i===void 0?!1:i;var j=a.hasSticker;j=j===void 0?!1:j;var k=a.hasVideo;k=k===void 0?!1:k;a=a.hasVoiceClip;a=a===void 0?!1:a;var l=g.None;e?l=g.Image:k?l=g.Video:d?l=g.HotEmoji:j?l=g.Sticker:c?l=g.Gif:a?l=g.Audio:b?l=g.File:i?l=g.Share:f?l=g.Link:h&&(l=g.NoteReply);return l}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=d("MWChatInteraction").get((h||(h=d("I64"))).to_string(a));e=e!=null?c("InteractionTracingMetrics").get(e):null;e=(b=e==null?void 0:(b=e.annotations.string)==null?void 0:b.inboxEntrypoint)!=null?b:e==null?void 0:(b=e.annotations.string)==null?void 0:b.entrypoint;if(e!=null&&e!=="unknown")return e;b=d("MWChatInteraction").get("inbox_init");if(b!=null&&(h||(h=d("I64"))).equal(a,(h||(h=d("I64"))).of_string(b)))return"initInbox";e=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b=e!=null?(b=c("InteractionTracingMetrics").get(e))==null?void 0:(e=b.annotations.string)==null?void 0:e.thread_id:null;return b===(h||(h=d("I64"))).to_string(a)?"auto_open":"unknown"}g["default"]=a}),98);
__d("MWMsgActionLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting",Edit:"edit",Bump:"bump",Retry:"retry"});function a(a){var b=a.hasEphemeralSetting;b=b===void 0?!1:b;var c=a.hasGroupInvite;c=c===void 0?!1:c;var d=a.hasReaction;d=d===void 0?!1:d;var e=a.hasReply;e=e===void 0?!1:e;var f=a.hasSenderKeyDistribution;f=f===void 0?!1:f;var h=a.hasStoryReply;h=h===void 0?!1:h;var i=a.isBump;i=i===void 0?!1:i;var j=a.isEdit;j=j===void 0?!1:j;var k=a.isForward;k=k===void 0?!1:k;var l=a.isRetry;l=l===void 0?!1:l;a=a.isUnsend;a=a===void 0?!1:a;var m=g.Send;e?m=g.Reply:h?m=g.StoryReply:a?m=g.Unsend:d?m=g.Reaction:c?m=g.GroupInvite:b?m=g.EphemeralSetting:f?m=g.SenderKeyDistribution:j?m=g.Edit:k?m=g.Forward:i?m=g.Bump:l&&(m=g.Retry);return m}f.ActionType=g;f.getActionType=a}),66);
__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qxa6a|xn--qcka1pmc|xn--q9jyb4c|xn--q7ce6a|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--otu796d|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbcpq6gpa1a|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbah1a3hjkrd|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq480n2rg|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cckwcxetd|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--4dbrk0ce|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|wanggou|wang|walter|walmart|wales|vu|voyage|voto|voting|vote|volvo|vodka|vn|vlaanderen|vivo|viva|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statefarm|statebank|star|staples|stada|st|ss|srl|sr|spot|sport|space|spa|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|show|shouji|shopping|shop|shoes|shiksha|shia|shell|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|services|sener|select|seek|security|secure|seat|search|se|sd|scot|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sc|sbs|sbi|sb|saxo|save|sas|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|ro|rip|rio|ril|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|radio|racing|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|party|parts|partners|pars|paris|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|online|onl|ong|one|omega|om|ollo|olayangroup|olayan|okinawa|office|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|name|nagoya|nab|na|mz|my|mx|mw|mv|music|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movie|mov|motorcycles|moto|moscow|mortgage|mormon|monster|money|monash|mom|moi|moe|moda|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|merckmsd|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|ma|ly|lv|luxury|luxe|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|locus|locker|loans|loan|llp|llc|lk|living|live|lipsy|link|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancaster|lamer|lamborghini|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kim|kids|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jio|jewelry|jetzt|jeep|je|jcb|java|jaguar|itv|itau|it|istanbul|ist|ismaili|is|irish|ir|iq|ipiranga|io|investments|intuit|international|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hot|hosting|host|hospital|horse|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|gay|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujitsu|ftr|frontier|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|events|eus|eurovision|eu|et|estate|esq|es|erni|ericsson|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|dunlop|dubai|dtv|drive|download|dot|domains|dog|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|cpa|courses|coupons|coupon|country|corsica|coop|cool|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrome|christmas|chintai|cheap|chat|chase|charity|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|cd|cc|cbre|cbn|cba|catholic|catering|cat|casino|cash|case|casa|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|amazon|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|al|akdn|airtel|airforce|airbus|aig|ai|agency|agakhan|ag|africa|afl|af|aetna|aero|aeg|ae|adult|ads|ad|actor|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|aarp|aaa))"}}),null);
__d("URLMatcher",["URLMatcherConfig"],(function(a,b,c,d,e,f){d="!\"#%&'()*,-./:;<>?@[\\]^_`{|}";f="\u2000-\u206f\xab\xbb\uff08\uff09";var g="(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])",h="(?:https?)://";g="(?:(^|\\s)(?:"+g+"[.]){3}"+g+")";g=g;var i="\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]",j="(?:\\b)www\\d{0,3}[.]";d="[^\\s"+d+f+"]";f="(?:(?:(?:[.:\\-_%@]|"+d+")*"+d+")|"+i+")";d="(?::\\d+){0,1}";var k="(?=[/?#])";b=b("URLMatcherConfig").tlds;var l="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+k+"))";k="(?:(?:"+h+f+d+")|(?:"+g+d+")|(?:"+i+d+")|(?:"+j+f+b+d+")|(?:"+f+b+d+"))";g="[/#?]";i="\\([^\\s()<>]+\\)";var m="[^\\s()<>?#]+",n=new RegExp(l,"im"),o="^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]",p=new RegExp(o,"im"),q="(?:(?:"+g+")(?:(?:"+i+"|"+m+")*)*)*",r=new RegExp("((?:"+k+")(?:"+q+"))","im");function a(){r.compile()}var s=new RegExp("((?:"+h+f+d+")|(?:"+j+f+b+d+"))"),t=/[\s\'\";]/,u=new RegExp(g,"im"),v=new RegExp("[\\s!\"#%&'()*,./:;<>?@[\\]^`{|}\xab\xbb\u2000-\u206f\uff08\uff09]","im"),w=new RegExp("[\\s()<>?#]","im"),x=new RegExp("\\s()<>"),y=function(a){if(a!=null&&a.indexOf("@")!==-1)return s.exec(a)?a:null;else return a},z=function(a){return new RegExp("((?:"+l+")(?:"+q+"))",a)};function c(){return r.source}o=function(a){return A(a,z("im"))};i=function(a){return B(a,z("igm"))};m=function(a){return A(a,r)};var A=function(a,b){b=b.exec(a);return b==null||b.length===0?null:y(b[1]||null)},B=function(a,b){a=a.match(b);return a==null?[]:a.filter(Boolean)||[]};k=function(a){return n.exec(a)};h=function(a){return!t.test(a.charAt(a.length-1))};j=function(a){a=a;var b=!1;do{var c,d=n.exec(a);if(!d)return null;((c=d[1])==null?void 0:c.trim())===""&&(d[0]=d[0].trim(),d.index+=d[1].length);b=!1;if(d[0][0]==="["&&d.index>0&&a[d.index-1]==="@"){c=p.exec(d[0]);c&&(b=!0,a=a.substr(d.index+c[0].length))}}while(b);if(!d)return null;c=a.substr(d.index+d[0].length);if(c.length===0||!u.test(c[0]))return y(d[0]);b=0;a=0;var e=1,f=["(","["],g=[")","]"],h=0,i=a;for(var j=1;j<c.length;j++){var k=c[j];if(i===a){if(f.includes(k))h+=1,i=e;else if(u.test(k)||!v.test(k))b=j;else if(w.test(k))break}else if(f.includes(k))h+=1;else if(g.includes(k))h-=1,h===0&&(i=a,b=j);else if(x.test(k))break}return y(d[0]+c.substring(0,b+1))};f={compilePermissiveHostPathMatcher:a,permissiveHostPathMatch:m,permissiveMatch:o,permissiveMultiMatch:i,matchToPattern:A,multiMatchToPattern:B,matchHost:k,trigger:h,match:j,getPermissiveHostPathMatcherSource:c};e.exports=f}),null);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").match(a)!=null}g.getHasLinks=a}),98);
__d("MWPreloadableQueries",["I64","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;b=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate).getKeyRange(b)};c=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_nullstate_ctas.index("threadKeyCtaId")).getKeyRange(b)};e=function(a,b){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(b)};f=function(a,b){return d("ReQL").fromTableAscending(a.tables.community_folders).getKeyRange(b)};var i=function(a,b){return d("ReQL").fromTableAscending(a.tables.thread_proactive_warning_settings).getKeyRange(b)},j=function(a,b){return d("ReQL").fromTableAscending(a.tables.in_thread_banner).getKeyRange(b)};function a(a,b){return d("ReQL").fromTableAscending(a.tables.media_staging).filter(function(a){return!a.isSent&&(h||(h=d("I64"))).equal(a.threadKey,b)})}g.threadNullStateQuery=b;g.threadNullStateCtaQuery=c;g.getCutoverThreadByThreadKey=e;g.getCommunityFolderQuery=f;g.getProactiveWarningsForThreadQuery=i;g.getThreadBannerQuery=j;g.getMediaStagingQuery=a}),98);
__d("MWVersion",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("2");g.v2=a}),98);
__d("MWSharedS2SBaseAnnotations",["$InternalEnum","I64","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MWHasLinksUtil","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWPreloadableQueries","MWVersion","MultipleTabsLogger","ReQL","asyncToGeneratorRuntime","gkx","isStringNullOrEmpty","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({Text:"text",NonText:"non-text"});function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=a.hasAttachment;g=g===void 0?!1:g;var j=a.hasEphemeralSetting,l=a.hasGroupInvite,m=a.hasReaction,n=a.hasReply,o=a.hasSenderKeyDistribution,p=a.hasStoryReply,q=a.hasText;q=q===void 0?!1:q;var r=a.isBump,s=a.isEdit,t=a.isForward,u=a.isRetry,v=a.isUnsend;a=babelHelpers.objectWithoutPropertiesLoose(a,["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isBump","isEdit","isForward","isRetry","isUnsend"]);j=d("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:j,hasGroupInvite:l,hasReaction:m,hasReply:n,hasSenderKeyDistribution:o,hasStoryReply:p,isBump:r,isEdit:s,isForward:t,isRetry:u,isUnsend:v});l=d("MWMsgMediaTypeLogUtils").getAttachmentType(a);m=q&&(!l||l===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?i.Text:i.NonText;n=f!=null?parseInt(f,10):void 0;isNaN(n)&&(n=void 0);return{bool:{has_attachment:g,has_sticker:a.hasSticker,has_text:q,is_attachments_grouped:a.isAttachmentsGrouped,is_pdb:Boolean(c("gkx")("8483")),is_tlc_public_user:c("gkx")("24028"),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},"int":{number_of_attachments:a.numberOfAttachments,number_of_grouped_attachments:a.numberOfGroupedAttachments,offline_threading_id:n},string:{action_type:j,attachment_type:l,entrypoint:k(b),message_type:m,multipleTabs:yield d("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(h||(h=d("I64"))).to_string(d("MWVersion").v2),offline_threading_id:f,root_component:e}}});return j.apply(this,arguments)}function k(a){var b;return(b=Object.keys(c("LSMessagingThreadAttributionType")).find(function(b){return c("LSMessagingThreadAttributionType")[b]===a}))!=null?b:"UNKNOWN"}function e(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.db,c=a.threadKey;a=babelHelpers.objectWithoutPropertiesLoose(a,["db","threadKey"]);b=b!=null&&c!=null?yield d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(b,c)):[];return{mediaStagings:b,messageTypeParams:m(babelHelpers["extends"]({},a,{mediaStagings:b}))}});return l.apply(this,arguments)}function m(a){var b=a.externalAttachmentUrl,e=a.hotEmojiSize,f=a.isBump,g=a.isEdit,h=a.isEphemeralSetting,i=a.isForward,j=a.isGroupInvite,k=a.isReaction,l=a.isRetry,m=a.isSenderKeyDistribution,n=a.isUnsend,o=a.mediaGroupInfo,p=a.mediaStagings,q=a.messageText,r=a.reply,s=a.sentFromShareSheet,t=a.stickerId,u=a.threadType;a=a.voiceClip;var v=!c("isStringNullOrEmpty")(q);q=d("MWHasLinksUtil").getHasLinks(q);var w=!1;a=a!=null;a?w=!0:b!=null&&(w=!0);var x=!1,y=!1,z=!1,A=0,B=0,C;if(p!=null&&p.length>0){w=!0;for(var D of p){var E=D.mimeType;E.indexOf("image")!==-1&&(x=!0);E.indexOf("video")!==-1&&(y=!0);E.indexOf("application")!==-1&&(z=!0)}if(x&&u!=null){E=d("LSMessagingThreadTypeUtil").isArmadilloSecure(u);C=!E}A=p.length}o!=null&&(C=!0,B=o.messagesAndAttachments.length);D=e!=null;u=r!=null;E=r!=null;p=t!=null&&!D;o=!p&&b!=null;e=s===!0;r=k===!0;t=j===!0;b=h===!0;s=m===!0;return{hasAttachment:w,hasEphemeralSetting:b,hasFile:z,hasGif:o,hasGroupInvite:t,hasHotEmoji:D,hasImage:x,hasLinks:q,hasReaction:r,hasReply:u,hasSenderKeyDistribution:s,hasShare:e,hasSticker:p,hasStoryReply:E,hasText:v,hasVideo:y,hasVoiceClip:a,isAttachmentsGrouped:C,isBump:f!=null?f:!1,isEdit:g!=null?g:!1,isForward:i!=null?i:!1,isRetry:l!=null?l:!1,isUnsend:n!=null?n:!1,numberOfAttachments:A,numberOfGroupedAttachments:B}}g.MsgType=i;g.getSendToSentBaseAnnotations=a;g.getEntrypointAnnotation=k;g.queryMediaStagingAndGetMessageTypeParams=e;g.getMessageTypeParams=m}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWMsgActionLogUtils","MWMsgMediaTypeLogUtils","MWSharedS2SBaseAnnotations","MultipleTabsLogger","asyncToGeneratorRuntime","cr:6985","gkx","isArmadillo","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("$InternalEnum")({Text:"text",NonText:"non-text"});function a(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,i){var j=b("cr:6985")!=null?yield b("cr:6985").isCutoverThreadKey(a.threadKey):!1;e=(yield d("MWSharedS2SBaseAnnotations").getSendToSentBaseAnnotations(e,f,g,i));return{bool:babelHelpers["extends"]({},e.bool,{},d("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(a),{is_community_event:a.eventStartTimestampMs!=null,is_cutover:c("isArmadillo")()&&j,is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_secure:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)}),"int":babelHelpers["extends"]({},e["int"]),string:babelHelpers["extends"]({},e.string,{consistent_thread_fbid:a.consistentThreadFbid!=null?(h||(h=d("I64"))).to_string(a.consistentThreadFbid):null,original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey),thread_id:(h||(h=d("I64"))).to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?(h||(h=d("I64"))).to_string(a.threadSubtype):null,thread_type:h.to_string(a.threadType)})}});return k.apply(this,arguments)}function e(a,b,e,f){l(a,b,c("MWGetOriginalEntrypoint")(e.threadKey),e.threadKey,e.consistentThreadFbid,e.threadType,e.threadSubtype,f),d("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(e,a)}function l(a,e,f,g,i,k,l,m){var n=e.hasEphemeralSetting;n=n===void 0?!1:n;var o=e.hasFile;o=o===void 0?!1:o;var p=e.hasGif;p=p===void 0?!1:p;var q=e.hasGroupInvite;q=q===void 0?!1:q;var r=e.hasHotEmoji;r=r===void 0?!1:r;var s=e.hasImage;s=s===void 0?!1:s;var t=e.hasLinks;t=t===void 0?!1:t;var u=e.hasReaction;u=u===void 0?!1:u;var v=e.hasReply;v=v===void 0?!1:v;var w=e.hasSenderKeyDistribution;w=w===void 0?!1:w;var x=e.hasShare;x=x===void 0?!1:x;var y=e.hasSticker;y=y===void 0?!1:y;var z=e.hasStoryReply;z=z===void 0?!1:z;var A=e.hasText;A=A===void 0?!1:A;var B=e.hasVideo;B=B===void 0?!1:B;var C=e.hasVoiceClip;C=C===void 0?!1:C;var D=e.isAttachmentsGrouped,E=e.isBump;E=E===void 0?!1:E;var F=e.isEdit;F=F===void 0?!1:F;var G=e.isForward;G=G===void 0?!1:G;var H=e.isRetry;H=H===void 0?!1:H;var I=e.isUnsend;I=I===void 0?!1:I;var J=e.numberOfAttachments;J=J===void 0?0:J;e=e.numberOfGroupedAttachments;e=e===void 0?0:e;n=d("MWMsgActionLogUtils").getActionType({hasEphemeralSetting:n,hasGroupInvite:q,hasReaction:u,hasReply:v,hasSenderKeyDistribution:w,hasStoryReply:z,isBump:E,isEdit:F,isForward:G,isRetry:H,isUnsend:I});q=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:o,hasGif:p,hasHotEmoji:r,hasImage:s,hasLinks:t,hasShare:x,hasSticker:y,hasVideo:B,hasVoiceClip:C,numberOfAttachments:J,numberOfGroupedAttachments:e});u=A&&(!q||q===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?j.Text:j.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",q);a.addAnnotation("action_type",n);a.addAnnotation("message_type",u);a.addAnnotation("original_entrypoint",f);m!=null&&a.addAnnotation("root_component",m);a.addAnnotationInt("number_of_attachments",J);D!=null&&a.addAnnotationBoolean("is_attachments_grouped",D);a.addAnnotation("thread_id",(h||(h=d("I64"))).to_string(g));i!=null&&a.addAnnotation("consistent_thread_fbid",(h||(h=d("I64"))).to_string(i));a.addAnnotation("thread_type",h.to_string(k));l!=null&&a.addAnnotation("thread_subtype",(h||(h=d("I64"))).to_string(l));b("cr:6985")!=null&&c("promiseDone")(b("cr:6985").isCutoverThreadKey(g),function(b){a.addAnnotationBoolean("is_cutover",b)});a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isArmadilloSecure(k));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb",Boolean(c("gkx")("8483")))}function f(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2)))return"media";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4)))return"audio";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728)))return"sticker";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384)))return"gif";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64)))return"file";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1)))return"text";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1024))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(536870912)))return"XMA";else return"unknown"}g.MsgType=j;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.addSendMessageMetadataForInteractionTraceWithThreadMetadata=l;g.getMessageTypeFromDisplayedContentType=f}),98);
__d("mergeDeep",["mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e;a=(e=c("mergeHelpers")).normalizeMergeArg(a);b=e.normalizeMergeArg(b);e.checkMergeObjectArgs(a,b);e.checkArrayStrategy(d);e={};c("mergeDeepInto")(e,a,d);c("mergeDeepInto")(e,b,d);return e}g["default"]=a}),98);
__d("sendToSentQPLLogger",["LSDatabaseSingleton","LSIntEnum","MAWMIC","MAWSetupWorkerAuxStateForLogging","MAWWaitForBackendSetup","MWLogSendToSentFailedError","MWMsgMediaTypeLogUtils","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","Network","QPLEvent","QPLUserFlow","QuickPerformanceLogger","Random","ReQL","WAExceededStorageQuota","WAGetSafeQPLError","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","interaction-tracing","justknobx","mergeDeep","pageID","performance","promiseDone","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=c("requireDeferred")("MAWWebWorkerSingleton").__setRef("sendToSentQPLLogger"),n=c("qpl")._(25313175,"1551"),o=new Map();function p(a,b){c("QPLUserFlow").addAnnotations(n,b,{instanceKey:a})}function a(a,b){c("QPLUserFlow").endCancel(n,{annotations:b!=null?b:{},instanceKey:a}),u(a)}function e(a,b,e,f){b=f!=null?f.type:b;c("MWLogSendToSentFailedError")({qplEventType:n,qplInstanceKey:a},b,e,f==null?void 0:f.errorCode,f==null?void 0:f.applicationErrorCode);c("QPLUserFlow").endFailure(n,b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),useSentBytesCache:c("gkx")("33008"),wasBackendSetupReset:d("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},string:{errorDescription:d("WAGetSafeQPLError").getSafeQPLErrorMessage(e)},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},error:e,instanceKey:a});u(a)}function q(a,b,d,e){a!=null&&c("QPLUserFlow").addPoint(n,b,{data:e,debugInfo:d,instanceKey:a})}function r(a){(k||(k=c("QuickPerformanceLogger"))).markerEnd(n,160,a),u(a)}function s(a,b){q(a,b?"network_connection_online":"network_connection_offline"),b||r(a)}function t(a){var b=c("interaction-tracing").NetworkStatusTracker.onChange(function(b){b=b.online;s(a,b)});o.set(a,b);s(a,c("interaction-tracing").NetworkStatusTracker.isOnline());if(c("Network").containsNetworkInformation()){b=c("Network").getRTT();b!=null&&p(a,{"int":{network_rtt:b}});b=c("Network").getEffectiveType();b!=null&&p(a,{string:{network_effective_type:String(b)}});var d=c("Network").getBandwidth();d!=null&&p(a,{"int":{network_bandwidth:d}});d=c("Network").getType();d!=null&&p(a,{string:{network_connectivity_type:String(b)}})}}function u(a){var b;(b=o.get(a))==null?void 0:b.remove();o["delete"](a)}function v(a){window.navigator&&window.navigator.hardwareConcurrency&&p(a,{"int":{hardware_concurrency:window.navigator.hardwareConcurrency}})}function w(a,b){a===void 0&&(a=!0);var e=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(x(b),{annotations:{bool:{backendSetupReady:d("MAWWaitForBackendSetup").isBackendSetupSuccessful(),wasBackendSetupReset:d("MAWWaitForBackendSetup").wasBackendSetupReset(),workerTerminatedPermanently:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.workerTerminatedPermanently},"int":{timeMsSinceSessionStart:(l||(l=c("performance"))).now()},string:{hostname:window.location.hostname,pageID:c("pageID"),workerHeartbeatsOnStart:d("MAWSetupWorkerAuxStateForLogging").getHeartbeatHistoryAsString(),workerID:d("MAWWaitForBackendSetup").getCurrentWorkerID()},string_array:{worker_restart_msgs:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartMessageTypes,worker_restart_reasons:d("MAWSetupWorkerAuxStateForLogging").WorkerLifeCycleState.restartReasons}},instanceKey:e});c("promiseDone")(d("MAWMIC").getState().then(function(a){p(e,{string:{mic_state:a}})}));a&&c("promiseDone")(d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){p(e,a)}));c("promiseDone")((h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.connectivity_status)).then(function(a){if(!a)return;p(e,{"int":{connection_state_ls_transport:(i||(i=d("LSIntEnum"))).toNumber(a.internetConnectionState)}})})}));c("promiseDone")(m.load().then(function(a){return a.getWorkerHealthStatus().then(function(a){p(e,{string:{workerHealthStatusOnStart:a.tag}})})}));t(e);v(e);return e}function x(a){if((j||(j=d("QPLEvent"))).getSamplingMethod(n)!==1)return n;if(!y(a))return n;a=(j||(j=d("QPLEvent"))).getSampleRate(n);var b=c("justknobx")._("3946");b=Math.max(1,Math.min(b,a));return{i:j.getMarkerId(n),m:j.getSamplingMethod(n),r:b}}function y(a){return a===d("MWMsgMediaTypeLogUtils").AttachmentType.Application||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Audio||a===d("MWMsgMediaTypeLogUtils").AttachmentType.File||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Gif||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Image||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Link||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Sticker||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Video||a===d("MWMsgMediaTypeLogUtils").AttachmentType.Share}function f(a){c("QPLUserFlow").endSuccess(n,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota()}},instanceKey:a}),u(a)}function z(a,b,e,f,g,h){g===void 0&&(g=!0);var i=w(g);if(a==null)return i;g=d("MWSharedS2SBaseAnnotations").getMessageTypeParams(babelHelpers["extends"]({},b,{threadType:a.threadType}));c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(a,g,e,void 0,h),function(a){a=c("mergeDeep")(a,f);p(i,a)});return i}var A=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e=a+"_start";a=a+"_end";c("QPLUserFlow").addPoint(n,e,{instanceKey:b});e=(yield d());c("QPLUserFlow").addPoint(n,a,{instanceKey:b});return e});return function(b,c,d){return a.apply(this,arguments)}}();g.addSendToSentAnnotations=p;g.markSendToSentCancel=a;g.markSendToSentFail=e;g.markSendToSentPoint=q;g.markSendToSentStart=w;g.markSendToSentSuccess=f;g.markSendToSentStartWithAnnotation=z;g.measureSendToSentPerformance=A}),98);
__d("MAWThreadMappingQPL",["I64","JSResourceForInteraction","LSIntEnum","MAWLoggerUtils","MAWMiActMappingTableAPI","MAWQplProxy","MAWThreadMappingState","QPLUserFlow","Random","ReQL","WAJids","asyncToGeneratorRuntime","promiseDone","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map(),k=new Set();function a(a){k.add(a)}function l(a,b){var c=a.actState;a=a.miState;return!k.has(b)?!1:c===d("MAWThreadMappingState").ActState.READY&&a===d("MAWThreadMappingState").MiState.OPTIMISTIC}var m=c("JSResourceForInteraction")("MAWWaitForBackendSetup").__setRef("MAWThreadMappingQPL"),n=c("qpl")._(1056836502,"2778"),o=c("qpl")._(25313175,"1551"),p=null;function e(a){return d("MAWLoggerUtils").getInstanceKeyFromId(a)}function q(a){return d("MAWLoggerUtils").getInstanceKeyFromId((h||(h=d("I64"))).to_string(a)+d("Random").random().toString())}function f(a,b,c){var e=j.get((h||(h=d("I64"))).to_string(a.jid));if(e!=null){t("continue_thread_mapping_after_tpq",e);c!=null&&v({bool:babelHelpers["extends"]({},c)},e);j["delete"]((h||(h=d("I64"))).to_string(a.jid));return e}e=(e=a.instanceKey)!=null?e:q(a.fbid);c=c!=null?c:{};var f=c.hasMappingRowAlready,g=c.hasPlaceholderRowInserted,i=c.isExistingRowPlaceholder;c=c.isExpectedThreadMissingInLsdb;var k=a.jid;r({hasMappingRowAlready:f,hasPlaceholderRowInserted:g,instanceKey:e,isExistingRowPlaceholder:i,isExpectedThreadMissingInLsdb:c,jid:a.isGroupThread?d("WAJids").toGroupJid((h||(h=d("I64"))).to_string(k)):d("WAJids").toMsgrUserJid((h||(h=d("I64"))).to_string(k)),threadKey:a.fbid,trigger:b});return e}function r(a){var b=a.instanceKey,e=a.s2sInstanceKey,f=babelHelpers.objectWithoutPropertiesLoose(a,["instanceKey","s2sInstanceKey"]);p=e;d("sendToSentQPLLogger").markSendToSentPoint(e,"thread_mapping_start",void 0,{string:{thread_state:a.threadState}});c("QPLUserFlow").start(n,{annotations:G(f),instanceKey:b});c("promiseDone")(m.load(),function(a){a=a.runAfterBackendSetup;a(function(){return t("maw_backend_available",b)},"bulkMaybeCreateOrUpdateThread")})}function s(a){var b=a.instanceKey;a.s2sInstanceKey;a=babelHelpers.objectWithoutPropertiesLoose(a,["instanceKey","s2sInstanceKey"]);d("MAWQplProxy").startQplUserFlow(n,G(a),{providedInstanceKey:b})}function t(a,b){c("QPLUserFlow").addPoint(n,a,{instanceKey:b}),p!=null&&c("QPLUserFlow").addPoint(o,"thread_mapping_"+a,{instanceKey:p})}function u(a,b){t("handle_existing_thread_fail",a);var c=b==null?"no_thread":"not_authoritative";b=b==null?void 0:(i||(i=d("LSIntEnum"))).toNumber(b.authorityLevel);v({"int":{insufficientAuthorityLevel:b},string:{handleExistingThreadFailReason:c}},a)}function v(a,b){c("QPLUserFlow").addAnnotations(n,a,{instanceKey:b})}var w=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e=a+"_start";a=a+"_end";c("QPLUserFlow").addPoint(n,e,{instanceKey:b});e=(yield d());c("QPLUserFlow").addPoint(n,a,{instanceKey:b});return e});return function(b,c,d){return a.apply(this,arguments)}}(),x=function(a,b,c){return b==null?c():w(a,b,c)};function y(a,b){v({bool:{isResultVerified:!0},string:{finalActState:b.actState.toString(),finalMiState:b.miState.toString()}},a),d("sendToSentQPLLogger").markSendToSentPoint(p,"thread_mapping_end"),d("MAWThreadMappingState").isReady(b)||l(b,a)?c("QPLUserFlow").endSuccess(n,{instanceKey:a}):B("thread_state_not_ready",a)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=a.instanceKey,e=a.intJid,f=a.tables;a=a.threadKey;if(a==null&&e==null){B("no_thread_key_nor_jid",c);return}e=(yield H(f,{intJid:e,threadKey:a}));b=(b=e==null?void 0:e.serverThreadKey)!=null?b:a;a=b==null?null:yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.threads).getKeyRange(b));y(c,yield d("MAWThreadMappingState").getMappingStateForDbRows(a,e))});return A.apply(this,arguments)}function B(a,b){d("sendToSentQPLLogger").markSendToSentPoint(p,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:a}}),c("QPLUserFlow").endFailure(n,a,{instanceKey:b})}function C(a,b){d("sendToSentQPLLogger").markSendToSentPoint(p,"thread_mapping_fail",void 0,{string:{threadMappingFailReason:a.message}}),c("QPLUserFlow").endFailure(n,"error_thrown",{annotations:{string:{errorMessage:a.message}},instanceKey:b})}function D(a,b,c){d("MAWQplProxy").sendQPLFailThroughBridge(n,a,c,b)}function E(a,b){t(a,b),c("QPLUserFlow").endCancel(n,{instanceKey:b})}function F(a,b){d("MAWQplProxy").sendQPLCancelThroughBridge(n,{string:{cancelInWorkerReason:a}},b)}function G(a){var b=a.hasMappingRowAlready,c=a.hasPlaceholderRowInserted,e=a.isExistingRowPlaceholder,f=a.isExpectedThreadMissingInLsdb,g=a.jid,i=a.threadKey,j=a.threadState;a=a.trigger;return{bool:{hasMappingRowAlready:b,hasPlaceholderRowInserted:c,isExistingRowPlaceholder:e,isExpectedThreadMissingInLsdb:f},string:{initJid:g,initThreadKey:i==null?null:(h||(h=d("I64"))).to_string(i),initThreadState:j==null?void 0:j.toString(),trigger:a}}}function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.intJid;b=b.threadKey;b=(yield d("MAWMiActMappingTableAPI").getMappingRowForThreadKey(a,b));return b!=null?b:d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,c)});return I.apply(this,arguments)}g.pendingThreadCreationOnServer=j;g.allowToSkipUpgradingOptimisticThreadInMI=a;g.getInstanceKeyForJidInWorker=e;g.getInstanceKeyForThreadKey=q;g.startOrContinueForMiActMappingParams=f;g.start=r;g.startInWorker=s;g.addPoint=t;g.handleExistingThreadFail=u;g.addAnnotations=v;g.measurePerformance=w;g.measurePerformanceForNullableInstanceKey=x;g.endForThreadState=y;g.end=z;g.endFailure=B;g.endFailureError=C;g.endFailureInWorker=D;g.endCancel=E;g.endCancelInWorker=F}),98);
__d("MAWThreadMappingState",["I64","LSAuthorityLevel","LSIntEnum","MAWJids","MAWMiActMappingTableAPI","MAWThreadMappingQPL","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k={MISSING:"MISSING",OPTIMISTIC:"OPTIMISTIC",PARTIAL:"PARTIAL",READY:"READY"},l={IN_PROGRESS:"IN_PROGRESS",MISSING:"MISSING",READY:"READY"};function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("MAWMiActMappingTableAPI").getMappingRowForChatJid(a,b));if(b==null)return{mappingState:{actState:l.MISSING,miState:k.MISSING},threadKey:null};a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(b.serverThreadKey)));return{mappingState:q(a,b),threadKey:b.serverThreadKey}});return n.apply(this,arguments)}function a(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield m(a,b));b=a.mappingState;return b});return o.apply(this,arguments)}function e(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){a=(yield (j||(j=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)),d("MAWMiActMappingTableAPI").getMappingRowForThreadKey(a,c)]));c=a[0];a=a[1];return q(c,a)});return p.apply(this,arguments)}function q(a,b){return{actState:r(b),miState:s(a)}}function f(a){return a.miState===k.READY&&a.actState===l.READY}function r(a){return a==null?l.MISSING:v(a.clientThreadPk)?l.IN_PROGRESS:l.READY}function s(a){if(a==null)return k.MISSING;a=(h||(h=d("LSIntEnum"))).toNumber(a.authorityLevel);if(a===c("LSAuthorityLevel").AUTHORITATIVE)return k.READY;return a===c("LSAuthorityLevel").OPTIMISTIC?k.OPTIMISTIC:k.PARTIAL}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield a.mi_act_mapping_table.put({clientThreadPk:(i||(i=d("I64"))).neg(b),jid:c,serverThreadKey:b})});return u.apply(this,arguments)}function v(a){return(i||(i=d("I64"))).lt(a,i.zero)}function w(a,b,c){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.jid;b=b.threadKey;c===void 0&&(c=null);yield y(a,{intJid:d("MAWJids").convertChatJidToIntJid(e),threadKey:b},c)});return x.apply(this,arguments)}function y(a,b,c){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=b.intJid;b=b.threadKey;c===void 0&&(c=null);c!=null&&d("MAWThreadMappingQPL").addPoint("insert_mapping_row",c);yield a.mi_act_mapping_table.put({clientThreadPk:e,jid:e,serverThreadKey:b})});return z.apply(this,arguments)}function A(a,b){return m(a,b).then(function(a){var b=a.mappingState;a=a.threadKey;return b.miState===k.MISSING?null:a})}g.MiState=k;g.ActState=l;g.genMappingStateAndThreadKeyFromJid=m;g.genMappingStateFromJid=a;g.genMappingState=e;g.getMappingStateForDbRows=q;g.isReady=f;g.getActState=r;g.getMiState=s;g.markActThreadMappingAsInProgress=t;g.markActThreadMappingAsCompletedForJid=w;g.markActThreadMappingAsCompleted=y;g.getThreadKeyIfMiThreadNotMissing=A}),98);
__d("MAWMiActGetThreadLifecycleState",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActGetMappingWithMawTypes","MAWMiActMappingTableAPI","MAWMiActThreadLifecycleState","MAWThreadMappingState","Promise","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e){var f=(i||(i=d("LSIntEnum"))).toNumber(a.authorityLevel);if(f===c("LSAuthorityLevel").OPTIMISTIC)if(b!=null)return babelHelpers["extends"]({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT});else return{serverThreadKey:a.threadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT};if(f===c("LSAuthorityLevel").CLIENT_PARTIAL)return b!=null?babelHelpers["extends"]({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT}):{serverThreadKey:a.threadKey,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD};if(f===c("LSAuthorityLevel").SERVER_PARTIAL)return{serverThreadKey:a.threadKey,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD};if(f===c("LSAuthorityLevel").AUTHORITATIVE){if(b==null)return{serverThreadKey:a.threadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW};var g=d("MAWThreadMappingState").getActState(b)===d("MAWThreadMappingState").ActState.IN_PROGRESS;if(!g)return babelHelpers["extends"]({},c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType)),{type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE});else if(g){g=c("MAWMiActGetMappingWithMawTypes")(b,d("LSMessagingThreadTypeUtil").isGroup(a.threadType));return{jid:g.jid,jidInt64:b.jid,serverThreadKey:g.serverThreadKey,thread:a,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY}}}throw c("FBLogger")("messenger_web").mustfixThrow("[MiActMapping] Unknown thread lifecycle state for threadKey: %s, authorityLevel: %s, thread action: %s",(j||(j=d("I64"))).to_string(a.threadKey),f,e)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=(yield d("MAWMiActMappingTableAPI").getMappingRowForIntJid(a,b));if(e==null)return{jidInt64:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW};a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(e.serverThreadKey)));return a==null?{jidInt64:b,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD}:k(a,e,c)});return m.apply(this,arguments)}function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(c))]));var f=a[0];a=a[1];return f==null?{mappingRow:a,miActThreadState:{serverThreadKey:c,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY},thread:f}:{mappingRow:a,miActThreadState:k(f,a,e),thread:f}});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){a=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads).getKeyRange(c)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.mi_act_mapping_table).getKeyRange(c))]));var f=a[0];a=a[1];return f==null?{serverThreadKey:c,type:d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY}:k(f,a,e)});return p.apply(this,arguments)}function e(a,b,c,d){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b=(yield l(a,b,e));if(b.type===d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW&&c!=null)return o(a,(j||(j=d("I64"))).of_string(c),"MAWBridgeOccamadilloVerifyThreadExistsHandler");else return b});return q.apply(this,arguments)}g.getThreadLifecycleStateByJid=l;g.getThreadLifecycleStateAndMappingRowAndThread=a;g.getThreadLifecycleStateByThreadKey=o;g.getThreadLifecycleStateByJidOrThreadKey=e}),98);
__d("isOfflineThreadingId",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("I64"))).to_string(h.max_int).length;function a(a){return(h||(h=d("I64"))).to_string(a).length===i}g["default"]=a}),98);
__d("MAWMiActOnActThreadReadyInstrumentation",["QPLUserFlow","Random","WAHashStringToNumber","isOfflineThreadingId","qpl"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("WAHashStringToNumber").hashStringToNumber(a+Math.round(d("Random").random()*1e4)+1e4)}function b(a,b,d,e){c("QPLUserFlow").start(c("qpl")._(1056846543,"1530"),{annotations:{bool:{is_otid:c("isOfflineThreadingId")(d)},string:{apiName:e,description:b}},instanceKey:a})}function e(a,b){c("QPLUserFlow").addPoint(c("qpl")._(1056846543,"1530"),b,{instanceKey:a})}function f(a,b){c("QPLUserFlow").addAnnotations(c("qpl")._(1056846543,"1530"),b,{instanceKey:a})}function h(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056846543,"1530"),{instanceKey:a})}function i(a,b){c("QPLUserFlow").endFailure(c("qpl")._(1056846543,"1530"),b,{instanceKey:a})}g.getOnActThreadReadyInstanceKey=a;g.startQPL=b;g.addPointQPL=e;g.addAnnotationsQPL=f;g.endSuccessQPL=h;g.endFailureQPL=i}),98);
__d("MAWVerifyThreadExistsUtils",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","isOfflineThreadingId"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map(),k=6e4,l=1e4;function m(a){if(j.size>l){c("FBLogger")("messenger_web").mustfix("MAWVerifyThreadExistsUtils: requestedThreadKeys size exceeded limit");return}j.has(a)&&(window.clearTimeout(j.get(a)),j["delete"](a));j.set(a,window.setTimeout(function(){j["delete"](a)},k))}function a(a){return j.has(a)}function b(a,b,e){var f=b.threadKey;f!=null&&m((h||(h=d("I64"))).to_string(f));f!=null&&c("isOfflineThreadingId")(f)&&(h||(h=d("I64"))).equal(b.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&c("FBLogger")("messenger_web").warn("MAWVerifyThreadExistsUtils: runVerifyThreadExistsSproc called with offline thread key - callsite: %s",e);return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(a,b)}g.isThreadRequested=a;g.runVerifyThreadExistsSproc=b}),98);
__d("MAWMiActOnActThreadReadyQueue",["ExecutionEnvironment","I64","LSPlatformLsInitLog","MAWInit","MAWMIC","MAWMiActOnActThreadReadyInstrumentation","MAWThreadMappingQPL","MAWVerifyThreadExistsUtils","MWChatInteraction","MWFBLogger","asyncToGeneratorRuntime","clearTimeout","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error executing callback on ACT thread ready: ",", original threadState: ",", threadKey: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Executing queued "," for threadKey: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Took longer than "," ms to execute: "," in threadState: "," for threadKey: ",", onActThreadReady"]);l=function(){return a};return a}var m=d("MWFBLogger").MWLogger.tags(["MiActMapping","UIActions","ThreadReady"]),n=new Map(),o=3e4;function a(a,b,e,f,g,j){var k;if(!(i||(i=c("ExecutionEnvironment"))).isInBrowser)return;d("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(j,"enqueue_by_thread_key_start");var p=(h||(h=d("I64"))).to_string(a);k=(k=n.get(p))!=null?k:[];var q=c("setTimeout")(function(){var b=d("MWChatInteraction").getInteractionTraceForThreadKey((h||(h=d("I64"))).to_string(a));b==null?void 0:b.addMarkerPoint("timeout_when_waiting_for_act_thread","AppTiming");b==null?void 0:b.addAnnotation("callsite_waiting_for_act_thread",f);b==null?void 0:b.addAnnotation("initial_thread_state",g);b==null?void 0:b.addAnnotationBoolean("is_mi_thread_requested",d("MAWVerifyThreadExistsUtils").isThreadRequested(p));d("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(j,{bool:{during_mic:d("MAWMIC").duringMIC(),is_thread_requested:d("MAWVerifyThreadExistsUtils").isThreadRequested(p),ls_sync_has_ended:d("LSPlatformLsInitLog").LsSync.hasEnded(),maw_init_completed:d("MAWInit").MAWInitState.isCompleted()}});d("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(j,"enqueue_by_thread_key_timeout");m.MUSTFIX(l(),o,f,g,p);e(g)},o);k.push({callback:b,description:f,telemetryInstanceKey:j,threadState:g,timeoutId:q});n.set(p,k)}function e(a,b,c,e){if(a==null&&b==null)return;var f=a!=null?b!=null?"both":"clientThreadKey":"authoritativeThreadKey";a=a==null?0:(a=(a=n.get(a))==null?void 0:a.length)!=null?a:0;b=b==null?0:(b=(b=n.get(b))==null?void 0:b.length)!=null?b:0;d("MAWThreadMappingQPL").addAnnotations({"int":{authorativeThreadKeyCallbacksNum:b,clientThreadKeyCallbacksNum:a},string:{flushBasedOnKey:f,flushReason:e}},c);d("MAWThreadMappingQPL").addPoint("flush_awaiting_callbacks",c)}function f(a,b,c,d){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=(h||(h=d("I64"))).to_string(a),i=n.get(g);if(i==null||i.length===0)return;while(i.length!==0){var l=i.shift();if(l==null)continue;var o=l.callback,p=l.description,q=l.telemetryInstanceKey,r=l.threadState;l=l.timeoutId;d("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(q,"enqueue_by_thread_key_end");d("MAWMiActOnActThreadReadyInstrumentation").addAnnotationsQPL(q,{string:{caller_identifier:e,processed_based_on_key:f}});try{m.DEBUG(k(),p,g),d("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(q),yield o(a,b),c("clearTimeout")(l)}catch(a){c("clearTimeout")(l),d("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(q,"process_queue_on_act_thread_ready_failure"),m.catching(a).MUSTFIX(j(),p,r,g)}}n["delete"](g)});return p.apply(this,arguments)}g.enqueueByThreadKey=a;g.logOnFlushQueue=e;g.processQueueOnActThreadReady=f}),98);
__d("MAWUnrecoverableDbErrors",[],(function(a,b,c,d,e,f){"use strict";var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(babelHelpers.wrapNativeSuper(Error));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(b=a.call.apply(a,[this].concat(d))||this,b.name="indexed_db_access_error",babelHelpers.assertThisInitialized(b))||babelHelpers.assertThisInitialized(b)}return b}(g);var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(a=b.call.apply(b,[this].concat(d))||this,a.name="ear_init_error",babelHelpers.assertThisInitialized(a))||babelHelpers.assertThisInitialized(a)}return a}(g),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(a=b.call.apply(b,[this].concat(d))||this,a.name="ear_runtime_error",babelHelpers.assertThisInitialized(a))||babelHelpers.assertThisInitialized(a)}return a}(g),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e){a=b.call(this,a)||this;a.name="ebsm_hydration_error";a.fullDeletion=c;a.qplInstanceKey=d;a.tableName=e;return a}return a}(g),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return(a=b.call.apply(b,[this].concat(d))||this,a.name="wa_exceeded_storage_quota_error",babelHelpers.assertThisInitialized(a))||babelHelpers.assertThisInitialized(a)}return a}(g);function a(a){return a==null?!1:a instanceof g||l(a.name)}function l(a){return a==="indexed_db_access_error"||a==="ear_init_error"||a==="ear_runtime_error"||a==="ebsm_hydration_error"||a==="wa_exceeded_storage_quota_error"}var m=null,n=new Set();function b(){return m}function c(a,b){m=a,b==null?void 0:b(),n.forEach(function(b){return b(a)})}function d(a){n.add(a);return function(){return n["delete"](a)}}f.UnrecoverableDbError=g;f.IndexedDbAccessError=e;f.EarInitError=h;f.EarRuntimeError=i;f.EbsmHydrationError=j;f.WAExceededStorageQuotaError=k;f.isUnrecoverableDbError=a;f.isUnrecoverableDbErrorByName=l;f.getError=b;f.setError=c;f.subscribe=d}),66);
__d("MAWUnsafeCoerce",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.unsafeCoerce=a}),66);
__d("MAWVaultMaterialsStorageStatus",[],(function(a,b,c,d,e,f){"use strict";var g=!1;function a(){return g}function b(){g=!0}f.isCurrentContextHoldingLock=a;f.setIsCurrentContextHoldingLock=b}),66);
__d("MAWVault",["ExecutionEnvironment","FBLogger","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWODSProxy","MAWVaultMaterials","MAWVaultMaterialsStorageStatus","WAOdsEnums","err","gkx","hasMultipleTabs","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map();function k(a){return new RegExp("^[0-9]{10}##[0-9]{10}.*[0-9]{10}##[0-9]{10}$").test(a)}var l=c("gkx")("23909");function m(a){if(!l)return!1;var b=d("MAWVaultMaterials").getVaultPrefixAndSuffix();b=b==null?!1:new RegExp(b+".*"+b).test(a);return b}function n(a,b){b===void 0&&(b=!1);if(!l)return a;if(m(a)){var e=d("MAWVaultMaterials").getVaultMaterials(),f=e.encryptionKey;e=e.prefixAndSuffix;if(e==null){o("unvault","prefix_null");throw c("FBLogger")("messenger_web").mustfixThrow("Vault prefix and suffix should not be null when unvaulting")}var g=new RegExp(e+"(.*)"+e);g=a.match(g);if(g==null||g.length!=2){o("unvault","value_null");throw c("FBLogger")("messenger_web").mustfixThrow("Could not retrieve inner value to unvault")}if(f==null){o("unvault","key_null");throw c("FBLogger")("messenger_web").mustfixThrow("Vault encryption key was null before unvault")}g=g[1];e=""+e+g+e;var i=q(f,g);return a.replace(e,function(){return i})}if(k(a)){o("unvault","incorrect_key");if(b)throw c("FBLogger")("messenger_web").mustfixThrow("Encountered vaulted value with incorrect key.");else{var j=c("err")("Encountered vaulted value with incorrect key");c("promiseDone")(d("hasMultipleTabs").hasMultipleTabs().then(function(a){c("FBLogger")("messenger_web").catching(j).mustfix("Encountered vaulted value with incorrect key. Vault material source: %s, environment: %s, hasMultipleTabs: %s, isSharedWorker: %s, isCurrentContextHoldingLock: %s",d("MAWVaultMaterials").getVaultMaterialsSource(),(h||(h=c("ExecutionEnvironment"))).isInMainThread?"main":"worker",a==null?"unknown_multi_tab":a?"multi_tab":"single_tab",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()?"shared_worker":"dedicated_worker",d("MAWVaultMaterialsStorageStatus").isCurrentContextHoldingLock()?"holding_lock":"not_holding_lock")}))}}return a}function o(a,b){d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_VAULTING,key:"failure."+a+"."+b})}function a(a){if(a==="")return a;if(!l)return a;if(!(h||(h=c("ExecutionEnvironment"))).isInBrowser)return a;if(!d("MAWVaultMaterials").hasVaultBeenSetup()){o("vault","has_not_been_setup");c("FBLogger")("messenger_web").mustfix("Attempted to vault value while materials were not setup");return a}if(m(a)){o("vault","already_vaulted");c("FBLogger")("messenger_web").warn("Attempted to vault value that's already been vaulted");return a}k(a)&&(o("vault","already_vaulted_with_different_key"),c("FBLogger")("messenger_web").mustfix("Attempted to vault value that's already been vaulted with a different key"));var b=d("MAWVaultMaterials").getVaultMaterials(),e=b.encryptionKey;b=b.prefixAndSuffix;if(b==null||e==null){o("vault","prefix_or_key_null");throw c("FBLogger")("messenger_web").mustfixThrow("Cannot vault before vault materials are set")}e=p(e,a);return""+b+e+b}function b(a){if(!l)return a;if(!m(a))throw c("FBLogger")("messenger_web").mustfixThrow("Value should be vaulted");return n(a)}function p(a,b){var c=i==null?void 0:i.get(b);if(c!=null)return c;c=new TextEncoder().encode(b).buffer;a=d("MAWKeychainNaClCrypto").encryptTweetNaCl(a,new Uint8Array(c));i==null?void 0:i.set(b,a);j==null?void 0:j.set(a,b);return a}function q(a,b){var c=j==null?void 0:j.get(b);if(c!=null)return c;c=new TextDecoder().decode(d("MAWKeychainNaClCrypto").decryptTweetNaCl(a,b,void 0,d("MAWKeychainCrypto").ADDITIONAL_DATA.byteLength));i==null?void 0:i.set(c,b);j==null?void 0:j.set(b,c);return c}g.isVaulted=m;g.unvault=n;g.vault=a;g.unvaultOrThrow=b}),98);
__d("WACommon.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={EVERYONE:1,SILENT:2,AI:3,AI_IMAGINE:4};b={PROFILE:0};c={PLACEHOLDER:0,NO_PLACEHOLDER:1,IGNORE:2};e={};f={};var h={},i={},j={};e.name="MessageKey";e.internalSpec={remoteJid:[1,(d=d("WAProtoConst")).TYPES.STRING],fromMe:[2,d.TYPES.BOOL],id:[3,d.TYPES.STRING],participant:[4,d.TYPES.STRING]};f.name="Command";f.internalSpec={commandType:[1,d.TYPES.ENUM,a],offset:[2,d.TYPES.UINT32],length:[3,d.TYPES.UINT32],validationToken:[4,d.TYPES.STRING]};h.name="Mention";h.internalSpec={mentionType:[1,d.TYPES.ENUM,b],mentionedJid:[2,d.TYPES.STRING],offset:[3,d.TYPES.UINT32],length:[4,d.TYPES.UINT32]};i.name="MessageText";i.internalSpec={text:[1,d.TYPES.STRING],mentionedJid:[2,d.FLAGS.REPEATED|d.TYPES.STRING],commands:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,f],mentions:[4,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h]};j.name="SubProtocol";j.internalSpec={payload:[1,d.TYPES.BYTES],version:[2,d.TYPES.INT32]};g.COMMAND_COMMAND_TYPE=a;g.MENTION_MENTION_TYPE=b;g.FUTURE_PROOF_BEHAVIOR=c;g.MessageKeySpec=e;g.CommandSpec=f;g.MentionSpec=h;g.MessageTextSpec=i;g.SubProtocolSpec=j}),98);
__d("WAArmadilloXMA.pb",["WACommon.pb","WAProtoConst"],(function(a,b,c,d,e,f,g){var h;a={INFO:0,EYE_OFF:1,NEWS_OFF:2,WARNING:3,PRIVATE:4,NONE:5,MEDIA_LABEL:6,POST_COVER:7,POST_LABEL:8,WARNING_SCREENS:9};b={OPEN_NATIVE:11};c={SINGLE:0,HSCROLL:1,PORTRAIT:3,STANDARD_DXMA:12,LIST_DXMA:15,GRID:16};e={UNSUPPORTED:-1,IG_STORY_PHOTO_MENTION:4,IG_SINGLE_IMAGE_POST_SHARE:9,IG_MULTIPOST_SHARE:10,IG_SINGLE_VIDEO_POST_SHARE:11,IG_STORY_PHOTO_SHARE:12,IG_STORY_VIDEO_SHARE:13,IG_CLIPS_SHARE:14,IG_IGTV_SHARE:15,IG_SHOP_SHARE:16,IG_PROFILE_SHARE:19,IG_STORY_PHOTO_HIGHLIGHT_SHARE:20,IG_STORY_VIDEO_HIGHLIGHT_SHARE:21,IG_STORY_REPLY:22,IG_STORY_REACTION:23,IG_STORY_VIDEO_MENTION:24,IG_STORY_HIGHLIGHT_REPLY:25,IG_STORY_HIGHLIGHT_REACTION:26,IG_EXTERNAL_LINK:27,IG_RECEIVER_FETCH:28,FB_FEED_SHARE:1e3,FB_STORY_REPLY:1001,FB_STORY_SHARE:1002,FB_STORY_MENTION:1003,FB_FEED_VIDEO_SHARE:1004,FB_GAMING_CUSTOM_UPDATE:1005,FB_PRODUCER_STORY_REPLY:1006,FB_EVENT:1007,FB_FEED_POST_PRIVATE_REPLY:1008,FB_SHORT:1009,FB_COMMENT_MENTION_SHARE:1010,FB_POST_MENTION:1011,FB_PROFILE_DIRECTORY_ITEM:1013,FB_FEED_POST_REACTION_REPLY:1014,MSG_EXTERNAL_LINK_SHARE:2e3,MSG_P2P_PAYMENT:2001,MSG_LOCATION_SHARING:2002,MSG_LOCATION_SHARING_V2:2003,MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:2004,MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:2005,MSG_RECEIVER_FETCH:2006,MSG_IG_MEDIA_SHARE:2007,MSG_GEN_AI_SEARCH_PLUGIN_RESPONSE:2008,MSG_REELS_LIST:2009,MSG_CONTACT:2010,MSG_THREADS_POST_SHARE:2011,MSG_FILE:2012,MSG_AVATAR_DETAILS:2013,MSG_AI_CONTACT:2014,MSG_MEMORIES_SHARE:2015,MSG_SHARED_ALBUM_REPLY:2016,MSG_SHARED_ALBUM:2017,MSG_OCCAMADILLO_XMA:2018,MSG_GEN_AI_SUBSCRIPTION:2021,MSG_GEN_AI_REMINDER:2022,MSG_GEN_AI_MEMU_ONBOARDING_RESPONSE:2023,MSG_NOTE_REPLY:2024,MSG_NOTE_MENTION:2025,GEN_AI_ENTITY:2026,RTC_AUDIO_CALL:3e3,RTC_VIDEO_CALL:3001,RTC_MISSED_AUDIO_CALL:3002,RTC_MISSED_VIDEO_CALL:3003,RTC_GROUP_AUDIO_CALL:3004,RTC_GROUP_VIDEO_CALL:3005,RTC_MISSED_GROUP_AUDIO_CALL:3006,RTC_MISSED_GROUP_VIDEO_CALL:3007,RTC_ONGOING_AUDIO_CALL:3008,RTC_ONGOING_VIDEO_CALL:3009,MSG_RECEIVER_FETCH_FALLBACK:3025,DATACLASS_SENDER_COPY:4e3};f={};var i={};f.name="ExtendedContentMessage";f.internalSpec={associatedMessage:[1,(h=d("WAProtoConst")).TYPES.MESSAGE,(d=d("WACommon.pb")).SubProtocolSpec],targetType:[2,h.TYPES.ENUM,e],targetUsername:[3,h.TYPES.STRING],targetId:[4,h.TYPES.STRING],targetExpiringAtSec:[5,h.TYPES.INT64],xmaLayoutType:[6,h.TYPES.ENUM,c],ctas:[7,h.FLAGS.REPEATED|h.TYPES.MESSAGE,i],previews:[8,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.SubProtocolSpec],titleText:[9,h.TYPES.STRING],subtitleText:[10,h.TYPES.STRING],maxTitleNumOfLines:[11,h.TYPES.UINT32],maxSubtitleNumOfLines:[12,h.TYPES.UINT32],favicon:[13,h.TYPES.MESSAGE,d.SubProtocolSpec],headerImage:[14,h.TYPES.MESSAGE,d.SubProtocolSpec],headerTitle:[15,h.TYPES.STRING],overlayIconGlyph:[16,h.TYPES.ENUM,a],overlayTitle:[17,h.TYPES.STRING],overlayDescription:[18,h.TYPES.STRING],sentWithMessageId:[19,h.TYPES.STRING],messageText:[20,h.TYPES.STRING],headerSubtitle:[21,h.TYPES.STRING],xmaDataclass:[22,h.TYPES.STRING],contentRef:[23,h.TYPES.STRING],mentionedJid:[24,h.FLAGS.REPEATED|h.TYPES.STRING],commands:[25,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.CommandSpec],mentions:[26,h.FLAGS.REPEATED|h.TYPES.MESSAGE,d.MentionSpec]};i.name="ExtendedContentMessage$CTA";i.internalSpec={buttonType:[1,h.TYPES.ENUM,b],title:[2,h.TYPES.STRING],actionUrl:[3,h.TYPES.STRING],nativeUrl:[4,h.TYPES.STRING],ctaType:[5,h.TYPES.STRING],actionContentBlob:[6,h.TYPES.STRING]};g.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH=a;g.EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE=b;g.EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE=c;g.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE=e;g.ExtendedContentMessageSpec=f;g.ExtendedContentMessage$CTASpec=i}),98);
__d("MAWXMAUtils",["I64","LSIntEnum","LSXmaContentType","MAWMsgType","WAArmadilloXMA.pb","WALogger","WATimeUtils","gkx","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Hit Unreachable XMAType "," - checking isXMAShare"]);j=function(){return a};return a}function a(a){return!a||a.type!==d("MAWMsgType").MSG_TYPE.XMA?null:a}function b(a){if(a==null)return!1;switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:return c("gkx")("2605");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return!0;case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:return c("gkx")("6952");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return c("gkx")("4902");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:return c("gkx")("9339");case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:return!1;default:d("WALogger").ERROR(j(),a);return!1}}function e(a){return a!=null&&((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_SHARE))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_MENTION))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_PRODUCER_STORY_REPLY)))}function f(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function k(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}function l(a){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").MSG_CONTACT))}function m(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH}function n(a){return a==null?!1:a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE}function o(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY}function p(a,b){return a!=null&&a||b!=null&&b<d("WATimeUtils").unixTime()}function q(a){a=a.ctas;a!=null&&(a=a.filter(function(a){return a.buttonType!==d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE}));return a}function r(a){return babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0})}function s(a){a=babelHelpers["extends"]({},a,{ctas:void 0,defaultCTA:void 0,defaultPreviewMediaId:void 0,defaultPreviewMediaPlaintextHash:void 0,faviconMediaId:void 0,faviconPlaintextHash:void 0,headerMediaId:void 0,headerMediaPlaintextHash:void 0,headerTitle:void 0,isTombstoned:!0,maxSubtitleNumOfLines:void 0,maxTitleNumOfLines:void 0,overlayDescription:void 0,overlayIconGlyph:void 0,overlayTitle:void 0,previewMediaIds:void 0,subtitleText:void 0,targetId:void 0,targetUsername:void 0,titleText:void 0});c("justknobx")._("3897")&&(a.targetExpiringAtSec=void 0);return a}function t(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:return!0;default:return!1}}function u(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY}function v(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION}function w(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION?!0:!1}function x(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION}function y(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return!0;default:return!1}}function z(a){return w(a)||y(a)}function A(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE}function B(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE||a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE}function C(a){return a===d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY}function D(a){switch(a){case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:return!0;default:return!1}}g.maybeXMAMessage=a;g.isXMAShare_DO_NOT_USE=b;g.isXMAFBStory=e;g.isXMAStoryShare=f;g.isXMAExternalLinkShare=k;g.isXMAContactShare=l;g.isReceiverFetchXMA=m;g.isIGXMAStoryShare=n;g.isXMAPostPrivateReply=o;g.isXMAExpired=p;g.removeCTAsForStoryMentionXMA=q;g.buildUnstoredTombstonedXMA=r;g.buildTombstonedDbXMA=s;g.isXMAStoryReply=t;g.isXMAStoryProducerReply=u;g.isXMAStoryReaction=v;g.isFBXMAStoryMention=w;g.isFBXMAPostMention=x;g.isIGXMAStoryMention=y;g.isXMAStoryMention=z;g.isIGXMAPostShare=A;g.isXMAStoryHighlightShare=B;g.isXMAMsgHighlightsTabFriendUpdatesReply=C;g.isRtcXMA=D}),98);
__d("MNLSXMALayoutType",[],(function(a,b,c,d,e,f){a=Object.freeze({SINGLE:0,HSCROLL:1,XCENTER:2,PORTRAIT:4,LAYERED:5,PLACEHOLDER:6,EXPIRED_PLACEHOLDER:7,PILE_PROMPT:8,STACK:9,SHARED_STACK:10,STACK_CARD:11,STANDARD_DXMA:12,DXMA_PLACEHOLDER:13,THREAD_SHORTCUT:14,LIST_DXMA:15,GRID:16,BLOKS_XMA:17,TWO_CARD:18,NOTE:19,VSTACK:20,SQUIRCLE:21,REPLY:22,RICH_RESPONSE:23,CODE:24,TABLE:25,SQUIRCLE_SHARED_STACK:26,UNIFIED_RESPONSE:27,CARD:28});f["default"]=a}),66);
__d("MNXMAPreviewImageDecorationType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,COLLAGE:1,VIDEO:2,MESSENGER_ICON:3,INSTAGRAM_ICON:4,SHOPPING:5,UPCOMING_EVENT:6,LIVE:7,REEL:8,IGTV:9,YOUTUBE_VIDEO:10,YOUTUBE_SHORTS:11,COMMENT:12,BLUR:13,PILL:14,MESSENGER_CHANNEL_IMAGE:15,TROPHY:16,DXMA_LIVE:17,DXMA_LIVE_ENDED:18,LIKE_BUBBLE_REPLY:19,LIKE_BUBBLES:20,REPOST:21});f["default"]=a}),66);
__d("MWEncryptedBackupsLocalStorageEntryEnum",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED:"maw_eb_interstitial_dialog_verify_device_nux_dismissed",VERIFY_DEVICE_NUX_DISMISSED:"maw_eb_verify_device_in_thread_nux_dismissed",ENCRYPTED_BACKUPS_OPT_OUT:"maw_encrypted_backups_opt_out",MW_ENCRYPTED_BACKUPS_USER_CLICKED_ON_SETTINGS:"mw_encrypted_backups_user_clicked_on_settings",MW_ENCRYPTED_BACKUPS_HIGH_FRICTION_RESTORE_DISMISSED:"mw_encrypted_backups_high_friction_restore__dismissed",ENCRYPTED_BACKUPS_TURN_OFF_SECURE_STORAGE:"mw_encrypted_backups_turn_off_secure_storage",ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT:"mw_encrypted_backups_remember_browser_consent",ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY:"maw_eb_restored_successfully",MW_EB_SHOULD_NOT_DISPLAY_SOFTBLOCK:"mw_eb_should_not_display_softblock",MW_EB_HAS_RESTORED_IN_CURRENT_SESSION:"maw_eb_has_restored_in_current_session",MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2:"maw_eb_has_restored_in_current_session_temp",MW_EB_HAS_SET_UP_IN_CURRENT_SESSION:"maw_eb_has_set_up_in_current_session",ENCRYPTED_BACKUPS_ONBOARDED_SUCCESSFULLY:"maw_eb_onboarded_successfully",EB_ONBOARDING_DEFER_UPSELL_UNTIL_TIME:"mw_eb_onboarding_defer_upsell_until_time",EB_ONBOARDING_QP_DISMISSED:"mw_eb_onboarding_qp_dismissed",EB_ONBOARDING_CHAT_TAB_QP_DISMISSED:"mw_eb_onboarding_chat_tab_qp_dismissed",EB_POST_DECISION_WEB_ONLY_ONBOARDING:"mw_eb_post_decision_web_only_onboarding",EB_MOBILE_ONBOARDING_QP_DISMISSED:"mw_eb_mobile_onboarding_qp_dismissed",EB_MOBILE_ONBOARDING_PERSISTENT_BANNER_DISMISSED:"mw_eb_mobile_onboarding_persistent_banner_dismissed",EBSM_CORRUPTION_WIPE:"ebsm_corruption_wipe",MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE:"mw_eb_has_opted_out_of_auto_restore",MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED:"mw_eb_precutover_banner_on_open_thread_dismissed",MW_EB_POSTCUTOVER_BANNER_ON_SECURE_THREAD_DISMISSED:"mw_eb_postcutover_banner_on_secure_thread_dismissed",VERIFY_KEYS_IN_CHAT_ENABLED:"mw_eb_verify_keys_in_chat_enabled"});c=a;f["default"]=c}),66);
__d("getMWEncryptedBackupsIsLocalStorageSupported",["FBLogger","WebStorage"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){if((h||(h=c("WebStorage"))).getLocalStorage()==null){c("FBLogger")("labyrinth_web").warn("Local storage not supported");return!1}if((h||(h=c("WebStorage"))).isLocalStorageQuotaExceeded()){c("FBLogger")("labyrinth_web").warn("Local storage quota exceeded");return!1}return!0}g.getMWEncryptedBackupsIsLocalStorageSupported=a}),98);
__d("MWEncryptedBackupsSharedState",["ReQL","ReQLSuspense","WebStorage","getMWEncryptedBackupsIsLocalStorageSupported","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function l(a){var b=a.db,c=a.stateKey;a=a.stateValue;var d=a===void 0?"true":a;return b.runInTransaction(function(a){return a.experiences_shared_state.upsert([c],{stateKey:c,stateValue:d})},"readwrite","background",void 0,f.id+":37")}function m(a){var b,e=a.db;a=a.stateKey;if(!d("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported())return;b=(b=(h||(h=c("WebStorage"))).getLocalStorageForRead())==null?void 0:b.getItem(a);if(b!=null){var f;(f=(h||(h=c("WebStorage"))).getLocalStorage())==null?void 0:f.removeItem(a);c("promiseDone")(l({db:e,stateKey:a,stateValue:b}))}return b}function a(a){var b=a.db,c=a.sharedStateTable,d=a.stateKey;a=c.filter(function(a){return a.stateKey===d});if(a.length===0){c=m({db:b,stateKey:d});return c!=null}return!0}function b(a){var b=a.db,c=a.sharedStateTable,d=a.stateKey;a=c.filter(function(a){return a.stateKey===d});c=a[0];return(c==null?void 0:c.stateValue)!=null?c.stateValue:m({db:b,stateKey:d})}function e(a){var b=a.db,c=a.sharedStateRow;a=a.stateKey;return c==null?m({db:b,stateKey:a}):c.stateValue}function n(a){var b=a.db,c=a.stateKey;return b.runInTransaction(function(a){return a.experiences_shared_state["delete"](c)},"readwrite","background",void 0,f.id+":131")}function o(a){var b,e=(i||(i=c("useReStore")))();b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.experiences_shared_state).getKeyRange(a)},[e.tables.experiences_shared_state,a],f.id+":142"))==null?void 0:b.stateValue;var g=k(function(b){return l({db:e,stateKey:a,stateValue:b})},[e,a]);return[b,g]}function p(a){a=o(a);var b=a[0],c=a[1];a=k(function(){void c("true")},[c]);return[b==="true",a]}g.upsertEBSharedStateEntry=l;g.getEntryPresentInLocalStorage=m;g.getIsEntryPresentInSharedState=a;g.getEntryValueFromSharedState=b;g.getEntryValue=e;g.deleteEntry=n;g.useEBSharedStateEntry=o;g.useEBSharedStateEntryBoolean=p}),98);
__d("MainPageUrl",["ExecutionEnvironment","FBLogger","SimpleHook"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new URL(function(){var a=(typeof self!=="undefined"?self:typeof window!=="undefined"?window:{location:{href:"http://undefined"}}).location.href;(h||(h=c("ExecutionEnvironment"))).isInWorker&&a&&a.startsWith("blob:")&&(a=a.substring(5,a.length));return a}()),j=new URL(i.href),k=new(d("SimpleHook").SimpleHook)();function l(){var a;return(h||(h=c("ExecutionEnvironment"))).isInBrowser&&(j==null?void 0:(a=j.searchParams)==null?void 0:a.get("workerlog"))==="debug"}function a(a){try{l()&&c("FBLogger")("worker").debug("received url "+a);var b=new URL(a,j.href||i.href);j.href!==b.href?(j.href=b.href,k.call(j)):l()&&c("FBLogger")("worker").debug("ignoring url: path didn't change in "+a)}catch(a){c("FBLogger")("worker").catching(a).warn("invalid url")}}typeof window==="object"&&typeof window.location==="object"&&typeof window.location.href==="string"&&a(window.location.href);g.mainPageUrl=j;g.onMainPageUrlChange=k;g.isWorkerLogEnabled=l;g.updateMainPageUrl=a}),98);
__d("MessagingAttachmentType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,STICKER:1,IMAGE:2,ANIMATED_IMAGE:3,VIDEO:4,AUDIO:5,FILE:6,XMA:7,EPHEMERAL_IMAGE:8,EPHEMERAL_VIDEO:9,SELFIE_STICKER:10,SOUND_BITE:12,CATALOG_ITEM:13,POWER_UP:14,THIRD_PARTY_STICKER:15});f["default"]=a}),66);
__d("NestedTimeRange",["SimpleHook","performance","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(d("SimpleHook").SimpleHook)(),k=new(d("SimpleHook").SimpleHook)(),l="/";function m(a,b){return""+a+l+b}b=function(){function a(a,b){b===void 0&&(b=null),this.$3=0,this.$1=a,this.$2=b}var b=a.prototype;b.isRunning=function(){return this.$3>0};b.fullname=function(){return this.$2!==null?m(this.$2.fullname(),this.$1):this.$1};b.start=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());if(this.$3===0){var b;(b=this.$2)==null?void 0:b.start(a);this.__onStart(a)}++this.$3;return a};b.__onStart=function(a){j.call(this,a)};b.stop=function(a){a===void 0&&(a=(h||(h=c("performanceAbsoluteNow")))());--this.$3;if(this.$3===0){var b;this.__onStop(a);(b=this.$2)==null?void 0:b.stop(a)}return a};b.__onStop=function(a){k.call(this,a)};return a}();function a(){(i||(i=c("performance"))).mark&&(i||(i=c("performance"))).measure&&(j.add(function(a,b){(i||(i=c("performance"))).mark(a.fullname()+"_start")}),k.add(function(a,b){(i||(i=c("performance"))).measure(a.fullname(),a.fullname()+"_start")}))}g.OnRangeStart=j;g.OnRangeStop=k;g.TIME_RANGE_LEVEL_SEPARATOR=l;g.rangeFullName=m;g.NestedTimeRange=b;g.enableDevConsoleTimeline=a}),98);
__d("QLogEvent",["DoubleKeyMap","FBLogger","NestedTimeRange","QPLEvent","SimpleHook","performanceNavigationStart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("DoubleKeyMap").DoubleKeyMap)(),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=b.call(this,a,d)||this;a.$QPLRange$p_1=c;i.set(c,a.fullname(),babelHelpers.assertThisInitialized(a));return a}var e=a.prototype;e.__onStart=function(a){b.prototype.__onStart.call(this,a),this.$QPLRange$p_1.point(this.fullname()+"_START",{timestamp:a})};e.__onStop=function(a){b.prototype.__onStop.call(this,a),this.$QPLRange$p_1.point(this.fullname()+"_END",{timestamp:a}),i["delete"](this.$QPLRange$p_1,this.fullname())};e.range=function(b){this.fullname().startsWith(d("NestedTimeRange").TIME_RANGE_LEVEL_SEPARATOR)||c("FBLogger")("qpl").warn("Range %s cannot have subrange since root name does not start with /",this.fullname());var e=d("NestedTimeRange").rangeFullName(this.fullname(),b);return(e=i.get(this.$QPLRange$p_1,e))!=null?e:new a(b,this.$QPLRange$p_1,this)};return a}(d("NestedTimeRange").NestedTimeRange),k=new(d("DoubleKeyMap").DoubleKeyMap)(),l=new((b=d("SimpleHook")).SimpleHook)(),m=new b.SimpleHook(),n=new b.SimpleHook(),o=new b.SimpleHook(),p=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,e,f,g){var i;c===void 0&&(c=0);e===void 0&&(e=2);f===void 0&&(f=!1);var j=(h||(h=d("QPLEvent"))).getMarkerId(a);i=b.call(this,"event_"+j)||this;i.event=a;i.instanceKey=c;i.$QPLEvent$p_1=e;i.isUserFlow=f;i.$QPLEvent$p_2=g;k.set(j,c,babelHelpers.assertThisInitialized(i));return i}var e=a.prototype;e.action=function(a){this.$QPLEvent$p_1=a;return this};e.getAction=function(){return this.$QPLEvent$p_1};e.setIsUserFlow=function(a){this.isUserFlow=a;return this};e.startFromNavStart=function(){this.start(c("performanceNavigationStart")());return this};e.startFromTime=function(a){this.start(a);return this};e.__onStart=function(a){var b;(b=this.$QPLEvent$p_2)==null?void 0:b.onStart(this,a);l.call(this,a)};e.__onStop=function(a){var b;(b=this.$QPLEvent$p_2)==null?void 0:b.onStop(this,a);m.call(this,a);i.deleteAll(this);k["delete"]((h||(h=d("QPLEvent"))).getMarkerId(this.event),this.instanceKey)};e.range=function(a){var b;return(b=i.get(this,a))!=null?b:new j(a,this)};e.point=function(a,b){var c;b===void 0&&(b={});(c=this.$QPLEvent$p_2)==null?void 0:c.onPoint(this,a,b);n.call(this,a,b);return this};e.annotate=function(a){var b;(b=this.$QPLEvent$p_2)==null?void 0:b.onAnnotate(this,a);o.call(this,a);return this};return a}(d("NestedTimeRange").NestedTimeRange);function a(a,b,c){var e;b===void 0&&(b=0);return(e=k.get((h||(h=d("QPLEvent"))).getMarkerId(a),b))!=null?e:new p(a,b,2,!1,c)}g.OnEventStart=l;g.OnEventStop=m;g.OnEventPoint=n;g.OnEventAnnotate=o;g.QPLEvent=p;g.event=a}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("TimedOnceFunc",["ExecutionEnvironment"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.$2=!1,this.$4=a,this.$3=b,(h||(h=c("ExecutionEnvironment"))).isInBrowser&&this.$5()}var b=a.prototype;b.$6=function(){this.$1!=null&&clearTimeout(this.$1),this.$1=null};b.$5=function(){var a=this;this.isDone()||(this.$6(),this.$1=setTimeout(function(){a.$2=!0,a.run()},this.$3))};b.isDone=function(){return this.$4===null};b.isCancelled=function(){return this.$1===null&&this.$4!==null};b.run=function(){this.$6();if(this.$4!=null){var a=this.$4;this.$4=null;a(this.$2)}};b.getDelay=function(){return this.$3};b.delay=function(a){this.$3=a!=null?a:this.$3,this.$5()};b.cancel=function(){this.$6()};return a}();g.TimedOnceFunc=a}),98);
__d("VirtualMessageChannel",["invariant","Promise","SimpleHook","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=function(){function a(a){a===void 0&&(a=!1),this.$2=new(d("SimpleHook").SimpleHook)(),this.onmessage=null,this.onmessageerror=null,this.$3=a}var e=a.prototype;e.setRemotePort=function(a){this.$1=a};e.addEventListener=function(a,b,c){(a==="message"||a==="error")&&c==null||h(0,55320,a);if(a==="message")if(typeof b==="function")this.$2.add(b);else{c=b.handleEvent.bind(b);this.$2.add(c);b.__handler=c}};e.removeEventListener=function(a,b,c){if(typeof b==="function")this.$2.remove(b);else{a=b.__handler;this.$2.remove(a)}};e.postMessage=function(a,d){var e=this,f=function(){var b=c("nullthrows")(e.$1,"By now remote port must have value!");b.$2.call({data:a,ports:d})};this.$3?f():c("promiseDone")((i||(i=b("Promise"))).resolve(),f)};e.start=function(){};return a}();a=function(a,b){this.port1=new j(a),this.port2=new j(b),this.port1.setRemotePort(this.port2),this.port2.setRemotePort(this.port1)};g.VirtualMessagePort=j;g.VirtualMessageChannel=a}),98);
__d("WAArrayZip",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Math.min(a.length,b.length);return a.slice(0,c).map(function(a,c){return[a,b[c]]})}f.zip=a}),66);
__d("WAErrorMessage",[],(function(a,b,c,d,e,f){"use strict";var g="NoErrorMessageProvided";function a(a){if(typeof a==="string")return a;if(a instanceof Error)return a.toString();if(typeof a==="object")if(typeof (a==null?void 0:a.description)==="string")return a.description;else if(typeof (a==null?void 0:a.message)==="string")return a.message;return g}f.NO_ERROR_MESSAGE_PROVIDED=g;f.maybeGetMessageFromError=a}),66);
__d("WASIContext",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b;this.fs=(b=a==null?void 0:a.fs)!=null?b:{};this.args=(b=a==null?void 0:a.args)!=null?b:[];this.env=(b=a==null?void 0:a.env)!=null?b:{};this.stdin=(b=a==null?void 0:a.stdin)!=null?b:function(){return null};this.stdout=(b=a==null?void 0:a.stdout)!=null?b:function(){};this.stderr=(b=a==null?void 0:a.stderr)!=null?b:function(){};this.debug=a==null?void 0:a.debug;this.isTTY=!!(a==null?void 0:a.isTTY)};f.WASIContext=a}),66);
__d("WASISnapshotPreview1",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SUCCESS:0,E2BIG:1,EACCESS:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EAGAIN:6,EALREADY:7,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTSUP:58,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75,ENOTCAPABLE:76});d=(c=b("$InternalEnum"))({REALTIME:0,MONOTONIC:1,PROCESS_CPUTIME_ID:2,THREAD_CPUTIME_ID:3});e=c({SET:0,CUR:1,END:2});b=c({UNKNOWN:0,BLOCK_DEVICE:1,CHARACTER_DEVICE:2,DIRECTORY:3,REGULAR_FILE:4,SOCKET_DGRAM:5,SOCKET_STREAM:6,SYMBOLIC_LINK:7});var g=c({DIR:0});c=c({CLOCK:0,FD_READ:1,FD_WRITE:2});var h={SYMLINK_FOLLOW:1<<0},i={CREAT:1<<0,DIRECTORY:1<<1,EXCL:1<<2,TRUNC:1<<3},j={APPEND:1<<0,DSYNC:1<<1,NONBLOCK:1<<2,RSYNC:1<<3,SYNC:1<<4},k={FD_DATASYNC:BigInt(1)<<BigInt(0),FD_READ:BigInt(1)<<BigInt(1),FD_SEEK:BigInt(1)<<BigInt(2),FD_FDSTAT_SET_FLAGS:BigInt(1)<<BigInt(3),FD_SYNC:BigInt(1)<<BigInt(4),FD_TELL:BigInt(1)<<BigInt(5),FD_WRITE:BigInt(1)<<BigInt(6),FD_ADVISE:BigInt(1)<<BigInt(7),FD_ALLOCATE:BigInt(1)<<BigInt(8),PATH_CREATE_DIRECTORY:BigInt(1)<<BigInt(9),PATH_CREATE_FILE:BigInt(1)<<BigInt(10),PATH_LINK_SOURCE:BigInt(1)<<BigInt(11),PATH_LINK_TARGET:BigInt(1)<<BigInt(12),PATH_OPEN:BigInt(1)<<BigInt(13),FD_READDIR:BigInt(1)<<BigInt(14),PATH_READLINK:BigInt(1)<<BigInt(15),PATH_RENAME_SOURCE:BigInt(1)<<BigInt(16),PATH_RENAME_TARGET:BigInt(1)<<BigInt(17),PATH_FILESTAT_GET:BigInt(1)<<BigInt(18),PATH_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(19),PATH_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(20),FD_FILESTAT_GET:BigInt(1)<<BigInt(21),FD_FILESTAT_SET_SIZE:BigInt(1)<<BigInt(22),FD_FILESTAT_SET_TIMES:BigInt(1)<<BigInt(23),PATH_SYMLINK:BigInt(1)<<BigInt(24),PATH_REMOVE_DIRECTORY:BigInt(1)<<BigInt(25),PATH_UNLINK_FILE:BigInt(1)<<BigInt(26),POLL_FD_READWRITE:BigInt(1)<<BigInt(27),SOCK_SHUTDOWN:BigInt(1)<<BigInt(28),SOCK_ACCEPT:BigInt(1)<<BigInt(29)},l={ATIM:1<<0,ATIM_NOW:1<<1,MTIM:1<<2,MTIM_NOW:1<<3},m={SUBSCRIPTION_CLOCK_ABSTIME:1<<0},n={FD_READWRITE_HANGUP:1<<0},o=64,p=48,q=32;f.RESULT=a;f.Clock=d;f.Whence=e;f.FileType=b;f.PreopenType=g;f.EventType=c;f.LookupFlags=h;f.OpenFlags=i;f.FileDescriptorFlags=j;f.RightsFlags=k;f.FileStatTimestampFlags=l;f.SubscriptionClockFlags=m;f.EventReadWriteFlags=n;f.FILESTAT_SIZE=o;f.SUBSCRIPTION_SIZE=p;f.EVENT_SIZE=q}),66);
__d("WATextEncoding",[],(function(a,b,c,d,e,f){"use strict";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);
__d("WASIDrive",["WASISnapshotPreview1","WATextEncoding"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.nextFD=10,this.openMap=new Map(),this.fs=babelHelpers["extends"]({},a),this.openMap.set(3,new j(this.fs,"/"))}var b=a.prototype;b.$1=function(a,b,c){a=new h(a,c);b&&(a.buffer=new Uint8Array(new ArrayBuffer(1024),0,0));c=this.nextFD;this.openMap.set(c,a);this.nextFD++;return[d("WASISnapshotPreview1").RESULT.SUCCESS,c]};b.$2=function(a,b){a=new j(a,b);b=this.nextFD;this.openMap.set(b,a);this.nextFD++;return[d("WASISnapshotPreview1").RESULT.SUCCESS,b]};b.$3=function(a,b){return b==="."?!0:a.containsDirectory(b)};b.open=function(a,b,c,e){var f,g=!!(c&(f=d("WASISnapshotPreview1")).OpenFlags.CREAT),h=!!(c&f.OpenFlags.DIRECTORY),i=!!(c&f.OpenFlags.EXCL);c=!!(c&f.OpenFlags.TRUNC);f=this.openMap.get(a);if(!(f instanceof j))return[d("WASISnapshotPreview1").RESULT.EBADF];if(f.containsFile(b)){if(h)return[d("WASISnapshotPreview1").RESULT.ENOTDIR];if(i)return[d("WASISnapshotPreview1").RESULT.EEXIST];a=f.get(b);return this.$1(a,c,e)}else if(this.$3(f,b)){if(b===".")return this.$2(this.fs,"/");var k="/"+b+"/";h=Object.entries(this.fs).filter(function(a){a=a[0];return a.startsWith(k)});return this.$2(Object.fromEntries(h),k)}else{if(g){i=f.fullPath(b);this.fs[i]={path:i,mode:"binary",content:new Uint8Array(0),timestamps:{access:new Date(),modification:new Date(),change:new Date()}};return this.$1(this.fs[i],c,e)}return[d("WASISnapshotPreview1").RESULT.ENOTCAPABLE]}};b.close=function(a){if(!this.openMap.has(a))return d("WASISnapshotPreview1").RESULT.EBADF;var b=this.openMap.get(a);b instanceof h&&b.sync();this.openMap["delete"](a);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.read=function(a,b){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.read(b)]};b.pread=function(a,b,c){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.pread(b,c)]};b.write=function(a,b){a=this.openMap.get(a);if(!a||a instanceof j)return d("WASISnapshotPreview1").RESULT.EBADF;a.write(b);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.pwrite=function(a,b,c){a=this.openMap.get(a);if(!a||a instanceof j)return d("WASISnapshotPreview1").RESULT.EBADF;a.pwrite(b,c);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.sync=function(a){a=this.openMap.get(a);if(!a||a instanceof j)return d("WASISnapshotPreview1").RESULT.EBADF;a.sync();return d("WASISnapshotPreview1").RESULT.SUCCESS};b.seek=function(a,b,c){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.seek(b,c)]};b.tell=function(a){a=this.openMap.get(a);return!a||a instanceof j?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.tell()]};b.renumber=function(a,b){if(!this.exists(a)||!this.exists(b))return d("WASISnapshotPreview1").RESULT.EBADF;if(a===b)return d("WASISnapshotPreview1").RESULT.SUCCESS;this.close(b);a=this.openMap.get(a);this.openMap.set(b,a);return d("WASISnapshotPreview1").RESULT.SUCCESS};b.unlink=function(a,b){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;if(!a.contains(b))return d("WASISnapshotPreview1").RESULT.ENOENT;for(var c of Object.keys(this.fs))(c===a.fullPath(b)||c.startsWith(a.fullPath(b)+"/"))&&delete this.fs[c];return d("WASISnapshotPreview1").RESULT.SUCCESS};b.rename=function(a,b,c,e){a=this.openMap.get(a);c=this.openMap.get(c);if(!(a instanceof j)||!(c instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;if(!a.contains(b))return d("WASISnapshotPreview1").RESULT.ENOENT;if(c.contains(e))return d("WASISnapshotPreview1").RESULT.EEXIST;a=a.fullPath(b);b=c.fullPath(e);for(c of Object.keys(this.fs))if(c.startsWith(a)){e=c.replace(a,b);this.fs[e]=this.fs[c];this.fs[e].path=e;delete this.fs[c]}return d("WASISnapshotPreview1").RESULT.SUCCESS};b.list=function(a){a=this.openMap.get(a);return!(a instanceof j)?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.list()]};b.stat=function(a){a=this.openMap.get(a);return!(a instanceof h)?[d("WASISnapshotPreview1").RESULT.EBADF]:[d("WASISnapshotPreview1").RESULT.SUCCESS,a.stat()]};b.pathStat=function(a,b){a=this.openMap.get(a);if(!(a instanceof j))return[d("WASISnapshotPreview1").RESULT.EBADF];if(a.containsFile(b)){var c=a.fullPath(b);c=new h(this.fs[c],0).stat();return[d("WASISnapshotPreview1").RESULT.SUCCESS,c]}else if(this.$3(a,b)){if(b===".")return[d("WASISnapshotPreview1").RESULT.SUCCESS,new j(this.fs,"/").stat()];var e="/"+b+"/";c=Object.entries(this.fs).filter(function(a){a=a[0];return a.startsWith(e)});a=new j(Object.fromEntries(c),e).stat();return[d("WASISnapshotPreview1").RESULT.SUCCESS,a]}else return[d("WASISnapshotPreview1").RESULT.ENOTCAPABLE]};b.setFlags=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setFlags(b);return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.setSize=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setSize(Number(b));return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.setAccessTime=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setAccessTime(b);return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.setModificationTime=function(a,b){a=this.openMap.get(a);if(a instanceof h){a.setModificationTime(b);return d("WASISnapshotPreview1").RESULT.SUCCESS}else return d("WASISnapshotPreview1").RESULT.EBADF};b.pathSetAccessTime=function(a,b,c){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;a=a.get(b);if(a==null)return d("WASISnapshotPreview1").RESULT.ENOTCAPABLE;b=new h(a,0);b.setAccessTime(c);b.sync();return d("WASISnapshotPreview1").RESULT.SUCCESS};b.pathSetModificationTime=function(a,b,c){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;a=a.get(b);if(a==null)return d("WASISnapshotPreview1").RESULT.ENOTCAPABLE;b=new h(a,0);b.setModificationTime(c);b.sync();return d("WASISnapshotPreview1").RESULT.SUCCESS};b.pathCreateDir=function(a,b){a=this.openMap.get(a);if(!(a instanceof j))return d("WASISnapshotPreview1").RESULT.EBADF;if(a.contains(b))return d("WASISnapshotPreview1").RESULT.ENOTCAPABLE;a=a.fullPath(b)+"/.runno";this.fs[a]={path:a,timestamps:{access:new Date(),modification:new Date(),change:new Date()},mode:"string",content:""};return d("WASISnapshotPreview1").RESULT.SUCCESS};b.exists=function(a){return this.openMap.has(a)};b.fileType=function(a){a=this.openMap.get(a);if(!a)return d("WASISnapshotPreview1").FileType.UNKNOWN;else if(a instanceof h)return d("WASISnapshotPreview1").FileType.REGULAR_FILE;else return d("WASISnapshotPreview1").FileType.DIRECTORY};b.fileFdflags=function(a){a=this.openMap.get(a);if(a instanceof h)return a.fdflags;else return 0};return a}();var h=function(){var b=a.prototype;b.getOffset=function(){return Number(this.$1)};function a(a,b){this.$1=BigInt(0);this.isDirty=!1;this.file=a;if(this.file.mode==="string"){a=this.file.content;var c=d("WATextEncoding").newTextEncoder();this.buffer=c.encode(a)}else this.buffer=this.file.content;this.fdflags=b;this.flagAppend=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.APPEND);this.flagDSync=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.DSYNC);this.flagNonBlock=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.NONBLOCK);this.flagRSync=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.RSYNC);this.flagSync=!!(b&d("WASISnapshotPreview1").FileDescriptorFlags.SYNC)}b.read=function(a){a=this.buffer.subarray(this.getOffset(),this.getOffset()+a);this.$1+=BigInt(a.length);return a};b.pread=function(a,b){return this.buffer.subarray(b,b+a)};b.write=function(a){this.isDirty=!0;if(this.flagAppend){var b=this.buffer.length;this.$2(b+a.byteLength);this.buffer.set(a,b)}else{b=Math.max(this.getOffset()+a.byteLength,this.buffer.byteLength);this.$2(b);this.buffer.set(a,this.getOffset());this.$1+=BigInt(a.byteLength)}(this.flagDSync||this.flagSync)&&this.sync()};b.pwrite=function(a,b){this.isDirty=!0;if(this.flagAppend){var c=this.buffer.length;this.$2(c+a.byteLength);this.buffer.set(a,c)}else{c=Math.max(b+a.byteLength,this.buffer.byteLength);this.$2(c);this.buffer.set(a,b)}(this.flagDSync||this.flagSync)&&this.sync()};b.sync=function(){if(!this.isDirty)return;this.isDirty=!1;if(this.file.mode==="binary"){this.file.content=new Uint8Array(this.buffer);return}var a=d("WATextEncoding").newTextDecoder();this.file.content=a.decode(this.buffer);return};b.seek=function(a,b){switch(b){case d("WASISnapshotPreview1").Whence.SET:this.$1=a;break;case d("WASISnapshotPreview1").Whence.CUR:this.$1+=a;break;case d("WASISnapshotPreview1").Whence.END:this.$1=BigInt(this.buffer.length)+a;break}return this.$1};b.tell=function(){return this.$1};b.stat=function(){return{path:this.file.path,timestamps:this.file.timestamps,type:d("WASISnapshotPreview1").FileType.REGULAR_FILE,byteLength:this.buffer.length}};b.setFlags=function(a){this.fdflags=a};b.setSize=function(a){this.$2(a)};b.setAccessTime=function(a){this.file.timestamps.access=a};b.setModificationTime=function(a){this.file.timestamps.modification=a};b.$2=function(a){if(a<=this.buffer.buffer.byteLength){this.buffer=new Uint8Array(this.buffer.buffer,0,a);return}var b;this.buffer.buffer.byteLength===0?b=new ArrayBuffer(a<1024?1024:a*2):a>this.buffer.buffer.byteLength*2?b=new ArrayBuffer(a*2):b=new ArrayBuffer(this.buffer.buffer.byteLength*2);b=new Uint8Array(b,0,a);b.set(this.buffer);this.buffer=b};return a}();function i(a,b){b=b.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");b=new RegExp("^"+b);return a.replace(b,"")}var j=function(){function a(a,b){this.dir=a,this.prefix=b}var b=a.prototype;b.containsFile=function(a){for(var b of Object.keys(this.dir)){var c=i(b,this.prefix);if(c===a)return!0}return!1};b.containsDirectory=function(a){for(var b of Object.keys(this.dir)){var c=i(b,this.prefix);if(c.startsWith(a+"/"))return!0}return!1};b.contains=function(a){for(var b of Object.keys(this.dir)){var c=i(b,this.prefix);if(c===a||c.startsWith(a+"/"))return!0}return!1};b.get=function(a){return this.dir[this.fullPath(a)]};b.fullPath=function(a){return""+this.prefix+a};b.list=function(){var a=[],b=new Set();for(var c of Object.keys(this.dir)){var e=i(c,this.prefix);if(e.includes("/")){var f=e.split("/")[0];if(b.has(f))continue;b.add(f);a.push({name:f,type:d("WASISnapshotPreview1").FileType.DIRECTORY})}else a.push({name:e,type:d("WASISnapshotPreview1").FileType.REGULAR_FILE})}return a};b.stat=function(){return{path:this.prefix,timestamps:{access:new Date(),modification:new Date(),change:new Date()},type:d("WASISnapshotPreview1").FileType.DIRECTORY,byteLength:0}};return a}();g.WASIDrive=a}),98);
__d("WASI",["WACryptoDependencies","WASIContext","WASIDrive","WASISnapshotPreview1","WATextEncoding","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b,e=new(d("WASIContext").WASIContext)(a),f=new(d("WASIDrive").WASIDrive)(e.fs);function g(){return Object.entries(e.env).map(function(a){var b=a[0];a=a[1];return b+"="+a})}var o={args_get:function(a,c){a=a;c=c;var f=new DataView(b.buffer);for(var g of e.args){f.setUint32(a,c,!0);a+=4;var h=d("WATextEncoding").newTextEncoder().encode(g+"\0"),i=new Uint8Array(b.buffer,c,h.byteLength);i.set(h);c+=h.byteLength}return d("WASISnapshotPreview1").RESULT.SUCCESS},args_sizes_get:function(a,c){var f=e.args,g=f.reduce(function(a,b){return a+d("WATextEncoding").newTextEncoder().encode(b+"\0").byteLength},0),h=new DataView(b.buffer);h.setUint32(a,f.length,!0);h.setUint32(c,g,!0);return d("WASISnapshotPreview1").RESULT.SUCCESS},clock_res_get:function(){throw c("err")("clock_res_get is not implemented")},clock_time_get:function(a,c,e){c=d("WASISnapshotPreview1").Clock.cast(a);if(c==null)return d("WASISnapshotPreview1").RESULT.EINVAL;switch(c){case d("WASISnapshotPreview1").Clock.REALTIME:case d("WASISnapshotPreview1").Clock.MONOTONIC:case d("WASISnapshotPreview1").Clock.PROCESS_CPUTIME_ID:case d("WASISnapshotPreview1").Clock.THREAD_CPUTIME_ID:a=new DataView(b.buffer);a.setBigUint64(e,n(new Date()),!0);return d("WASISnapshotPreview1").RESULT.SUCCESS}},environ_get:function(a,c){a=a;c=c;var e=new DataView(b.buffer);for(var f of g()){e.setUint32(a,c,!0);a+=4;var h=d("WATextEncoding").newTextEncoder().encode(f+"\0"),i=new Uint8Array(b.buffer,c,h.byteLength);i.set(h);c+=h.byteLength}return d("WASISnapshotPreview1").RESULT.SUCCESS},environ_sizes_get:function(a,c){var e=g().reduce(function(a,b){return a+d("WATextEncoding").newTextEncoder().encode(b+"\0").byteLength},0),f=new DataView(b.buffer);f.setUint32(a,g().length,!0);f.setUint32(c,e,!0);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_advise:function(){throw c("err")("fd_advise is not implemented")},fd_allocate:function(){throw c("err")("fd_allocate is not implemented")},fd_close:function(a){return f.close(a)},fd_datasync:function(){throw c("err")("fd_datasync is not implemented")},fd_fdstat_get:function(a,c){if(a<3){if(e.isTTY){var g=i^d("WASISnapshotPreview1").RightsFlags.FD_SEEK^d("WASISnapshotPreview1").RightsFlags.FD_TELL;g=l(d("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0,g)}else g=l(d("WASISnapshotPreview1").FileType.CHARACTER_DEVICE,0);var h=new Uint8Array(b.buffer,c,g.byteLength);h.set(g);return d("WASISnapshotPreview1").RESULT.SUCCESS}if(!f.exists(a))return d("WASISnapshotPreview1").RESULT.EBADF;h=f.fileType(a);g=f.fileFdflags(a);a=l(h,g);h=new Uint8Array(b.buffer,c,a.byteLength);h.set(a);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_fdstat_set_flags:function(a,b){return f.setFlags(a,b)},fd_fdstat_set_rights:function(){return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_get:function(a,c){if(a<3){var e;switch(a){case 0:e="/dev/stdin";break;case 1:e="/dev/stdout";break;case 2:e="/dev/stderr";break;default:e="/dev/undefined";break}var g=k({path:e,byteLength:0,timestamps:{access:new Date(),modification:new Date(),change:new Date()},type:d("WASISnapshotPreview1").FileType.CHARACTER_DEVICE}),h=new Uint8Array(b.buffer,c,g.byteLength);h.set(g);return d("WASISnapshotPreview1").RESULT.SUCCESS}h=f.stat(a);if(h.length===1)return h[0];g=h[1];a=k(g);h=new Uint8Array(b.buffer,c,a.byteLength);h.set(a);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_filestat_set_size:function(){throw c("err")("fd_filestat_set_size is not implemented")},fd_filestat_set_times:function(){throw c("err")("fd_filestat_set_times is not implemented")},fd_pread:function(){throw c("err")("fd_pread is not implemented")},fd_prestat_dir_name:function(a,c,e){if(a!==3)return d("WASISnapshotPreview1").RESULT.EBADF;a=d("WATextEncoding").newTextEncoder().encode("/");c=new Uint8Array(b.buffer,c,e);c.set(a.subarray(0,e));return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_prestat_get:function(a,c){if(a!==3)return d("WASISnapshotPreview1").RESULT.EBADF;a=d("WATextEncoding").newTextEncoder().encode(".");c=new DataView(b.buffer,c);c.setUint8(0,d("WASISnapshotPreview1").PreopenType.DIR);c.setUint32(4,a.byteLength,!0);return d("WASISnapshotPreview1").RESULT.SUCCESS},fd_pwrite:function(){throw c("err")("fd_pwrite is not implemented")},fd_read:function(a,c,g,h){if(a===1||a===2)return d("WASISnapshotPreview1").RESULT.ENOTSUP;var i=new DataView(b.buffer);c=j(i,c,g);g=d("WATextEncoding").newTextEncoder();var k=0,l=d("WASISnapshotPreview1").RESULT.SUCCESS;for(c of c){var m=void 0;if(a===0){var n=e.stdin(c.byteLength);if(n==null)break;m=g.encode(n)}else{n=f.read(a,c.byteLength);if(n.length===1){l=n[0];break}else m=n[1]}n=Math.min(c.byteLength,m.byteLength);c.set(m.subarray(0,n));k+=n}i.setUint32(h,k,!0);return l},fd_readdir:function(){throw c("err")("fd_readdir is not implemented")},fd_renumber:function(){throw c("err")("fd_renumber is not implemented")},fd_seek:function(a,e,g,h){g=d("WASISnapshotPreview1").Whence.cast(g);if(g==null)throw c("err")("fd_seek: invalid whence");a=f.seek(a,e,g);if(a.length===1)return a[0];e=a[0];g=a[1];a=new DataView(b.buffer);a.setBigUint64(h,g,!0);return e},fd_sync:function(){throw c("err")("fd_sync is not implemented")},fd_tell:function(a,c){a=f.tell(a);if(a.length===1)return a[0];var d=a[0];a=a[1];var e=new DataView(b.buffer);e.setBigUint64(c,a,!0);return d},fd_write:function(a,c,g,h){if(a===0)return d("WASISnapshotPreview1").RESULT.ENOTSUP;var i=new DataView(b.buffer);c=j(i,c,g);g=d("WATextEncoding").newTextDecoder();var k=0,l=d("WASISnapshotPreview1").RESULT.SUCCESS;for(c of c){if(c.byteLength===0)continue;if(a===1||a===2){var m=a===1?e.stdout:e.stderr,n=g.decode(c);m(n)}else{l=f.write(a,c);if(l!==d("WASISnapshotPreview1").RESULT.SUCCESS)break}k+=c.byteLength}i.setUint32(h,k,!0);return l},path_create_directory:function(){throw c("err")("path_create_directory is not implemented")},path_filestat_get:function(){throw c("err")("path_filestat_get is not implemented")},path_filestat_set_times:function(){throw c("err")("path_filestat_set_times is not implemented")},path_link:function(){throw c("err")("path_link is not implemented")},path_open:function(a,c,d,e,g,h,i,j,k){c=new DataView(b.buffer);h=m(b,d,e);i=f.open(a,h,g,j);if(i.length===1)return i[0];d=i[0];e=i[1];c.setUint32(k,e,!0);return d},path_readlink:function(){throw c("err")("path_readlink is not implemented")},path_remove_directory:function(){throw c("err")("path_remove_directory is not implemented")},path_rename:function(){throw c("err")("path_rename is not implemented")},path_symlink:function(){throw c("err")("path_symlink is not implemented")},path_unlink_file:function(){throw c("err")("path_unlink_file is not implemented")},poll_oneoff:function(){throw c("err")("poll_oneoff is not implemented")},proc_exit:function(a){throw new h(a)},proc_raise:function(){throw c("err")("proc_raise is not implemented")},random_get:function(a,c){a=new Uint8Array(b.buffer,a,c);d("WACryptoDependencies").getCrypto().getRandomValues(a);return d("WASISnapshotPreview1").RESULT.SUCCESS},sched_yield:function(){throw c("err")("sched_yield is not implemented")},sock_accept:function(){throw c("err")("sock_accept is not implemented")},sock_recv:function(){throw c("err")("sock_recv is not implemented")},sock_send:function(){throw c("err")("sock_send is not implemented")},sock_shutdown:function(){throw c("err")("sock_shutdown is not implemented")}};return{getImportObject:function(){return{wasi_snapshot_preview1:o}},start:function(a){var d=a.exports.memory;if(d instanceof WebAssembly.Memory)b=d;else throw c("err")("Expected memory object");d=a.exports._start;try{d()}catch(a){if(a instanceof h)return{exitCode:a.code,fs:f.fs};else if(a instanceof WebAssembly.RuntimeError)return{exitCode:134,fs:f.fs};else throw a}return{exitCode:0,fs:f.fs}}}}var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this)||this;c.code=a;return c}return a}(babelHelpers.wrapNativeSuper(Error)),i=(b=d("WASISnapshotPreview1")).RightsFlags.FD_DATASYNC|b.RightsFlags.FD_READ|b.RightsFlags.FD_SEEK|b.RightsFlags.FD_FDSTAT_SET_FLAGS|b.RightsFlags.FD_SYNC|b.RightsFlags.FD_TELL|b.RightsFlags.FD_WRITE|b.RightsFlags.FD_ADVISE|b.RightsFlags.FD_ALLOCATE|b.RightsFlags.PATH_CREATE_DIRECTORY|b.RightsFlags.PATH_CREATE_FILE|b.RightsFlags.PATH_LINK_SOURCE|b.RightsFlags.PATH_LINK_TARGET|b.RightsFlags.PATH_OPEN|b.RightsFlags.FD_READDIR|b.RightsFlags.PATH_READLINK|b.RightsFlags.PATH_RENAME_SOURCE|b.RightsFlags.PATH_RENAME_TARGET|b.RightsFlags.PATH_FILESTAT_GET|b.RightsFlags.PATH_FILESTAT_SET_SIZE|b.RightsFlags.PATH_FILESTAT_SET_TIMES|b.RightsFlags.FD_FILESTAT_GET|b.RightsFlags.FD_FILESTAT_SET_SIZE|b.RightsFlags.FD_FILESTAT_SET_TIMES|b.RightsFlags.PATH_SYMLINK|b.RightsFlags.PATH_REMOVE_DIRECTORY|b.RightsFlags.PATH_UNLINK_FILE|b.RightsFlags.POLL_FD_READWRITE|b.RightsFlags.SOCK_SHUTDOWN|b.RightsFlags.SOCK_ACCEPT;function j(a,b,c){var d=new Array(c);b=b;for(var e=0;e<c;e++){var f=a.getUint32(b,!0);b+=4;var g=a.getUint32(b,!0);b+=4;d[e]=new Uint8Array(a.buffer,f,g)}return d}function k(a){var b=new Uint8Array(d("WASISnapshotPreview1").FILESTAT_SIZE),c=new DataView(b.buffer);c.setBigUint64(0,BigInt(0),!0);c.setBigUint64(8,BigInt(o(a.path)),!0);c.setUint8(16,a.type);c.setBigUint64(24,BigInt(1),!0);c.setBigUint64(32,BigInt(a.byteLength),!0);c.setBigUint64(40,n(a.timestamps.access),!0);c.setBigUint64(48,n(a.timestamps.modification),!0);c.setBigUint64(56,n(a.timestamps.change),!0);return b}function l(a,b,c){var d=c!=null?c:i;c=c!=null?c:i;var e=new Uint8Array(24),f=new DataView(e.buffer,0,24);f.setUint8(0,a);f.setUint32(2,b,!0);f.setBigUint64(8,d,!0);f.setBigUint64(16,c,!0);return e}function m(a,b,c){return d("WATextEncoding").newTextDecoder().decode(new Uint8Array(a.buffer,b,c))}function n(a){return BigInt(a.getTime())*BigInt(1e6)}function o(a,b){b===void 0&&(b=0);var c=3735928559^b;b=1103547991^b;for(var d=0,e;d<a.length;d++)e=a.charCodeAt(d),c=Math.imul(c^e,2654435761),b=Math.imul(b^e,1597334677);c=Math.imul(c^c>>>16,2246822507)^Math.imul(b^b>>>13,3266489909);b=Math.imul(b^b>>>16,2246822507)^Math.imul(c^c>>>13,3266489909);return 4294967296*(2097151&b)+(c>>>0)}g.createWasi=a}),98);
__d("WACreateWasmFunction",["WAErrorMessage","WAResultOrError","WASI","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unexpected runtime error: ",", for cli: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["invalid result type"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["non-zero-exit-code: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);l=function(){return a};return a}var m="input",n="output",o="/"+m,p="/"+n;function q(a){var b=a.command,c=a.input,d=a.stderr,e=a.stdout;a=a.cli;var f=new Date();return{args:[a,b,"-i="+m,"-o="+n],fs:(a={},a[o]={content:new Uint8Array(c),mode:"binary",path:o,timestamps:{access:f,change:f,modification:f}},a),stderr:d,stdout:e}}function a(a){var c=a.InputSpec,e=a.ResultSpec,f=a.command,g=a.getWasmModule,m=a.logger,n=a.validateResult,o=a.cli,r=m.TAGS(["WasmFunc"]),s=function(a){r.ERROR(l(),a)},t=function(a){r.LOG(k(),a)};return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=d("encodeProtobuf").encodeProtobuf(c,a).readBuffer();a=d("WASI").createWasi(q({cli:o,command:f,input:a,stderr:s,stdout:t}));var b=a.getImportObject;a=a.start;var k=(yield g());k=(yield WebAssembly.instantiate(k,b()));b=a(k);a=b.exitCode;k=b.fs;k=(b=k[p])==null?void 0:b.content;if(a!==0){r.ERROR(j(),a);return d("WAResultOrError").makeError("wasm-internal-non-zero-exit-code")}if(!(k instanceof Uint8Array)){r.ERROR(i());return d("WAResultOrError").makeError("wasm-internal-invalid-result-type")}b=d("decodeProtobuf").decodeProtobuf(e,k);return n(b)}catch(a){r.ERROR(h(),d("WAErrorMessage").maybeGetMessageFromError(a),o);return a instanceof Error?d("WAResultOrError").DEPRECATED_makeError("wasm-internal-runtime-error",a):d("WAResultOrError").makeError("wasm-internal-runtime-error")}});function k(b){return a.apply(this,arguments)}return k}()}g.createWasmFunction=a}),98);
__d("WADevToolMessageChannel",[],(function(a,b,c,d,e,f){"use strict";var g=new MessageChannel(),h;a=function(){g=new MessageChannel();h(g);return g};b=function(){return g};c=function(a){h=a,h(g)};f.createNewChannel=a;f.getMostRecentChannel=b;f.onCreateNewChannel=c}),66);
__d("WAMapWithDefault",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,b!=null?this.$2=new Map(b):this.$2=new Map()}var b=a.prototype;b.size=function(){return this.$2.size};b.clear=function(){this.$2.clear()};b["delete"]=function(a){return this.$2["delete"](a)};b.get=function(a){var b=this.$2.get(a);if(b!=null)return b;else{b=this.$1(a);this.$2.set(a,b);return b}};b.keys=function(){return this.$2.keys()};b.entries=function(){return this.$2.entries()};b.update=function(b,c){c=new Map(this.$2).set(b,c(this.get(b)));return new a(this.$1,c)};b.toMap=function(){return new Map(this.$2)};return a}();f.MapWithDefault=a}),66);
__d("WorkerMessagePortLogging",["MainPageUrl","QLogEvent","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=Math.random()<.1,i=20,j=100,k=50;function a(){return d("MainPageUrl").isWorkerLogEnabled()||d("MainPageUrl").mainPageUrl.searchParams.get("worker_log")===1}var l=0;function m(){return d("QLogEvent").event(c("qpl")._(41497718,"106"),l++)}function b(a,b,c){c===void 0&&(c=!1);if(b==null||!h)return;var d=b.sendDelayHighPrecision,e=b.sendTimestamp,f=b.sendDateTime,g=b.receiveTimestamp,l=b.receiveDateTime,n=m();n.startFromTime();var o=n.range("SEND_DELAY");o.start(e);o.stop(g);o=n.range("SEND_DELAY_LOW_PRECISION");o.start(f);o.stop(l);o=Math.abs(e-f);e=Math.abs(g-l);n.annotate({string:{port_name:a},"int":{send_delay:d,send_drift:o,receive_drift:e},bool:{send_delay_above_max:d!=null&&d>i,send_drift_above_max:o>j,receive_drift_above_max:e>j}});if(c){f=n.range("ROUND_TRIP");f.start(b.sendTimestamp);f.stop(b.receiveTimestamp);g=b.receiveTimestamp-b.sendTimestamp;n.annotate({"int":{round_trip:g},bool:{round_trip_above_max:g>k}})}n.stop()}g.isWorkerLogEnabled=a;g.logMessageTiming=b}),98);
__d("WorkerMessagePort",["Deferred","FBLogger","MainPageUrl","Promise","PromiseAnnotate","SimpleHook","VirtualMessageChannel","WorkerMessagePortLogging","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){return a}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);function m(a,b){a=k(a);a.__timing=b}function n(a){return a.__timing}a=function(){var a=e.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function e(a,b){var e=this;this.$1={};this.onUnhandledMessage=new l();this.onMessage=new l();this.onPostMessage=new l();this.onError=new l();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return e.onMessageHandler(k(a.data))});this.$2.addEventListener("error",function(a){return e.onError.call(a)});this.onPostMessage.add(function(a){m(a,{receiveDateTime:-1,receiveTimestamp:-1,sendDateTime:Date.now(),sendDelayHighPrecision:0,sendDelayLowPrecision:0,sendTimestamp:(j||(j=c("performanceAbsoluteNow")))()})});this.onMessage.add(function(a){a=n(a);if(a!=null){var b=a.sendDateTime,f=a.sendTimestamp,g=(j||(j=c("performanceAbsoluteNow")))(),h=Date.now();a.receiveTimestamp=g;a.receiveDateTime=h;a.sendDelayHighPrecision=g-f;a.sendDelayLowPrecision=h-b;d("WorkerMessagePortLogging").logMessageTiming(e.name,a)}})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new l(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.removeAllMessageListeners=function(a){a=this.$1[a];a&&a.clear()};a.onMessageOnce=function(a,c){var d=this;return new(i||(i=b("Promise")))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){if(this.$2 instanceof MessagePort)this.$2.close();else if(this.$2 instanceof Worker)this.$2.terminate();else if(this.$2 instanceof DedicatedWorkerGlobalScope)this.$2.close();else{var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)}};a.isWrappingVirtualMessagePort=function(){return this.$2 instanceof d("VirtualMessageChannel").VirtualMessagePort};return e}();function o(a){return k(a)}e=function(a){babelHelpers.inheritsLoose(e,a);function e(e,f){var g;g=a.call(this,e,f)||this;var j=o(babelHelpers.assertThisInitialized(g)),k=new(c("Deferred"))();e=k.getPromise();j.addMessageListener("endpoint_started",function(a){k.resolve(a);var b=n(a);j.postMessage({endpoint:a.endpoint,startSendTimestamp:b==null?void 0:b.sendTimestamp,targetEndpoint:g.name,type:"endpoint_started_received"})});f=j.onMessageOnce("endpoint_started_received",function(){return!0});void (h||(h=d("PromiseAnnotate"))).setDisplayName(e,"endpoint_started");void h.setDisplayName(f,"endpoint_started_received");j.postMessage({endpoint:g.name,type:"endpoint_started"});c("promiseDone")(e,function(a){a=n(a);d("WorkerMessagePortLogging").logMessageTiming(g.name,a)});c("promiseDone")(f,function(a){a=n(a);a!=null&&d("WorkerMessagePortLogging").logMessageTiming(g.name,a,!0)});g.fullyConnected=(i||(i=b("Promise"))).race([e,f]).then(function(){return babelHelpers.assertThisInitialized(g)});return g}return e}(a);g.getMessageTiming=n;g.WorkerMessagePort=a;g.CastWorkerMessagePort=o;g.WorkerSyncedMessagePort=e}),98);
__d("WorkerFuncChannel",["invariant","DateConsts","ExecutionEnvironment","FBLogger","FuncChannel","MainPageUrl","Promise","TimedOnceFunc","VirtualMessageChannel","WorkerMessagePort","err","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k={serialize:function(a,b){b.push(a);return a},deserialize:function(a){return a}},l=1e4,m=0,n=5,o=n+1,p=function(){function a(a){var b=self.WeakRef;b&&(this.$1=new b(a))}var b=a.prototype;b.isDead=function(){return this.$1!=null&&this.$1.deref()==null};return a}(),q=function(e){babelHelpers.inheritsLoose(a,e);function a(a,b,f,g){var i;f===void 0&&(f=null);g===void 0&&(g={});i=e.call(this,a)||this;i.$WorkerFuncChannel$p_1=new Map();i.$WorkerFuncChannel$p_2=new Map();i.$WorkerFuncChannel$p_5={"function":{serialize:function(a,b){b=o++;i.$WorkerFuncChannel$p_1.set(b,a);a={type:"function",value:b};return a},deserialize:function(a){var b=babelHelpers.assertThisInitialized(i),c=a.value;a=function(){var a={type:"call",id:c,method:"__anonymous",thisArg:null,argList:Array.from(arguments)};return b.callMessageHandler(a)};i.$WorkerFuncChannel$p_2.set(c,new p(a));return a}},custom:{serialize:function(a,b){var c=a.constructor.name,d=i.$WorkerFuncChannel$p_4[c];d!=null||h(0,63779,c);d=d.serialize(a,b);return{type:"custom",custom:c,value:d}},deserialize:function(a){var b=a.custom,c=i.$WorkerFuncChannel$p_4[b];c!=null||h(0,63779,b);return c.deserialize(a.value)}},error:{serialize:function(a,b){b={name:a.name,message:a.message,stack:a.stack};return{type:"error",value:b}},deserialize:function(a){var b=c("err")(a.value.message);b.name=a.value.name;b.stack=a.value.stack;return b}},object:{serialize:function(a,b){b=a.constructor;if(b!==Object)throw new Error("Cannot clone class object");return{type:"object",value:a}},deserialize:function(a){return a.value}},raw:{serialize:function(a,b){return{type:"raw",value:a}},deserialize:function(a){return a.value}}};i.name=b;i.$WorkerFuncChannel$p_3=f;i.$WorkerFuncChannel$p_4=g;a=function(a){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("adsworker").debug("[Channel] removing callback ids: %s",a.join()),a.forEach(function(a){return i.$WorkerFuncChannel$p_1["delete"](a)})};var k=i.__remoteInternalFunc(m,a);typeof jest===typeof void 0&&(j||(j=c("ExecutionEnvironment"))).isInBrowser&&setInterval(function(){var a=[];i.$WorkerFuncChannel$p_2.forEach(function(b,c){b.isDead()&&(a.push(c),i.$WorkerFuncChannel$p_2["delete"](c))});a.length>0?k(a):i.$WorkerFuncChannel$p_2.size>5e3&&c("FBLogger")("adsworker").warn("[%s] has too many remaining refs %s",i.name,i.$WorkerFuncChannel$p_2.size)},l);return i}var f=a.prototype;f.__remoteInternalFunc=function(a,b){(a>n||this.$WorkerFuncChannel$p_1.get(a)!=null)&&c("FBLogger")("adsworker").mustfix("invalid internal func id %s",a);this.$WorkerFuncChannel$p_1.set(a,b);b=this.$WorkerFuncChannel$p_5["function"].deserialize({type:"function",value:a});return b};f.$WorkerFuncChannel$p_6=function(a){return a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};f.$WorkerFuncChannel$p_7=function(a){if(typeof a==="function")return"function";if(a===null)return"raw";if(typeof a!=="object")return"raw";if(Array.isArray(a))return"raw";if(this.$WorkerFuncChannel$p_6(a))return"raw";var b=a.constructor.name;if(this.$WorkerFuncChannel$p_4[b])return"custom";return a instanceof Error?"error":"object"};f.$WorkerFuncChannel$p_8=function(a,b){var c=this.$WorkerFuncChannel$p_7(a);return this.$WorkerFuncChannel$p_5[c].serialize(a,b)};f.$WorkerFuncChannel$p_9=function(a){var b=a;if(a!==null&&typeof a==="object"&&typeof a.type==="string"){var c=this.$WorkerFuncChannel$p_5[a.type];if(c)return c.deserialize(a)}return b};f.__onPostOutMessage=function(a){return a};f.__callCallback=function(a,b){a.apply(null,b.argList)};f.setOutMessagePort=function(a,d){var e=this,f=[];this.setCallMessageHandler(function(d){d.thisArg=e.name;var g=[];d.argList=d.argList.map(function(a){return e.$WorkerFuncChannel$p_8(a,g)});var h=new(i||(i=b("Promise")))(function(a,b){d.result={resolveFunc:e.$WorkerFuncChannel$p_8(a,g),rejectFunc:e.$WorkerFuncChannel$p_8(b,g)}}),j=e.__onPostOutMessage(d);j!=null&&(f!=null?f.push({message:d,transferList:g}):a.postMessage(d,g));h["catch"](function(a){c("FBLogger")("worker").catching(a).mustfix("Error: channel %s, remote call of %s returned error %s",e.name,d.method,a.message)});return h});c("promiseDone")(d||x.waitForRemote(this.name),function(){var b=f;f=null;b==null?void 0:b.forEach(function(b){a.postMessage(b.message,b.transferList)});e.$WorkerFuncChannel$p_3==null?void 0:e.$WorkerFuncChannel$p_3()})};f.__messageToCall=function(a){var b=this;a.argList=a.argList.map(function(a){return b.$WorkerFuncChannel$p_9(a)});if(a.result){var d=a.result,e=d.resolveFunc;d=d.rejectFunc;e=this.$WorkerFuncChannel$p_9(e);d=this.$WorkerFuncChannel$p_9(d);a.result={resolveFunc:e,rejectFunc:d}}e=a.id;if(e===void 0)this.messageToCall(a);else{d=this.$WorkerFuncChannel$p_1.get(e);d?this.__callCallback(d,a):c("FBLogger")("adsworker").mustfix("Error: callback is called but no longer available")}};f.setInMessagePort=function(a){var b=this;a.addMessageListener("call",function(a){typeof a.thisArg==="string"&&a.thisArg===b.name&&b.__messageToCall(a)});x.notifyReady(this.name)};f.setMessagePort=function(a){this.setInMessagePort(a);this.setOutMessagePort(a);return this};return a}(c("FuncChannel")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("WorkerMessagePort").WorkerMessagePort);function s(a,b,d,e){x.exportChannel(a,function(e){var f=e.syncPort;e=e.remoteNativePort;var g=b();a===g.name||h(0,54247,a,g.name);var i;e?(i=new r(e,f.name+"("+g.name+")"),e.start(),i.onError.add(function(a){c("FBLogger")("worker").catching(a).mustfix("error caught in remotePort");throw a})):i=f;g.setMessagePort(i).setBackend(d);c("promiseDone")(f.fullyConnected,function(){f.postMessage({type:"channelReady",channelName:g.name}),x.logState("EXPORTED",a)})})}function a(a,b,c,d){d===void 0&&(d={});return s(c,function(){return new q(function(b){return a},c,null,d)},a,b)}var t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,e){e===void 0&&(e="");var f=d("DateConsts").MS_PER_MIN*1;return b.call(this,function(){c("FBLogger")("worker").warn("Channel %s did not establish eventually. %s",a,e)},f)||this}return a}(d("TimedOnceFunc").TimedOnceFunc);function u(a,b){var e,f=null,g,h;b.isWrappingVirtualMessagePort()?(h=new(d("VirtualMessageChannel").VirtualMessageChannel)(!0,!0),e="on virtual dedicated channel"):(h=new MessageChannel(),e="on native dedicated channel",g=[h.port2]);var i=h.port1;f=h.port2;i.start();var j=new r(i,b.name+"("+a.name+")");c("promiseDone")(b.fullyConnected,function(){x.logState("IMPORTING "+e+" ",a.name);a.setInMessagePort(j);var d=new t(a.name,e);c("promiseDone")(b.onMessageOnce("channelReady",function(b){return b.channelName===a.name}),function(b){a.setOutMessagePort(j),d.cancel(),x.logState("ESTABLISHED",a.name)});b.postMessage({type:"channelImport",channelName:a.name,port:f},g)});return a.proxyMethods}function v(a,b,c,d){c===void 0&&(c=null);d===void 0&&(d={});b=new q(function(b){return a},b,c,d);return b}function e(a,b,c,d,e){d===void 0&&(d=null);e===void 0&&(e={});return u(v(a,c,d,e),b)}var w=function(){function a(){this.name=self.name+"_P"+Math.round(10*Math.random()),this.$1=new Map(),this.$2=new Set()}var e=a.prototype;e.logState=function(a,b){d("MainPageUrl").isWorkerLogEnabled()&&c("FBLogger")("worker").debug("%s-%s %s",this.name,a,b)};e.$3=function(a){var b=this.$1.get(a);b==null&&(b={pendingPorts:null,onImportRequest:null},this.$1.set(a,b));return b};e.exportChannel=function(a,b){var d=this,e=this.$3(a);e.onImportRequest!=null&&c("FBLogger")("worker").debug("Re-exporting channel %s",a);e.onImportRequest=b;this.logState("REGISTERED",a);a=e.pendingPorts;if(a!=null){var f=a.filter(function(a){return d.$2.has(a.syncPort)});f.forEach(b);f.length<a.length?e.pendingPorts=a.filter(function(a){return!d.$2.has(a.syncPort)}):e.pendingPorts=null}return e};e.activate=function(a,b,d){var e=this;if(this.$2.has(a)){c("FBLogger")("worker").debug("Port %sis already duplicated ",a.name);return}this.$2.add(a);a.addMessageListener("channelImport",function(b){var c=b.channelName,d=e.$3(c);b={syncPort:a,remoteNativePort:b.port};d.onImportRequest!=null?d.onImportRequest(b):d.pendingPorts!=null?d.pendingPorts.push(b):d.pendingPorts=[b];e.logState("IMPORT REQUEST",c)})};e.notifyReady=function(a){};e.waitForRemote=function(a){return(i||(i=b("Promise"))).resolve()};return a}(),x=new w();function f(a,b,c){x.activate(a,b,c)}g.TransferableTransformer=k;g.WorkerFuncChannel=q;g.exportChannelOnPort=s;g.exportChannel=a;g.importChannelOnPort=u;g.makeChannel=v;g.importChannel=e;g.activateChannels=f}),98);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=(h||(h=c("performanceAbsoluteNow")))());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:(h||(h=c("performanceAbsoluteNow")))()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=(h||(h=c("performanceAbsoluteNow")))());return a.markerEnd(b,d,e,f)}}},"qpl");function a(a){i.setMessagePort(a)}function b(a){i.setBackend(a)}g.setMessagePort=a;g.initQPL=b}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),d("WorkerQPLChannel").setMessagePort(a),e(["QuickPerformanceLogger"],function(a){return d("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("XPlatReactVoprf",["Promise","WAWasmModuleCache","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("LSVoprfWasm").__setRef("XPlatReactVoprf");function j(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield i.load()),b=a.LSVoprfWasm,c=a.locateFile;a=(yield b({getWasmModule:function(){return d("WAWasmModuleCache").loadWasmModule(c())}}));var e,f;try{e=a.createCurveRistretto();f=a.createVoprfExpTwohashdh(e);b={voprfInfo:{curvePtr:e,voprfPtr:f},voprfWasm:a};return{voprfInstance:b}}catch(b){e!=null&&a.freeCurve(e);f!=null&&a.freeVoprf(f);throw b}});return k.apply(this,arguments)}function a(){return(h||(h=b("Promise"))).resolve(j())}function e(a){var b=a.voprfInfo;a=a.voprfWasm;var c=b.curvePtr;b=b.voprfPtr;a.freeCurve(c);a.freeVoprf(b)}g.loadXPlatReactVoprf=a;g.freeVoprfInstance=e}),98);
__d("XPlatRelayEnvironment",["CometRelayEnvironment","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("RelayEnvironment is already set")}function b(){return c("CometRelayEnvironment")}g.setRelayEnvironment=a;g.getRelayEnvironment=b}),98);